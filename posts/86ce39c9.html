<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Autojs脚本开发 | WHY's Blog</title><meta name="author" content="WHY"><meta name="copyright" content="WHY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Autojs 概述1、Autojs 是什么，能做什么？ **不需要 Root 权限 ** 的 JavaScript 自动化 软件  基于无障碍服务接口  官网：https:&#x2F;&#x2F;hyb1996.github.io&#x2F;AutoJs-Docs&#x2F;#&#x2F;  开发 APP 脚本  自动化操作、引流脚本、游戏脚本、简单 app   2、Autojs 各版本之间的区别 4.1.1 版本  7.0.0 pro 版本">
<meta property="og:type" content="article">
<meta property="og:title" content="Autojs脚本开发">
<meta property="og:url" content="https://wade9264.github.io/posts/86ce39c9.html">
<meta property="og:site_name" content="WHY&#39;s Blog">
<meta property="og:description" content="Autojs 概述1、Autojs 是什么，能做什么？ **不需要 Root 权限 ** 的 JavaScript 自动化 软件  基于无障碍服务接口  官网：https:&#x2F;&#x2F;hyb1996.github.io&#x2F;AutoJs-Docs&#x2F;#&#x2F;  开发 APP 脚本  自动化操作、引流脚本、游戏脚本、简单 app   2、Autojs 各版本之间的区别 4.1.1 版本  7.0.0 pro 版本">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092220517.jpg">
<meta property="article:published_time" content="2020-06-11T16:00:00.000Z">
<meta property="article:modified_time" content="2023-02-09T14:23:06.022Z">
<meta property="article:author" content="WHY">
<meta property="article:tag" content="Autojs">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092220517.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://wade9264.github.io/posts/86ce39c9.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Autojs脚本开发',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-02-09 22:23:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/theme.css?v1"><link rel="stylesheet" href="/css/style.css?v1"><link rel="stylesheet" href="/css/nav.css?v1"><link rel="stylesheet" href="/css/page.css?v1"><link rel="stylesheet" href="/css/post.css?v1"><link rel="stylesheet" href="/css/about.css?v1"><link rel="stylesheet" href="/css/movies.css?v1"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="WHY's Blog" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="/css/progress_bar.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><span> 文库</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><span> 工具</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><span> 我的</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092220517.jpg')"><nav class="fixed" id="nav"><span id="blog-info"><a href="/" title="WHY's Blog"></a></span><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="back-home-button-icon fas fa-grip-vertical"></i></div><a id="site-name" href="/" title="首页"><i class="heoicon icon-heologo"></i><i class="fa-solid fa-house"></i></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><span> 文库</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><span> 工具</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><span> 我的</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="search-button"><a class="site-page social-icon search" title="搜索"><i class="fa-solid fa-magnifying-glass"></i></a></div><div class="nav-button" id="mode-button"><a class="site-page" title="浅色和深色模式转换" onclick="switchDarkMode()"><i class="fa-solid fa-moon"></i></a></div><div class="nav-button" id="top-button"><a class="site-page" title="回到顶部" onclick="btf.scrollToDest(0,500)"><i class="fa-solid fa-angles-up"></i></a></div></div></div></nav><div class="coverdiv loaded" id="coverdiv"><img class="nolazyload entered loading" id="post-cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092220517.jpg" alt="cover" data-ll-status="loading"></div><div id="post-info"><div class="meta-firstline"><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span class="post-meta-separator"></span><div class="post-meta-tags-list"><a class="post-meta-tags" href="/tags/Autojs/">Autojs</a><a class="post-meta-tags" href="/tags/JavaScript/">JavaScript</a><span class="post-meta-separator">       </span></div></div><h1 class="post-title">Autojs脚本开发</h1><div class="meta-secondline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2020-06-11T16:00:00.000Z" title="发表于 2020-06-12 00:00:00">2020-06-12</time></span><span class="post-meta-pv-cv" id="" data-flag-title="Autojs脚本开发"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="Autojs-概述"><a href="#Autojs-概述" class="headerlink" title="Autojs 概述"></a>Autojs 概述</h2><h3 id="1、Autojs-是什么，能做什么？"><a href="#1、Autojs-是什么，能做什么？" class="headerlink" title="1、Autojs 是什么，能做什么？"></a>1、Autojs 是什么，能做什么？</h3><ul>
<li><p>**不需要 Root 权限 ** 的 JavaScript 自动化 软件</p>
</li>
<li><p>基于无障碍服务接口</p>
</li>
<li><p>官网：<a target="_blank" rel="noopener" href="https://hyb1996.github.io/AutoJs-Docs/#/">https://hyb1996.github.io/AutoJs-Docs/#/</a></p>
</li>
<li><p>开发 APP 脚本</p>
</li>
<li><p>自动化操作、引流脚本、游戏脚本、简单 app</p>
</li>
</ul>
<h3 id="2、Autojs-各版本之间的区别"><a href="#2、Autojs-各版本之间的区别" class="headerlink" title="2、Autojs 各版本之间的区别"></a>2、Autojs 各版本之间的区别</h3><ul>
<li><p>4.1.1 版本</p>
</li>
<li><p>7.0.0 pro 版本</p>
</li>
<li><p>8.0.0 pro 版本</p>
</li>
</ul>
<h3 id="3、Autojs-的学习路径和学习方法"><a href="#3、Autojs-的学习路径和学习方法" class="headerlink" title="3、Autojs 的学习路径和学习方法"></a>3、Autojs 的学习路径和学习方法</h3><ul>
<li><p>基础入门 JavaScript</p>
</li>
<li><p>ES6 语法</p>
</li>
<li><p>Autojs 文档</p>
</li>
<li><p>Autojs 示例</p>
</li>
<li><p>Autojs 实战</p>
</li>
</ul>
<hr>
<ul>
<li><p>专业程序员的培训方式</p>
</li>
<li><p>Autojs 英语单词入门</p>
</li>
<li><p>Autojs 代码书写规范</p>
</li>
<li><p>Autojs 错误调试和分析</p>
</li>
<li><p>每天直播答疑解惑</p>
</li>
</ul>
<h2 id="Autojs-脚本开发环境搭建"><a href="#Autojs-脚本开发环境搭建" class="headerlink" title="Autojs 脚本开发环境搭建"></a>Autojs 脚本开发环境搭建</h2><h3 id="1、autojs-软件安装及简单使用"><a href="#1、autojs-软件安装及简单使用" class="headerlink" title="1、autojs 软件安装及简单使用"></a>1、autojs 软件安装及简单使用</h3><ul>
<li><p>4.1.1 版本的安装</p>
</li>
<li><p>8.0 pro 版本的安装</p>
</li>
<li><p>简单熟悉一下 autojs 软件</p>
</li>
</ul>
<h3 id="2、安卓手机投屏软件的安装和使用"><a href="#2、安卓手机投屏软件的安装和使用" class="headerlink" title="2、安卓手机投屏软件的安装和使用"></a>2、安卓手机投屏软件的安装和使用</h3><h3 id="3、雷电模拟器的安装和使用"><a href="#3、雷电模拟器的安装和使用" class="headerlink" title="3、雷电模拟器的安装和使用"></a>3、雷电模拟器的安装和使用</h3><h3 id="4、VScode-编辑器的安装和使用"><a href="#4、VScode-编辑器的安装和使用" class="headerlink" title="4、VScode 编辑器的安装和使用"></a>4、VScode 编辑器的安装和使用</h3><h3 id="5、autojs-插件安装和使用"><a href="#5、autojs-插件安装和使用" class="headerlink" title="5、autojs 插件安装和使用"></a>5、autojs 插件安装和使用</h3><ul>
<li><p>hyb1996</p>
</li>
<li><p>ctrl+shift+p</p>
</li>
</ul>
<h3 id="6、autojs-手机端（模拟器端）和电脑端相互连接"><a href="#6、autojs-手机端（模拟器端）和电脑端相互连接" class="headerlink" title="6、autojs 手机端（模拟器端）和电脑端相互连接"></a>6、autojs 手机端（模拟器端）和电脑端相互连接</h3><ul>
<li><p>手机和电脑务必在同一个局域网下</p>
</li>
<li><p>4.1.1 版本的电脑端需要开启 autojs 服务</p>
</li>
<li><p>ipconfig 查看本机 IP 地址</p>
</li>
<li><p>安卓版本需要在 7.0 以上</p>
</li>
</ul>
<h3 id="7、编写第一个-autojs-脚本并打包成-apk"><a href="#7、编写第一个-autojs-脚本并打包成-apk" class="headerlink" title="7、编写第一个 autojs 脚本并打包成 apk"></a>7、编写第一个 autojs 脚本并打包成 apk</h3><ul>
<li>保存 js 文件到手机</li>
</ul>
<h2 id="应用-—-APP"><a href="#应用-—-APP" class="headerlink" title="应用 — APP"></a>应用 — APP</h2><h3 id="1、关于-APP-版本的命令"><a href="#1、关于-APP-版本的命令" class="headerlink" title="1、关于 APP 版本的命令"></a>1、关于 APP 版本的命令</h3><h4 id="app-versionCode"><a href="#app-versionCode" class="headerlink" title="app.versionCode"></a>app.versionCode</h4><ul>
<li>当前软件版本号</li>
</ul>
<h4 id="app-versionName"><a href="#app-versionName" class="headerlink" title="app.versionName"></a>app.versionName</h4><ul>
<li>当前软件版本名称</li>
</ul>
<h4 id="app-autojs-versionCode"><a href="#app-autojs-versionCode" class="headerlink" title="app.autojs.versionCode"></a>app.autojs.versionCode</h4><ul>
<li>autojs 版本号</li>
</ul>
<h4 id="app-autojs-versionName"><a href="#app-autojs-versionName" class="headerlink" title="app.autojs.versionName"></a>app.autojs.versionName</h4><ul>
<li>autojs 版本名称</li>
</ul>
<h3 id="2、打开-APP"><a href="#2、打开-APP" class="headerlink" title="2、打开 APP"></a>2、打开 APP</h3><h4 id="app-launchApp-appName"><a href="#app-launchApp-appName" class="headerlink" title="app.launchApp(appName)"></a>app.launchApp(appName)</h4><ul>
<li>通过 APP 名称打开 APP</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该函数也可以作为全局函数使用。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//打开autojs</span></span><br><span class="line"><span class="title function_">launchApp</span>(<span class="string">&quot;Auto.js&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="app-launch-packageName"><a href="#app-launch-packageName" class="headerlink" title="app.launch(packageName)"></a>app.launch(packageName)</h4><ul>
<li>通过 APP 包名打开 APP</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//另一种写法</span></span><br><span class="line">app.<span class="title function_">launchPackage</span>(packageName);</span><br><span class="line"></span><br><span class="line"><span class="comment">//该函数也可以作为全局函数使用。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//启动微信</span></span><br><span class="line"><span class="title function_">launch</span>(<span class="string">&quot;com.tencent.mm&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="app-getPackageName-appName"><a href="#app-getPackageName-appName" class="headerlink" title="app.getPackageName(appName)"></a>app.getPackageName(appName)</h4><ul>
<li><p>获取应用名称对应的已安装的应用的包名。</p>
</li>
<li><p>如果该找不到该应用，返回 null；如果该名称对应多个应用，则只返回其中某一个的包名。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该函数也可以作为全局函数使用。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="title function_">getPackageName</span>(<span class="string">&quot;QQ&quot;</span>); <span class="comment">//返回&quot;com.tencent.mobileqq&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="app-getAppName-packageName"><a href="#app-getAppName-packageName" class="headerlink" title="app.getAppName(packageName)"></a>app.getAppName(packageName)</h4><ul>
<li>获取应用包名对应的已安装的应用的名称。如果该找不到该应用，返回 null。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该函数也可以作为全局函数使用。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="title function_">getAppName</span>(<span class="string">&quot;com.tencent.mobileqq&quot;</span>); <span class="comment">//返回&quot;QQ&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3、查看和编辑文件"><a href="#3、查看和编辑文件" class="headerlink" title="3、查看和编辑文件"></a>3、查看和编辑文件</h3><h4 id="app-viewFile-path"><a href="#app-viewFile-path" class="headerlink" title="app.viewFile(path)"></a>app.viewFile(path)</h4><ul>
<li>用其他应用查看文件。文件不存在的情况由查看文件的应用处理。</li>
</ul>
<h4 id="app-editFile-path"><a href="#app-editFile-path" class="headerlink" title="app.editFile(path)"></a>app.editFile(path)</h4><ul>
<li>用其他应用编辑文件。文件不存在的情况由编辑文件的应用处理。</li>
</ul>
<h3 id="4、APP-的安装和卸载"><a href="#4、APP-的安装和卸载" class="headerlink" title="4、APP 的安装和卸载"></a>4、APP 的安装和卸载</h3><h4 id="app-uninstall-packageName"><a href="#app-uninstall-packageName" class="headerlink" title="app.uninstall(packageName)"></a>app.uninstall(packageName)</h4><ul>
<li>卸载应用。执行后会会弹出卸载应用的提示框。如果该包名的应用未安装，由应用卸载程序处理，可能弹出”未找到应用”的提示。</li>
</ul>
<h4 id="app-viewFile-path-1"><a href="#app-viewFile-path-1" class="headerlink" title="app.viewFile(path)"></a>app.viewFile(path)</h4><ul>
<li>path：apk 的地址</li>
</ul>
<h3 id="5、不同的跳转方式"><a href="#5、不同的跳转方式" class="headerlink" title="5、不同的跳转方式"></a>5、不同的跳转方式</h3><h4 id="app-openAppSetting-packageName"><a href="#app-openAppSetting-packageName" class="headerlink" title="app.openAppSetting(packageName)"></a>app.openAppSetting(packageName)</h4><ul>
<li><p>打开应用的详情页(设置页)。如果找不到该应用，返回 false; 否则返回 true。</p>
</li>
<li><p>该函数也可以作为全局函数使用。</p>
</li>
</ul>
<h4 id="app-startActivity-name"><a href="#app-startActivity-name" class="headerlink" title="app.startActivity(name)"></a>app.startActivity(name)</h4><ul>
<li><p>启动 Auto.js 的特定界面。该函数在 Auto.js 内运行则会打开 Auto.js 内的界面，在打包应用中运行则会打开打包应用的相应界面。</p>
</li>
<li><p><code>name</code> {string} 活动名称，可选的值为:</p>
</li>
<li><p><code>console</code> 日志界面</p>
</li>
<li><p><code>settings</code> 设置界面</p>
</li>
</ul>
<h4 id="app-openUrl-url"><a href="#app-openUrl-url" class="headerlink" title="app.openUrl(url)"></a>app.openUrl(url)</h4><ul>
<li>用浏览器打开网站 url。</li>
</ul>
<h3 id="6、自动发送邮件"><a href="#6、自动发送邮件" class="headerlink" title="6、自动发送邮件"></a>6、自动发送邮件</h3><h4 id="app-sendEmail-options"><a href="#app-sendEmail-options" class="headerlink" title="app.sendEmail(options)"></a>app.sendEmail(options)</h4><ul>
<li><p>options</p>
<p>{Object} 发送邮件的参数。包括:</p>
<ul>
<li><code>email</code> {string} | {Array} 收件人的邮件地址。如果有多个收件人，则用字符串数组表示</li>
<li><code>cc</code> {string} | {Array} 抄送收件人的邮件地址。如果有多个抄送收件人，则用字符串数组表示</li>
<li><code>bcc</code> {string} | {Array} 密送收件人的邮件地址。如果有多个密送收件人，则用字符串数组表示</li>
<li><code>subject</code> {string} 邮件主题(标题)</li>
<li><code>text</code> {string} 邮件正文</li>
<li><code>attachment</code> {string} 附件的路径。</li>
</ul>
</li>
<li><p>根据选项 options 调用邮箱应用发送邮件。这些选项均是可选的。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送邮件给10086@qq.com和10001@qq.com。</span></span><br><span class="line">app.<span class="title function_">sendEmail</span>(&#123;</span><br><span class="line">  <span class="attr">email</span>: [<span class="string">&quot;10086@qq.com&quot;</span>, <span class="string">&quot;10001@qq.com&quot;</span>],</span><br><span class="line">  <span class="attr">subject</span>: <span class="string">&quot;这是一个邮件标题&quot;</span>,</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&quot;这是邮件正文&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="一般全局函数-Globals"><a href="#一般全局函数-Globals" class="headerlink" title="一般全局函数 - Globals"></a>一般全局函数 - Globals</h2><h2 id="悬浮窗-Floaty"><a href="#悬浮窗-Floaty" class="headerlink" title="悬浮窗 - Floaty"></a>悬浮窗 - Floaty</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">悬浮窗在脚本停止运行时会自动关闭，因此，要保持悬浮窗不被关闭，可以用一个空的<span class="built_in">setInterval</span>来实现，例如：</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="1、创建和关闭悬浮窗"><a href="#1、创建和关闭悬浮窗" class="headerlink" title="1、创建和关闭悬浮窗"></a>1、创建和关闭悬浮窗</h2><h3 id="floaty-window-layout"><a href="#floaty-window-layout" class="headerlink" title="floaty.window(layout)"></a>floaty.window(layout)</h3><ul>
<li><p>创建并<strong>显示</strong>一个悬浮窗</p>
</li>
<li><p>返回一个<code>FloatyWindow</code>对象。</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var w = floaty.window(</span><br><span class="line"><span class="tag">&lt;<span class="name">frame</span> <span class="attr">gravity</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span>&gt;</span>悬浮文字<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line">); setTimeout(()=&gt;&#123; w.close(); &#125;, 2000);</span><br></pre></td></tr></table></figure>

<ul>
<li>因为脚本运行的线程不是 UI 线程，而所有对控件的修改操作需要在 UI 线程执行，此时需要用<code>ui.run</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ui.<span class="title function_">run</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  w.<span class="property">text</span>.<span class="title function_">setText</span>(<span class="string">&quot;文本&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="floaty-rawWindow-layout"><a href="#floaty-rawWindow-layout" class="headerlink" title="floaty.rawWindow(layout)"></a>floaty.rawWindow(layout)</h3><ul>
<li><p>创建并<strong>显示</strong>一个原始悬浮窗，返回一个<code>FloatyRawWindow</code>对象</p>
</li>
<li><p>与<code>floaty.window()</code>函数不同的是，该悬浮窗不会增加任何额外设施（例如调整大小、位置按钮），您可以根据自己需要编写任何布局。</p>
</li>
<li><p>而且，该悬浮窗支持完全全屏，可以覆盖状态栏，因此可以做护眼模式之类的应用</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var w = floaty.rawWindow(</span><br><span class="line"><span class="tag">&lt;<span class="name">frame</span> <span class="attr">gravity</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span>&gt;</span>悬浮文字<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frame</span>&gt;</span></span><br><span class="line">); w.setPosition(500, 500); setTimeout(()=&gt;&#123; w.close(); &#125;, 2000);</span><br></pre></td></tr></table></figure>

<h3 id="floaty-closeAll"><a href="#floaty-closeAll" class="headerlink" title="floaty.closeAll()"></a>floaty.closeAll()</h3><ul>
<li>关闭所有悬浮窗</li>
</ul>
<h2 id="2、FloatyWindow-对象"><a href="#2、FloatyWindow-对象" class="headerlink" title="2、FloatyWindow 对象"></a>2、FloatyWindow 对象</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">悬浮窗对象，可通过FloatyWindow.&#123;id&#125;获取悬浮窗界面上的元素。例如, 悬浮窗window上一个控件的id为aaa, 那么window.aaa即可获取到该控件，类似于ui。</span><br></pre></td></tr></table></figure>

<h3 id="FloatyWindow-setAdjustEnabled-enabled"><a href="#FloatyWindow-setAdjustEnabled-enabled" class="headerlink" title="FloatyWindow.setAdjustEnabled(enabled)"></a>FloatyWindow.setAdjustEnabled(enabled)</h3><ul>
<li><p>是否启用悬浮窗调整(大小、位置)</p>
</li>
<li><p>ture 启用 false 不启用</p>
</li>
</ul>
<h3 id="FloatyWindow-setPosition-x-y"><a href="#FloatyWindow-setPosition-x-y" class="headerlink" title="FloatyWindow.setPosition(x, y)"></a>FloatyWindow.setPosition(x, y)</h3><ul>
<li>设置悬浮窗位置</li>
</ul>
<h3 id="FloatyWindow-getX"><a href="#FloatyWindow-getX" class="headerlink" title="FloatyWindow.getX()"></a>FloatyWindow.getX()</h3><ul>
<li>返回悬浮窗位置的 X 坐标。</li>
</ul>
<h3 id="FloatyWindow-getY"><a href="#FloatyWindow-getY" class="headerlink" title="FloatyWindow.getY()"></a>FloatyWindow.getY()</h3><ul>
<li>返回悬浮窗位置的 Y 坐标。</li>
</ul>
<h3 id="FloatyWindow-setSize-width-height"><a href="#FloatyWindow-setSize-width-height" class="headerlink" title="FloatyWindow.setSize(width, height)"></a>FloatyWindow.setSize(width, height)</h3><ul>
<li>设置悬浮窗宽高。</li>
</ul>
<h3 id="FloatyWindow-getWidth"><a href="#FloatyWindow-getWidth" class="headerlink" title="FloatyWindow.getWidth()"></a>FloatyWindow.getWidth()</h3><ul>
<li>返回悬浮窗宽度。</li>
</ul>
<h3 id="FloatyWindow-getHeight"><a href="#FloatyWindow-getHeight" class="headerlink" title="FloatyWindow.getHeight()"></a>FloatyWindow.getHeight()</h3><ul>
<li>返回悬浮窗高度。</li>
</ul>
<h3 id="FloatyWindow-close"><a href="#FloatyWindow-close" class="headerlink" title="FloatyWindow.close()"></a>FloatyWindow.close()</h3><ul>
<li><p>关闭悬浮窗。如果悬浮窗已经是关闭状态，则此函数将不执行任何操作。</p>
<p>被关闭后的悬浮窗不能再显示。</p>
</li>
</ul>
<h3 id="FloatyWindow-exitOnClose"><a href="#FloatyWindow-exitOnClose" class="headerlink" title="FloatyWindow.exitOnClose()"></a>FloatyWindow.exitOnClose()</h3><ul>
<li>使悬浮窗被关闭时自动结束脚本运行</li>
</ul>
<h2 id="3、FloatyRawWindow-对象"><a href="#3、FloatyRawWindow-对象" class="headerlink" title="3、FloatyRawWindow 对象"></a>3、FloatyRawWindow 对象</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">原始悬浮窗对象，可通过window.&#123;id&#125;获取悬浮窗界面上的元素。例如, 悬浮窗window上一个控件的id为aaa, 那么window.aaa即可获取到该控件，类似于ui。</span><br></pre></td></tr></table></figure>

<h3 id="FloatyRawWindow-setTouchable-touchable"><a href="#FloatyRawWindow-setTouchable-touchable" class="headerlink" title="FloatyRawWindow.setTouchable(touchable)"></a>FloatyRawWindow.setTouchable(touchable)</h3><ul>
<li><p><code>touchable</code> {Boolean} 是否可触摸</p>
</li>
<li><p>true 可触摸悬浮窗 false 不可触摸悬浮窗</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var w = floaty.rawWindow(</span><br><span class="line">    &lt;frame gravity=&quot;center&quot; bg=&quot;##44ffcc00&quot;/&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">w.setSize(-1, -1);</span><br><span class="line">w.setTouchable(false);</span><br><span class="line"></span><br><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">    w.close();</span><br><span class="line">&#125;, 4000);</span><br></pre></td></tr></table></figure>

<h3 id="FloatyRawWindow-setPosition-x-y"><a href="#FloatyRawWindow-setPosition-x-y" class="headerlink" title="FloatyRawWindow.setPosition(x, y)"></a>FloatyRawWindow.setPosition(x, y)</h3><ul>
<li>设置悬浮窗位置</li>
</ul>
<h3 id="FloatyRawWindow-getX"><a href="#FloatyRawWindow-getX" class="headerlink" title="FloatyRawWindow.getX()"></a>FloatyRawWindow.getX()</h3><ul>
<li>返回悬浮窗位置的 X 坐标。</li>
</ul>
<h3 id="FloatyRawWindow-getY"><a href="#FloatyRawWindow-getY" class="headerlink" title="FloatyRawWindow.getY()"></a>FloatyRawWindow.getY()</h3><ul>
<li>返回悬浮窗位置的 Y 坐标。</li>
</ul>
<h3 id="FloatyRawWindow-setSize-width-height"><a href="#FloatyRawWindow-setSize-width-height" class="headerlink" title="FloatyRawWindow.setSize(width, height)"></a>FloatyRawWindow.setSize(width, height)</h3><ul>
<li><p>设置悬浮窗宽高。</p>
</li>
<li><p>如果设置为-1，则为占满全屏；</p>
</li>
</ul>
<h3 id="FloatyRawWindow-getWidth"><a href="#FloatyRawWindow-getWidth" class="headerlink" title="FloatyRawWindow.getWidth()"></a>FloatyRawWindow.getWidth()</h3><ul>
<li>返回悬浮窗宽度。</li>
</ul>
<h3 id="FloatyRawWindow-getHeight"><a href="#FloatyRawWindow-getHeight" class="headerlink" title="FloatyRawWindow.getHeight()"></a>FloatyRawWindow.getHeight()</h3><ul>
<li>返回悬浮窗高度。</li>
</ul>
<h3 id="FloatyRawWindow-close"><a href="#FloatyRawWindow-close" class="headerlink" title="FloatyRawWindow.close()"></a>FloatyRawWindow.close()</h3><ul>
<li><p>关闭悬浮窗。如果悬浮窗已经是关闭状态，则此函数将不执行任何操作。</p>
<p>被关闭后的悬浮窗不能再显示。</p>
</li>
</ul>
<h3 id="FloatyRawWindow-exitOnClose"><a href="#FloatyRawWindow-exitOnClose" class="headerlink" title="FloatyRawWindow.exitOnClose()"></a>FloatyRawWindow.exitOnClose()</h3><ul>
<li>使悬浮窗被关闭时自动结束脚本运行</li>
</ul>
<h2 id="脚本引擎-Engines"><a href="#脚本引擎-Engines" class="headerlink" title="脚本引擎 - Engines"></a>脚本引擎 - Engines</h2><p>engines 模块包含了一些与脚本环境、脚本运行、脚本引擎有关的函数，包括运行其他脚本，关闭脚本等。</p>
<p>例如，获取脚本所在目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">toast(engines.myEngine().cwd());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1、在脚本引擎中运行脚本"><a href="#1、在脚本引擎中运行脚本" class="headerlink" title="1、在脚本引擎中运行脚本"></a>1、在脚本引擎中运行脚本</h2><h3 id="engines-execScript-name-script-config"><a href="#engines-execScript-name-script-config" class="headerlink" title="engines.execScript(name, script[, config])"></a>engines.execScript(name, script[, config])</h3><ul>
<li><code>name</code> {string} 要运行的脚本名称。这个名称和文件名称无关，只是在任务管理中显示的名称。</li>
<li><code>script</code> {string} 要运行的脚本内容。</li>
<li><code>config</code>{Object} 运行配置项<ul>
<li><code>delay</code> {number} 延迟执行的毫秒数，默认为 0</li>
<li><code>loopTimes</code> {number} 循环运行次数，默认为 1。0 为无限循环。</li>
<li><code>interval</code> {number} 循环运行时两次运行之间的时间间隔，默认为 0</li>
<li><code>path</code> {Array} | {string} 指定脚本运行的目录。这些路径会用于 require 时寻找模块文件。</li>
</ul>
</li>
</ul>
<p>在新脚本环境中运行脚本 script。返回一个 ScriptExectuion 对象。</p>
<p>所谓新的脚本环境，指定是，脚本中的变量和原脚本的变量是不共享的，并且，脚本会在新的线程中运行。</p>
<p>最简单的例子如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">engines.execScript(&quot;hello world&quot;, &quot;toast(&#x27;hello world&#x27;)&quot;);</span><br></pre></td></tr></table></figure>

<p>如果要循环运行，则：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//每隔3秒运行一次脚本，循环10次</span><br><span class="line">engines.execScript(&quot;hello world&quot;, &quot;toast(&#x27;hello world&#x27;)&quot;, &#123;</span><br><span class="line">    loopTimes: 10,</span><br><span class="line">    interval: 3000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>用字符串来编写脚本非常不方便，可以结合 <code>Function.toString()</code>的方法来执行特定函数:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function helloWorld()&#123;</span><br><span class="line">    //注意，这里的变量和脚本主体的变量并不共享</span><br><span class="line">    toast(&quot;hello world&quot;);</span><br><span class="line">&#125;</span><br><span class="line">engines.execScript(&quot;hello world&quot;, &quot;helloWorld();\n&quot; + helloWorld.toString());</span><br></pre></td></tr></table></figure>

<p>如果要传递变量，则可以把这些封装成一个函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//在新的脚本环境中执行 1 + 2</span><br><span class="line">exec(add, &#123;a: 1, b:2&#125;);</span><br><span class="line"></span><br><span class="line">function exec(action, args)&#123;</span><br><span class="line">    args = args || &#123;&#125;;</span><br><span class="line">    var tmp = action.toString();</span><br><span class="line">    var re = /function\s*(\w*)/i;</span><br><span class="line">    var matches = re.exec(tmp);//方法名</span><br><span class="line">    var name=matches[1];</span><br><span class="line">    engines.execScript(name, name + &quot;(&quot; + JSON.stringify(args) + &quot;);\n&quot; + action.toString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// var tmp = ddd.toString();</span><br><span class="line">// var re = /function\s*(\w*)/i;</span><br><span class="line">// var matches = re.exec(tmp);//方法名</span><br><span class="line">// var name=matches[1];</span><br><span class="line">// log(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//要执行的函数，是一个简单的加法</span><br><span class="line">function ddd(args)&#123;</span><br><span class="line">    toast(args.a + args.b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、在脚本引擎中运行-js-文件"><a href="#2、在脚本引擎中运行-js-文件" class="headerlink" title="2、在脚本引擎中运行 js 文件"></a>2、在脚本引擎中运行 js 文件</h2><h3 id="engines-execScriptFile-path-config"><a href="#engines-execScriptFile-path-config" class="headerlink" title="engines.execScriptFile(path[, config])"></a>engines.execScriptFile(path[, config])</h3><ul>
<li><code>path</code> {string} 要运行的脚本路径。</li>
<li><code>config</code>{Object} 运行配置项<ul>
<li><code>delay</code> {number} 延迟执行的毫秒数，默认为 0</li>
<li><code>loopTimes</code> {number} 循环运行次数，默认为 1。0 为无限循环。</li>
<li><code>interval</code> {number} 循环运行时两次运行之间的时间间隔，默认为 0</li>
<li><code>path</code> {Array} | {string} 指定脚本运行的目录。这些路径会用于 require 时寻找模块文件。</li>
</ul>
</li>
</ul>
<p>在新的脚本环境中运行脚本文件 path。返回一个<a target="_blank" rel="noopener" href="https://hyb1996.github.io/AutoJs-Docs/##/engines?id=scriptexecution">ScriptExecution</a>对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">engines.execScriptFile(&quot;/sdcard/脚本/1.js&quot;);</span><br></pre></td></tr></table></figure>

<h2 id="3、在脚本引擎中运行录制的脚本文件"><a href="#3、在脚本引擎中运行录制的脚本文件" class="headerlink" title="3、在脚本引擎中运行录制的脚本文件"></a>3、在脚本引擎中运行录制的脚本文件</h2><h3 id="engines-execAutoFile-path-config"><a href="#engines-execAutoFile-path-config" class="headerlink" title="engines.execAutoFile(path[, config])"></a>engines.execAutoFile(path[, config])</h3><ul>
<li><code>path</code> {string} 要运行的录制文件路径。</li>
<li><code>config</code>{Object} 运行配置项<ul>
<li><code>delay</code> {number} 延迟执行的毫秒数，默认为 0</li>
<li><code>loopTimes</code> {number} 循环运行次数，默认为 1。0 为无限循环。</li>
<li><code>interval</code> {number} 循环运行时两次运行之间的时间间隔，默认为 0</li>
<li><code>path</code> {Array} | {string} 指定脚本运行的目录。这些路径会用于 require 时寻找模块文件。</li>
</ul>
</li>
</ul>
<p>在新的脚本环境中运行录制文件 path。返回一个 ScriptExecution 对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">engines.execAutoFile(&quot;/sdcard/脚本/1.auto&quot;);</span><br></pre></td></tr></table></figure>

<h2 id="4、脚本引擎控制方法"><a href="#4、脚本引擎控制方法" class="headerlink" title="4、脚本引擎控制方法"></a>4、脚本引擎控制方法</h2><h3 id="engines-stopAll"><a href="#engines-stopAll" class="headerlink" title="engines.stopAll()"></a>engines.stopAll()</h3><ul>
<li>停止所有正在运行的脚本。包括当前脚本自身</li>
</ul>
<h3 id="engines-stopAllAndToast"><a href="#engines-stopAllAndToast" class="headerlink" title="engines.stopAllAndToast()"></a>engines.stopAllAndToast()</h3><ul>
<li>停止所有正在运行的脚本并显示停止的脚本数量。包括当前脚本自身。</li>
</ul>
<h3 id="engines-myEngine"><a href="#engines-myEngine" class="headerlink" title="engines.myEngine()"></a>engines.myEngine()</h3><ul>
<li>返回当前脚本的脚本引擎对象(ScriptEngine）</li>
</ul>
<p>ScriptExecution 执行对象</p>
<p>ScriptEngine 引擎对象</p>
<h3 id="engines-all"><a href="#engines-all" class="headerlink" title="engines.all()"></a>engines.all()</h3><ul>
<li>返回当前所有正在运行的脚本的脚本引擎对象 ScriptEngine 的数组。</li>
</ul>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h2 id="5、脚本执行对象–ScriptExecution"><a href="#5、脚本执行对象–ScriptExecution" class="headerlink" title="5、脚本执行对象–ScriptExecution"></a>5、脚本执行对象–ScriptExecution</h2><p>执行脚本时返回的对象，可以通过他获取执行的引擎、配置等，也可以停止这个执行。</p>
<p>要停止这个脚本的执行，使用<code>ScriptExecution.getEngine().forceStop()</code></p>
<h3 id="ScriptExecution-getEngine"><a href="#ScriptExecution-getEngine" class="headerlink" title="ScriptExecution.getEngine()"></a>ScriptExecution.getEngine()</h3><ul>
<li>返回执行该脚本的脚本引擎对象(ScriptEngine)</li>
</ul>
<h3 id="ScriptExecution-getConfig"><a href="#ScriptExecution-getConfig" class="headerlink" title="ScriptExecution.getConfig()"></a>ScriptExecution.getConfig()</h3><ul>
<li>返回该脚本的运行配置(ScriptConfig)</li>
</ul>
<h2 id="6、脚本引擎对象–ScriptEngine"><a href="#6、脚本引擎对象–ScriptEngine" class="headerlink" title="6、脚本引擎对象–ScriptEngine"></a>6、脚本引擎对象–ScriptEngine</h2><h3 id="ScriptEngine-forceStop"><a href="#ScriptEngine-forceStop" class="headerlink" title="ScriptEngine.forceStop()"></a>ScriptEngine.forceStop()</h3><ul>
<li>停止脚本引擎的执行</li>
</ul>
<h3 id="ScriptEngine-cwd"><a href="#ScriptEngine-cwd" class="headerlink" title="ScriptEngine.cwd()"></a>ScriptEngine.cwd()</h3><ul>
<li><p>返回脚本执行的路径。对于一个脚本文件而言为这个脚本所在的文件夹；</p>
</li>
<li><p>对于其他脚本，例如字符串脚本，则为<code>null</code>或者执行时的设置值。</p>
</li>
</ul>
<h3 id="ScriptEngine-getSource"><a href="#ScriptEngine-getSource" class="headerlink" title="ScriptEngine.getSource()"></a>ScriptEngine.getSource()</h3><ul>
<li><p>返回当前脚本引擎正在执行的脚本对象。</p>
</li>
<li><p>返回脚本路径</p>
</li>
</ul>
<h2 id="7、脚本引擎之间的通信"><a href="#7、脚本引擎之间的通信" class="headerlink" title="7、脚本引擎之间的通信"></a>7、脚本引擎之间的通信</h2><h3 id="ScriptEngine-emit-eventName-…args"><a href="#ScriptEngine-emit-eventName-…args" class="headerlink" title="ScriptEngine.emit(eventName[, …args])"></a>ScriptEngine.emit(eventName[, …args])</h3><ul>
<li><code>eventName</code> {string} 事件名称</li>
<li><code>...args</code> {any} 事件参数</li>
</ul>
<p>向该脚本引擎发送一个事件，该事件可以在该脚本引擎对应的脚本的 events 模块监听到并在脚本主线程执行事件处理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">例如脚本receiver.<span class="property">js</span>的内容如下：</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听say事件</span></span><br><span class="line">events.<span class="title function_">on</span>(<span class="string">&quot;say&quot;</span>, <span class="keyword">function</span>(<span class="params">words</span>)&#123;</span><br><span class="line">    <span class="title function_">toastLog</span>(words);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//保持脚本运行</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//运行脚本</span></span><br><span class="line"><span class="keyword">var</span> e = engines.<span class="title function_">execScriptFile</span>(<span class="string">&quot;./receiver.js&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//等待脚本启动</span></span><br><span class="line"><span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//向该脚本发送事件</span></span><br><span class="line">e.<span class="title function_">getEngine</span>().<span class="title function_">emit</span>(<span class="string">&quot;say&quot;</span>, <span class="string">&quot;你好&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="8、脚本引擎配置–ScriptConfig"><a href="#8、脚本引擎配置–ScriptConfig" class="headerlink" title="8、脚本引擎配置–ScriptConfig"></a>8、脚本引擎配置–ScriptConfig</h2><h3 id="delay"><a href="#delay" class="headerlink" title="delay"></a>delay</h3><ul>
<li>延迟执行的毫秒数</li>
</ul>
<h3 id="interval"><a href="#interval" class="headerlink" title="interval"></a>interval</h3><ul>
<li>循环运行时两次运行之间的时间间隔</li>
</ul>
<h3 id="loopTimes"><a href="#loopTimes" class="headerlink" title="loopTimes"></a>loopTimes</h3><ul>
<li>循环运行次数</li>
</ul>
<h3 id="getPath"><a href="#getPath" class="headerlink" title="getPath()"></a>getPath()</h3><ul>
<li>返回一个字符串数组表示脚本运行时模块寻找的路径</li>
</ul>
<h2 id="一般全局函数-Globals-1"><a href="#一般全局函数-Globals-1" class="headerlink" title="一般全局函数 - Globals"></a>一般全局函数 - Globals</h2><h2 id="1、常用的全局函数"><a href="#1、常用的全局函数" class="headerlink" title="1、常用的全局函数"></a>1、常用的全局函数</h2><h3 id="sleep-n"><a href="#sleep-n" class="headerlink" title="sleep(n)"></a>sleep(n)</h3><ul>
<li>暂停运行 n 毫秒的时间。1 秒等于 1000 毫秒。</li>
</ul>
<h3 id="toast-message"><a href="#toast-message" class="headerlink" title="toast(message)"></a>toast(message)</h3><ul>
<li>以气泡显示信息 message 几秒。(具体时间取决于安卓系统，一般都是 2 秒)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//保证每次显示完成</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _toast_ = toast;</span><br><span class="line">toast = <span class="keyword">function</span> (<span class="params">message</span>) &#123;</span><br><span class="line">  <span class="title function_">_toast_</span>(message);</span><br><span class="line">  <span class="title function_">sleep</span>(<span class="number">2000</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">  <span class="title function_">toast</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="log-message"><a href="#log-message" class="headerlink" title="log(message)"></a>log(message)</h3><ul>
<li>在控制台调试输出信息</li>
</ul>
<h3 id="toastLog-message"><a href="#toastLog-message" class="headerlink" title="toastLog(message)"></a>toastLog(message)</h3><ul>
<li>在控制台和气泡中同时输出信息</li>
</ul>
<h3 id="exit"><a href="#exit" class="headerlink" title="exit()"></a>exit()</h3><ul>
<li>立即停止脚本运行。</li>
</ul>
<h2 id="2、返回当前监测包名和-Activity"><a href="#2、返回当前监测包名和-Activity" class="headerlink" title="2、返回当前监测包名和 Activity"></a>2、返回当前监测包名和 Activity</h2><h3 id="currentPackage"><a href="#currentPackage" class="headerlink" title="currentPackage()"></a>currentPackage()</h3><ul>
<li>返回最近一次监测到的正在运行的应用的包名，一般可以认为就是当前正在运行的应用的包名。</li>
</ul>
<h3 id="currentActivity"><a href="#currentActivity" class="headerlink" title="currentActivity()"></a>currentActivity()</h3><ul>
<li>返回最近一次监测到的正在运行的 Activity 的名称，一般可以认为就是当前正在运行的 Activity 的名称。</li>
</ul>
<h2 id="3、等待包名和-Activity-的出现"><a href="#3、等待包名和-Activity-的出现" class="headerlink" title="3、等待包名和 Activity 的出现"></a>3、等待包名和 Activity 的出现</h2><h3 id="waitForActivity-activity-period-200"><a href="#waitForActivity-activity-period-200" class="headerlink" title="waitForActivity(activity[, period = 200])"></a>waitForActivity(activity[, period = 200])</h3><ul>
<li><code>activity</code> Activity 名称</li>
<li><code>period</code> 轮询等待间隔（毫秒）</li>
</ul>
<p>等待指定的 Activity 出现，period 为检查 Activity 的间隔。</p>
<h3 id="waitForPackage-package-period-200"><a href="#waitForPackage-package-period-200" class="headerlink" title="waitForPackage(package[, period = 200])"></a>waitForPackage(package[, period = 200])</h3><ul>
<li><code>package</code> 包名</li>
<li><code>period</code> 轮询等待间隔（毫秒）</li>
</ul>
<p>等待指定的应用出现。例如<code>waitForPackage(&quot;com.tencent.mm&quot;)</code>为等待当前界面为微信。</p>
<h2 id="4、剪切板：实现复制粘贴功能"><a href="#4、剪切板：实现复制粘贴功能" class="headerlink" title="4、剪切板：实现复制粘贴功能"></a>4、剪切板：实现复制粘贴功能</h2><h3 id="setClip-text"><a href="#setClip-text" class="headerlink" title="setClip(text)"></a>setClip(text)</h3><ul>
<li>设置剪贴板内容。此剪贴板即系统剪贴板，在一般应用的输入框中”粘贴”既可使用。</li>
</ul>
<h3 id="getClip"><a href="#getClip" class="headerlink" title="getClip()"></a>getClip()</h3><ul>
<li>返回系统剪贴板的内容。</li>
</ul>
<h3 id="paste"><a href="#paste" class="headerlink" title="paste()"></a>paste()</h3><ul>
<li>粘贴</li>
</ul>
<h2 id="5、获取随机数"><a href="#5、获取随机数" class="headerlink" title="5、获取随机数"></a>5、获取随机数</h2><h3 id="random"><a href="#random" class="headerlink" title="random()"></a>random()</h3><ul>
<li>返回在[0, 1)的随机浮点数。</li>
</ul>
<h3 id="random-min-max"><a href="#random-min-max" class="headerlink" title="random(min, max)"></a>random(min, max)</h3><ul>
<li>返回一个在[min…max]之间的随机数。例如 random(0, 2)可能产生 0, 1, 2。</li>
</ul>
<h2 id="6、适配安卓版本和-Autojs-版本"><a href="#6、适配安卓版本和-Autojs-版本" class="headerlink" title="6、适配安卓版本和 Autojs 版本"></a>6、适配安卓版本和 Autojs 版本</h2><h3 id="requiresApi-api"><a href="#requiresApi-api" class="headerlink" title="requiresApi(api)"></a>requiresApi(api)</h3><ul>
<li><p>表示此脚本需要 Android API 版本达到指定版本才能运行。例如<code>requiresApi(19)</code>表示脚本需要在 Android 4.4 以及以上运行。</p>
</li>
<li><p>调用该函数时会判断运行脚本的设备系统的版本号，如果没有达到要求则抛出异常。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">平台版本： API级别</span><br><span class="line"></span><br><span class="line">Android 7.0： 24</span><br><span class="line"></span><br><span class="line">Android 6.0： 23</span><br><span class="line"></span><br><span class="line">Android 5.1： 22</span><br><span class="line"></span><br><span class="line">Android 5.0： 21</span><br><span class="line"></span><br><span class="line">Android 4.4W： 20</span><br><span class="line"></span><br><span class="line">Android 4.4： 19</span><br><span class="line"></span><br><span class="line">Android 4.3： 18</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="requiresAutojsVersion-version"><a href="#requiresAutojsVersion-version" class="headerlink" title="requiresAutojsVersion(version)"></a>requiresAutojsVersion(version)</h3><ul>
<li><p><code>version</code> {string} | {number} Auto.js 的版本或版本号</p>
</li>
<li><p>表示此脚本需要 Auto.js 版本达到指定版本才能运行。例如<code>requiresAutojsVersion(&quot;3.0.0 Beta&quot;)</code>表示脚本需要在 Auto.js 3.0.0 Beta 以及以上运行</p>
</li>
<li><p>调用该函数时会判断运行脚本的 Auto.js 的版本号，如果没有达到要求则抛出异常。</p>
</li>
<li><p>可以通过<code>app.autojs.versionCode</code>和<code>app.autojs.versionName</code>获取当前的 Auto.js 版本号和版本。</p>
</li>
</ul>
<h2 id="控制台-Console"><a href="#控制台-Console" class="headerlink" title="控制台 - Console"></a>控制台 - Console</h2><h2 id="1、控制台的常用命令"><a href="#1、控制台的常用命令" class="headerlink" title="1、控制台的常用命令"></a>1、控制台的常用命令</h2><h3 id="console-show"><a href="#console-show" class="headerlink" title="console.show()"></a>console.show()</h3><ul>
<li>显示控制台。这会显示一个控制台的悬浮窗(需要悬浮窗权限)。</li>
</ul>
<h3 id="console-hide"><a href="#console-hide" class="headerlink" title="console.hide()"></a>console.hide()</h3><ul>
<li>隐藏控制台悬浮窗。</li>
</ul>
<h3 id="console-clear"><a href="#console-clear" class="headerlink" title="console.clear()"></a>console.clear()</h3><ul>
<li>清空控制台。</li>
</ul>
<h2 id="2、控制台输出信息的几种方式"><a href="#2、控制台输出信息的几种方式" class="headerlink" title="2、控制台输出信息的几种方式"></a>2、控制台输出信息的几种方式</h2><h3 id="console-log-data-…args"><a href="#console-log-data-…args" class="headerlink" title="console.log([data][, …args])"></a>console.log([data][, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>打印到控制台，并带上换行符。 可以传入多个参数</p>
<p>该函数也可以作为全局函数使用。</p>
<h3 id="console-trace-data-…args"><a href="#console-trace-data-…args" class="headerlink" title="console.trace([data][, …args])"></a>console.trace([data][, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>与 console.log 类似，同时会打印出调用这个函数所在的调用栈信息（即当前运行的文件、行数等信息）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">trace</span>(<span class="string">&quot;Show me&quot;</span>);</span><br><span class="line"><span class="comment">// 打印: (堆栈跟踪会根据被调用的跟踪的位置而变化)</span></span><br><span class="line"><span class="comment">// Show me</span></span><br><span class="line"><span class="comment">//  at &lt;test&gt;:7</span></span><br></pre></td></tr></table></figure>

<h3 id="print-text-…args"><a href="#print-text-…args" class="headerlink" title="print(text[, …args])"></a>print(text[, …args])</h3><ul>
<li>text {string} | {Object} 要打印到控制台的信息</li>
</ul>
<p>相当于<code>log(text)</code>。</p>
<h2 id="3、控制台信息的输出样式"><a href="#3、控制台信息的输出样式" class="headerlink" title="3、控制台信息的输出样式"></a>3、控制台信息的输出样式</h2><h3 id="console-verbose-data-…args"><a href="#console-verbose-data-…args" class="headerlink" title="console.verbose([data][, …args])"></a>console.verbose([data][, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>与 console.log 类似，但输出结果以灰色字体显示。输出优先级低于 log，用于输出观察性质的信息。</p>
<h3 id="console-info-data-…args"><a href="#console-info-data-…args" class="headerlink" title="console.info([data][, …args])"></a>console.info([data][, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>与 console.log 类似，但输出结果以绿色字体显示。输出优先级高于 log, 用于输出重要信息。</p>
<h3 id="console-warn-data-…args"><a href="#console-warn-data-…args" class="headerlink" title="console.warn([data][, …args])"></a>console.warn([data][, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>与 console.log 类似，但输出结果以蓝色字体显示。输出优先级高于 info, 用于输出警告信息。</p>
<h3 id="console-error-data-…args"><a href="#console-error-data-…args" class="headerlink" title="console.error([data][, …args])"></a>console.error([data][, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>与 console.log 类似，但输出结果以红色字体显示。输出优先级高于 warn, 用于输出错误信息。</p>
<h3 id="console-assert-value-message"><a href="#console-assert-value-message" class="headerlink" title="console.assert(value, message)"></a>console.assert(value, message)</h3><ul>
<li>value {any} 要断言的布尔值</li>
<li>message {string} value 为 false 时要输出的信息</li>
</ul>
<p>断言。如果 value 为 false 则输出错误信息 message 并停止脚本运行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a = 1 + 1;</span><br><span class="line">console.assert(a == 2, &quot;加法出错啦&quot;);</span><br></pre></td></tr></table></figure>

<h2 id="4、控制台计时操作"><a href="#4、控制台计时操作" class="headerlink" title="4、控制台计时操作"></a>4、控制台计时操作</h2><h3 id="console-time-label"><a href="#console-time-label" class="headerlink" title="console.time([label])"></a>console.time([label])</h3><ul>
<li><code>label</code> {String} 计时器标签，可省略</li>
</ul>
<p>启动一个定时器，用以计算一个操作的持续时间。 定时器由一个唯一的 <code>label</code> 标识。 当调用 <code>console.timeEnd()</code> 时，可以使用相同的 <code>label</code> 来停止定时器，并以毫秒为单位将持续时间输出到控制台。 重复启动同一个标签的定时器会覆盖之前启动同一标签的定时器。</p>
<h3 id="console-timeEnd-label"><a href="#console-timeEnd-label" class="headerlink" title="console.timeEnd(label)"></a>console.timeEnd(label)</h3><ul>
<li><code>label</code> {String} 计时器标签</li>
</ul>
<p>停止之前通过调用 <code>console.time()</code> 启动的定时器，并打印结果到控制台。 调用 <code>console.timeEnd()</code> 后定时器会被删除。如果不存在标签指定的定时器则会打印 <code>NaNms</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&quot;求和&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">  sum += i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&quot;求和&quot;</span>);</span><br><span class="line"><span class="comment">// 打印 求和: xxx ms</span></span><br></pre></td></tr></table></figure>

<h2 id="5、控制台输入框（无效）"><a href="#5、控制台输入框（无效）" class="headerlink" title="5、控制台输入框（无效）"></a>5、控制台输入框（无效）</h2><h3 id="console-input-data-…args"><a href="#console-input-data-…args" class="headerlink" title="console.input(data[, …args])"></a>console.input(data[, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>与 console.log 一样输出信息，并在控制台显示输入框等待输入。按控制台的确认按钮后会将输入的字符串用 eval 计算后返回。</p>
<p><strong>部分机型可能会有控制台不显示输入框的情况，属于 bug。</strong></p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var n = console.input(&quot;请输入一个数字:&quot;);</span><br><span class="line">//输入123之后：</span><br><span class="line">toast(n + 1);</span><br><span class="line">//显示124</span><br></pre></td></tr></table></figure>

<h3 id="console-rawInput-data-…args"><a href="#console-rawInput-data-…args" class="headerlink" title="console.rawInput(data[, …args])"></a>console.rawInput(data[, …args])</h3><ul>
<li><code>data</code> {any}</li>
<li><code>...args</code> {any}</li>
</ul>
<p>与 console.log 一样输出信息，并在控制台显示输入框等待输入。按控制台的确认按钮后会将输入的字符串直接返回。</p>
<p>部分机型可能会有控制台不显示输入框的情况，属于 bug。</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var n = console.rawInput(&quot;请输入一个数字:&quot;);</span><br><span class="line">//输入123之后：</span><br><span class="line"></span><br><span class="line">toast(n + 1);</span><br><span class="line">//显示1231</span><br></pre></td></tr></table></figure>

<h2 id="6、控制台的大小和位置设置"><a href="#6、控制台的大小和位置设置" class="headerlink" title="6、控制台的大小和位置设置"></a>6、控制台的大小和位置设置</h2><h3 id="console-setSize-w-h"><a href="#console-setSize-w-h" class="headerlink" title="console.setSize(w, h)"></a>console.setSize(w, h)</h3><ul>
<li><code>w</code> {number} 宽度</li>
<li><code>h</code> {number} 高度</li>
</ul>
<p>设置控制台的大小，单位像素。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">console.show();</span><br><span class="line">sleep(2000)</span><br><span class="line">//设置控制台大小为屏幕的四分之一</span><br><span class="line">console.setSize(device.width / 2, device.height / 2);</span><br></pre></td></tr></table></figure>

<h3 id="console-setPosition-x-y"><a href="#console-setPosition-x-y" class="headerlink" title="console.setPosition(x, y)"></a>console.setPosition(x, y)</h3><ul>
<li><code>x</code> {number} 横坐标</li>
<li><code>y</code> {number} 纵坐标</li>
</ul>
<p>设置控制台的位置，单位像素。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.show();</span><br><span class="line">console.setPosition(100, 100);</span><br></pre></td></tr></table></figure>

<h2 id="基于坐标的操作-CoordinatesBasedAutomation"><a href="#基于坐标的操作-CoordinatesBasedAutomation" class="headerlink" title="基于坐标的操作 - CoordinatesBasedAutomation"></a>基于坐标的操作 - CoordinatesBasedAutomation</h2><p>本章节介绍了一些使用坐标进行点击、滑动的函数。</p>
<p>这些函数有的需要安卓 7.0 以上，有的需要 root 权限。</p>
<p>要获取要点击的位置的坐标，可以在开发者选项中开启”指针位置”。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取这个控件</span></span><br><span class="line"><span class="keyword">var</span> widget = <span class="title function_">id</span>(<span class="string">&quot;xxx&quot;</span>).<span class="title function_">findOne</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取其中心位置并点击</span></span><br><span class="line"><span class="title function_">click</span>(widget.<span class="title function_">bounds</span>().<span class="title function_">centerX</span>(), widget.<span class="title function_">bounds</span>().<span class="title function_">centerY</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果用root权限则用Tap</span></span><br></pre></td></tr></table></figure>

<h2 id="1、设置屏幕的宽度和高度"><a href="#1、设置屏幕的宽度和高度" class="headerlink" title="1、设置屏幕的宽度和高度"></a>1、设置屏幕的宽度和高度</h2><h3 id="setScreenMetrics-width-height"><a href="#setScreenMetrics-width-height" class="headerlink" title="setScreenMetrics(width, height)"></a>setScreenMetrics(width, height)</h3><ul>
<li>width {number} 屏幕宽度，单位像素</li>
<li>height {number} 屏幕高度，单位像素</li>
</ul>
<p>设置脚本坐标点击所适合的屏幕宽高。如果脚本运行时，屏幕宽度不一致会自动放缩坐标。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例如在1920*1080的设备中，某个操作的代码为</span><br><span class="line"></span><br><span class="line">setScreenMetrics(1080, 1920);</span><br><span class="line">click(800, 200);</span><br><span class="line">longClick(300, 500);</span><br><span class="line"></span><br><span class="line">那么在其他设备上AutoJs会自动放缩坐标以便脚本仍然有效。例如在540 * 960的屏幕中click(800, 200)实际上会点击位置(400, 100)</span><br></pre></td></tr></table></figure>

<h2 id="2、免-root-手机的三种模拟点击方式"><a href="#2、免-root-手机的三种模拟点击方式" class="headerlink" title="2、免 root 手机的三种模拟点击方式"></a>2、免 root 手机的三种模拟点击方式</h2><h3 id="click-x-y"><a href="#click-x-y" class="headerlink" title="click(x, y)"></a>click(x, y)</h3><ul>
<li>模拟点击坐标(x, y)，并返回是否点击成功。只有在点击执行完成后脚本才继续执行。</li>
</ul>
<blockquote>
<p>一般而言，只有点击过程(大约 150 毫秒)中被其他事件中断(例如用户自行点击)才会点击失败。</p>
<p>使用该函数模拟连续点击时可能有点击速度过慢的问题，这时可以用<code>press()</code>函数代替。</p>
</blockquote>
<h3 id="longClick-x-y"><a href="#longClick-x-y" class="headerlink" title="longClick(x, y)"></a>longClick(x, y)</h3><ul>
<li>模拟长按坐标(x, y), 并返回是否成功。只有在长按执行完成（大约 600 毫秒）时脚本才会继续执行。</li>
</ul>
<h3 id="press-x-y-duration"><a href="#press-x-y-duration" class="headerlink" title="press(x, y, duration)"></a>press(x, y, duration)</h3><ul>
<li>模拟按住坐标(x, y), 并返回是否成功。只有按住操作执行完成时脚本才会继续执行。</li>
</ul>
<h2 id="3、免-root-手机的三种模拟滑动方式"><a href="#3、免-root-手机的三种模拟滑动方式" class="headerlink" title="3、免 root 手机的三种模拟滑动方式"></a>3、免 root 手机的三种模拟滑动方式</h2><h3 id="swipe-x1-y1-x2-y2-duration"><a href="#swipe-x1-y1-x2-y2-duration" class="headerlink" title="swipe(x1, y1, x2, y2, duration)"></a>swipe(x1, y1, x2, y2, duration)</h3><ul>
<li><code>x1</code> {number} 滑动的起始坐标的 x 值</li>
<li><code>y1</code> {number} 滑动的起始坐标的 y 值</li>
<li><code>x2</code> {number} 滑动的结束坐标的 x 值</li>
<li><code>y2</code> {number} 滑动的结束坐标的 y 值</li>
<li><code>duration</code> {number} 滑动时长，单位毫秒</li>
</ul>
<p>模拟从坐标(x1, y1)滑动到坐标(x2, y2)，并返回是否成功。只有滑动操作执行完成时脚本才会继续执行。</p>
<h3 id="gesture-duration-x1-y1-x2-y2-…"><a href="#gesture-duration-x1-y1-x2-y2-…" class="headerlink" title="gesture(duration, [x1, y1], [x2, y2], …)"></a>gesture(duration, [x1, y1], [x2, y2], …)</h3><ul>
<li><code>duration</code> {number} 手势的时长</li>
<li>[x, y] … 手势滑动路径的一系列坐标</li>
</ul>
<p>模拟手势操作。例如<code>gesture(1000, [0, 0], [500, 500], [500, 1000])</code>为模拟一个从(0, 0)到(500, 500)到(500, 100)的手势操作，时长为 2 秒。</p>
<h3 id="gestures-delay1-duration1-x1-y1-x2-y2-…-delay2-duration2-x3-y3-x4-y4-…-…"><a href="#gestures-delay1-duration1-x1-y1-x2-y2-…-delay2-duration2-x3-y3-x4-y4-…-…" class="headerlink" title="gestures([delay1, duration1, [x1, y1], [x2, y2], …], [delay2, duration2, [x3, y3], [x4, y4], …], …)"></a>gestures([delay1, duration1, [x1, y1], [x2, y2], …], [delay2, duration2, [x3, y3], [x4, y4], …], …)</h3><p>同时模拟多个手势。每个手势的参数为[delay, duration, 坐标], delay 为延迟多久(毫秒)才执行该手势；duration 为手势执行时长；坐标为手势经过的点的坐标。</p>
<p>其中 delay 参数可以省略，默认为 0。</p>
<p>例如手指捏合：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gestures([0, 500, [800, 300], [500, 1000]],</span><br><span class="line">         [0, 500, [300, 1500], [500, 1000]]);</span><br></pre></td></tr></table></figure>

<h2 id="4、使用-root-权限模拟点击"><a href="#4、使用-root-权限模拟点击" class="headerlink" title="4、使用 root 权限模拟点击"></a>4、使用 root 权限模拟点击</h2><p>RootAutomator 是一个使用 root 权限来模拟触摸的对象，用它可以完成触摸与多点触摸，并且这些动作的执行没有延迟。</p>
<p>一个脚本中最好只存在一个 RootAutomator，并且保证脚本结束退出他。可以在 exit 事件中退出 RootAutomator，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var ra = new RootAutomator();</span><br><span class="line">events.on(&#x27;exit&#x27;, function()&#123;</span><br><span class="line">  ra.exit();</span><br><span class="line">&#125;);</span><br><span class="line">//执行一些点击操作</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="RootAutomator-tap-x-y-id"><a href="#RootAutomator-tap-x-y-id" class="headerlink" title="RootAutomator.tap(x, y[, id])"></a>RootAutomator.tap(x, y[, id])</h3><ul>
<li><code>x</code> {number} 横坐标</li>
<li><code>y</code> {number} 纵坐标</li>
<li><code>id</code> {number} 多点触摸 id，可选，默认为 1，可以通过 setDefaultId 指定。</li>
</ul>
<p>点击位置(x, y)。其中 id 是一个整数值，用于区分多点触摸，不同的 id 表示不同的”手指”，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var ra = new RootAutomator();</span><br><span class="line">//让&quot;手指1&quot;点击位置(100, 100)</span><br><span class="line">ra.tap(100, 100, 1);</span><br><span class="line">//让&quot;手指2&quot;点击位置(200, 200);</span><br><span class="line">ra.tap(200, 200, 2);</span><br><span class="line">ra.exit();</span><br></pre></td></tr></table></figure>

<p>如果不需要多点触摸，则不需要 id 这个参数。 多点触摸通常用于手势或游戏操作，例如模拟双指捏合、双指上滑等。</p>
<p>某些情况下可能存在 tap 点击无反应的情况，这时可以用<code>RootAutomator.press()</code>函数代替。</p>
<h3 id="RootAutomator-press-x-y-duration-id"><a href="#RootAutomator-press-x-y-duration-id" class="headerlink" title="RootAutomator.press(x, y, duration[, id])"></a>RootAutomator.press(x, y, duration[, id])</h3><ul>
<li><code>x</code> {number} 横坐标</li>
<li><code>y</code> {number} 纵坐标</li>
<li><code>duration</code> {number} 按下时长</li>
<li><code>id</code> {number} 多点触摸 id，可选，默认为 1</li>
</ul>
<p>模拟按下位置(x, y)，时长为 duration 毫秒。</p>
<h3 id="RootAutomator-longPress-x-y-id"><a href="#RootAutomator-longPress-x-y-id" class="headerlink" title="RootAutomator.longPress(x, y[, id])"></a>RootAutomator.longPress(x, y[, id])</h3><ul>
<li><code>x</code> {number} 横坐标</li>
<li><code>y</code> {number} 纵坐标</li>
<li><code>id</code> {number} 多点触摸 id，可选，默认为 1</li>
</ul>
<p>模拟长按位置(x, y)。</p>
<p>以上为简单模拟触摸操作的函数。如果要模拟一些复杂的手势，需要更底层的函数。</p>
<h2 id="5、使用-root-权限模拟滑动（无效果）"><a href="#5、使用-root-权限模拟滑动（无效果）" class="headerlink" title="5、使用 root 权限模拟滑动（无效果）"></a>5、使用 root 权限模拟滑动（无效果）</h2><h3 id="RootAutomator-swipe-x1-x2-y1-y2-duration-id"><a href="#RootAutomator-swipe-x1-x2-y1-y2-duration-id" class="headerlink" title="RootAutomator.swipe(x1, x2, y1, y2[, duration, id])"></a>RootAutomator.swipe(x1, x2, y1, y2[, duration, id])</h3><ul>
<li><code>x1</code> {number} 滑动起点横坐标</li>
<li><code>y1</code> {number} 滑动起点纵坐标</li>
<li><code>x2</code> {number} 滑动终点横坐标</li>
<li><code>y2</code> {number} 滑动终点纵坐标</li>
<li><code>duration</code> {number} 滑动时长，单位毫秒，默认值为 300</li>
<li><code>id</code> {number} 多点触摸 id，可选，默认为 1</li>
</ul>
<p>模拟一次从(x1, y1)到(x2, y2)的时间为 duration 毫秒的滑动。</p>
<h2 id="6、使用-root-权限实现模拟拖动"><a href="#6、使用-root-权限实现模拟拖动" class="headerlink" title="6、使用 root 权限实现模拟拖动"></a>6、使用 root 权限实现模拟拖动</h2><h3 id="RootAutomator-touchDown-x-y-id"><a href="#RootAutomator-touchDown-x-y-id" class="headerlink" title="RootAutomator.touchDown(x, y[, id])"></a>RootAutomator.touchDown(x, y[, id])</h3><ul>
<li><code>x</code> {number} 横坐标</li>
<li><code>y</code> {number} 纵坐标</li>
<li><code>id</code> {number} 多点触摸 id，可选，默认为 1</li>
</ul>
<p>模拟手指按下位置(x, y)。</p>
<h3 id="RootAutomator-touchMove-x-y-id"><a href="#RootAutomator-touchMove-x-y-id" class="headerlink" title="RootAutomator.touchMove(x, y[, id])"></a>RootAutomator.touchMove(x, y[, id])</h3><ul>
<li><code>x</code> {number} 横坐标</li>
<li><code>y</code> {number} 纵坐标</li>
<li><code>id</code> {number} 多点触摸 id，可选，默认为 1</li>
</ul>
<p>模拟移动手指到位置(x, y)。</p>
<h3 id="RootAutomator-touchUp-id"><a href="#RootAutomator-touchUp-id" class="headerlink" title="RootAutomator.touchUp([id])"></a>RootAutomator.touchUp([id])</h3><ul>
<li><code>id</code> {number} 多点触摸 id，可选，默认为 1</li>
</ul>
<p>模拟手指弹起。</p>
<h2 id="7、使用-root-权限点击和滑动的简单命令"><a href="#7、使用-root-权限点击和滑动的简单命令" class="headerlink" title="7、使用 root 权限点击和滑动的简单命令"></a>7、使用 root 权限点击和滑动的简单命令</h2><ul>
<li>推荐使用<code>RootAutomator</code></li>
</ul>
<h3 id="Tap-x-y"><a href="#Tap-x-y" class="headerlink" title="Tap(x, y)"></a>Tap(x, y)</h3><ul>
<li>x, y {number} 要点击的坐标。</li>
</ul>
<p>点击位置(x, y), 您可以通过”开发者选项”开启指针位置来确定点击坐标。</p>
<h3 id="Swipe-x1-y1-x2-y2-duration"><a href="#Swipe-x1-y1-x2-y2-duration" class="headerlink" title="Swipe(x1, y1, x2, y2, [duration])"></a>Swipe(x1, y1, x2, y2, [duration])</h3><ul>
<li>x1, y1 {number} 滑动起点的坐标</li>
<li>x2, y2 {number} 滑动终点的坐标</li>
<li>duration {number} 滑动动作所用的时间</li>
</ul>
<p>滑动。从(x1, y1)位置滑动到(x2, y2)位置。</p>
<h2 id="设备-Device"><a href="#设备-Device" class="headerlink" title="设备 - Device"></a>设备 - Device</h2><p>device 模块提供了与设备有关的信息与操作，例如获取设备宽高，内存使用率，IMEI，调整设备亮度、音量等。</p>
<p>此模块的部分函数，例如调整音量，需要”修改系统设置”的权限。如果没有该权限，会抛出<code>SecurityException</code>并跳转到权限设置界面。</p>
<h2 id="1、获取设备信息"><a href="#1、获取设备信息" class="headerlink" title="1、获取设备信息"></a>1、获取设备信息</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">device.<span class="property">width</span></span><br><span class="line">设备屏幕分辨率宽度。例如<span class="number">1080</span>。</span><br><span class="line"></span><br><span class="line">device.<span class="property">height</span></span><br><span class="line">设备屏幕分辨率高度。例如<span class="number">1920</span>。</span><br><span class="line"></span><br><span class="line">device.<span class="property">buildId</span></span><br><span class="line">修订版本号，或者诸如<span class="string">&quot;M4-rc20&quot;</span>的标识。</span><br><span class="line"></span><br><span class="line">device.<span class="property">broad</span></span><br><span class="line">设备的主板型号。</span><br><span class="line"></span><br><span class="line">device.<span class="property">brand</span></span><br><span class="line">与产品或硬件相关的厂商品牌，如<span class="string">&quot;Xiaomi&quot;</span>, <span class="string">&quot;Huawei&quot;</span>等。</span><br><span class="line"></span><br><span class="line">device.<span class="property">device</span></span><br><span class="line">设备在工业设计中的名称。</span><br><span class="line"></span><br><span class="line">deivce.<span class="property">model</span></span><br><span class="line">设备型号。</span><br><span class="line"></span><br><span class="line">device.<span class="property">product</span></span><br><span class="line">整个产品的名称。</span><br><span class="line"></span><br><span class="line">device.<span class="property">bootloader</span></span><br><span class="line">设备<span class="title class_">Bootloader</span>的版本。</span><br><span class="line"></span><br><span class="line">device.<span class="property">hardware</span></span><br><span class="line">设备的硬件名称(来自内核命令行或者/proc)。</span><br><span class="line"></span><br><span class="line">device.<span class="property">fingerprint</span></span><br><span class="line">构建(build)的唯一标识码。</span><br><span class="line"></span><br><span class="line">device.<span class="property">serial</span></span><br><span class="line">硬件序列号。</span><br><span class="line"></span><br><span class="line">device.<span class="property">sdkInt</span></span><br><span class="line">安卓系统<span class="variable constant_">API</span>版本。例如安卓<span class="number">4.4</span>的sdkInt为<span class="number">19</span>。</span><br><span class="line"></span><br><span class="line">device.<span class="property">incremental</span></span><br><span class="line"></span><br><span class="line">device.<span class="property">release</span></span><br><span class="line"><span class="title class_">Android</span>系统版本号。例如<span class="string">&quot;5.0&quot;</span>, <span class="string">&quot;7.1.1&quot;</span>。</span><br><span class="line"></span><br><span class="line">device.<span class="property">baseOS</span></span><br><span class="line"></span><br><span class="line">device.<span class="property">securityPatch</span></span><br><span class="line">安全补丁程序级别。</span><br><span class="line"></span><br><span class="line">device.<span class="property">codename</span></span><br><span class="line">开发代号，例如发行版是<span class="string">&quot;REL&quot;</span>。</span><br><span class="line"></span><br><span class="line">device.<span class="title function_">getIMEI</span>()</span><br><span class="line">返回设备的<span class="variable constant_">IMEI</span>.</span><br><span class="line"></span><br><span class="line">device.<span class="title function_">getAndroidId</span>()</span><br><span class="line">返回设备的<span class="title class_">Android</span> <span class="variable constant_">ID</span>。</span><br><span class="line"><span class="title class_">Android</span> <span class="variable constant_">ID</span>为一个用<span class="number">16</span>进制字符串表示的<span class="number">64</span>位整数，在设备第一次使用时随机生成，之后不会更改，除非恢复出厂设置。</span><br><span class="line"></span><br><span class="line">device.<span class="title function_">getMacAddress</span>()</span><br><span class="line">返回设备的<span class="title class_">Mac</span>地址。该函数需要在有<span class="variable constant_">WLAN</span>连接的情况下才能获取，否则会返回<span class="literal">null</span>。</span><br><span class="line">可能的后续修改：未来可能增加有root权限的情况下通过root权限获取，从而在没有<span class="variable constant_">WLAN</span>连接的情况下也能返回正确的<span class="title class_">Mac</span>地址，因此请勿使用此函数判断<span class="variable constant_">WLAN</span>连接。</span><br><span class="line"></span><br><span class="line">device.<span class="title function_">getTotalMem</span>()</span><br><span class="line">返回设备内存总量，单位字节(B)。1MB = <span class="number">1024</span> * 1024B。</span><br><span class="line"></span><br><span class="line">device.<span class="title function_">getAvailMem</span>()</span><br><span class="line">返回设备当前可用的内存，单位字节(B)。</span><br><span class="line"></span><br><span class="line">device.<span class="title function_">getBattery</span>()</span><br><span class="line"><span class="number">0.0</span>~<span class="number">100.0</span>的浮点数</span><br><span class="line">返回当前电量百分比。</span><br><span class="line"></span><br><span class="line">device.<span class="title function_">isCharging</span>()</span><br><span class="line">返回设备是否正在充电。</span><br></pre></td></tr></table></figure>

<h3 id="2、获取并改变设备亮度"><a href="#2、获取并改变设备亮度" class="headerlink" title="2、获取并改变设备亮度"></a>2、获取并改变设备亮度</h3><h4 id="device-getBrightness"><a href="#device-getBrightness" class="headerlink" title="device.getBrightness()"></a>device.getBrightness()</h4><p>返回当前的(手动)亮度。</p>
<h4 id="device-getBrightnessMode"><a href="#device-getBrightnessMode" class="headerlink" title="device.getBrightnessMode()"></a>device.getBrightnessMode()</h4><p>返回当前亮度模式，0 为手动亮度，1 为自动亮度。</p>
<h4 id="device-setBrightness-b"><a href="#device-setBrightness-b" class="headerlink" title="device.setBrightness(b)"></a>device.setBrightness(b)</h4><p>b {number} 亮度，</p>
<p>如果当前是自动亮度模式，该函数不会影响屏幕的亮度。</p>
<p>此函数需要”修改系统设置”的权限。如果没有该权限，会抛出 SecurityException 并跳转到权限设置界面。</p>
<h4 id="device-setBrightnessMode-mode"><a href="#device-setBrightnessMode-mode" class="headerlink" title="device.setBrightnessMode(mode)"></a>device.setBrightnessMode(mode)</h4><p>mode {number} 亮度模式，</p>
<p>0 为手动亮度，1 为自动亮度<br>设置当前亮度模式。</p>
<p>此函数需要”修改系统设置”的权限。如果没有该权限，会抛出 SecurityException 并跳转到权限设置界面。</p>
<h2 id="3、获取并改变设备音量"><a href="#3、获取并改变设备音量" class="headerlink" title="3、获取并改变设备音量"></a>3、获取并改变设备音量</h2><h4 id="device-getMusicVolume"><a href="#device-getMusicVolume" class="headerlink" title="device.getMusicVolume()"></a>device.getMusicVolume()</h4><p>返回当前媒体音量。</p>
<h4 id="device-getNotificationVolume"><a href="#device-getNotificationVolume" class="headerlink" title="device.getNotificationVolume()"></a>device.getNotificationVolume()</h4><p>返回当前通知音量。</p>
<h4 id="device-getAlarmVolume"><a href="#device-getAlarmVolume" class="headerlink" title="device.getAlarmVolume()"></a>device.getAlarmVolume()</h4><p>返回当前闹钟音量。</p>
<h4 id="device-getMusicMaxVolume"><a href="#device-getMusicMaxVolume" class="headerlink" title="device.getMusicMaxVolume()"></a>device.getMusicMaxVolume()</h4><p>返回媒体音量的最大值。</p>
<h4 id="device-getNotificationMaxVolume"><a href="#device-getNotificationMaxVolume" class="headerlink" title="device.getNotificationMaxVolume()"></a>device.getNotificationMaxVolume()</h4><p>返回通知音量的最大值。</p>
<h4 id="device-getAlarmMaxVolume"><a href="#device-getAlarmMaxVolume" class="headerlink" title="device.getAlarmMaxVolume()"></a>device.getAlarmMaxVolume()</h4><p>返回闹钟音量的最大值。</p>
<h4 id="device-setMusicVolume-volume"><a href="#device-setMusicVolume-volume" class="headerlink" title="device.setMusicVolume(volume)"></a>device.setMusicVolume(volume)</h4><p>volume {number} 音量</p>
<p>设置当前媒体音量。</p>
<p>此函数需要”修改系统设置”的权限。如果没有该权限，会抛出 SecurityException 并跳转到权限设置界面。</p>
<h4 id="device-setNotificationVolume-volume"><a href="#device-setNotificationVolume-volume" class="headerlink" title="device.setNotificationVolume(volume)"></a>device.setNotificationVolume(volume)</h4><p>volume {number} 音量</p>
<p>设置当前通知音量。</p>
<p>此函数需要”修改系统设置”的权限。如果没有该权限，会抛出 SecurityException 并跳转到权限设置界面。</p>
<h4 id="device-setAlarmVolume-volume"><a href="#device-setAlarmVolume-volume" class="headerlink" title="device.setAlarmVolume(volume)"></a>device.setAlarmVolume(volume)</h4><p>volume {number} 音量</p>
<p>设置当前闹钟音量。</p>
<p>此函数需要”修改系统设置”的权限。如果没有该权限，会抛出 SecurityException 并跳转到权限设置界面。</p>
<h2 id="4、获取并改变设备屏幕状态"><a href="#4、获取并改变设备屏幕状态" class="headerlink" title="4、获取并改变设备屏幕状态"></a>4、获取并改变设备屏幕状态</h2><h3 id="device-isScreenOn"><a href="#device-isScreenOn" class="headerlink" title="device.isScreenOn()"></a>device.isScreenOn()</h3><ul>
<li>返回 {boolean}</li>
</ul>
<p>返回设备屏幕是否是亮着的。如果屏幕亮着，返回<code>true</code>; 否则返回<code>false</code>。</p>
<p>需要注意的是，类似于 vivo xplay 系列的息屏时钟不属于”屏幕亮着”的情况，虽然屏幕确实亮着但只能显示时钟而且不可交互，此时<code>isScreenOn()</code>也会返回<code>false</code>。</p>
<h3 id="device-wakeUp"><a href="#device-wakeUp" class="headerlink" title="device.wakeUp()"></a>device.wakeUp()</h3><p>唤醒设备。包括唤醒设备 CPU、屏幕等。可以用来点亮屏幕。</p>
<h3 id="device-wakeUpIfNeeded"><a href="#device-wakeUpIfNeeded" class="headerlink" title="device.wakeUpIfNeeded()"></a>device.wakeUpIfNeeded()</h3><p>如果屏幕没有点亮，则唤醒设备。</p>
<h3 id="device-keepScreenOn-timeout"><a href="#device-keepScreenOn-timeout" class="headerlink" title="device.keepScreenOn([timeout])"></a>device.keepScreenOn([timeout])</h3><ul>
<li><code>timeout</code> {number} 屏幕保持常亮的时间, 单位毫秒。如果不加此参数，则一直保持屏幕常亮。</li>
</ul>
<p>保持屏幕常亮。</p>
<p>此函数无法阻止用户使用锁屏键等正常关闭屏幕，只能使得设备在无人操作的情况下保持屏幕常亮；</p>
<p>同时，如果此函数调用时屏幕没有点亮，则会唤醒屏幕。</p>
<p>在某些设备上，如果不加参数 timeout，只能在 Auto.js 的界面保持屏幕常亮，在其他界面会自动失效，这是因为设备的省电策略造成的。因此，建议使用比较长的时长来代替”一直保持屏幕常亮”的功能，例如<code>device.keepScreenOn(3600 * 1000)</code>。</p>
<p>可以使用<code>device.cancelKeepingAwake()</code>来取消屏幕常亮。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//一直保持屏幕常亮</span><br><span class="line">device.keepScreenOn()</span><br></pre></td></tr></table></figure>

<h3 id="device-keepScreenDim-timeout"><a href="#device-keepScreenDim-timeout" class="headerlink" title="device.keepScreenDim([timeout])"></a>device.keepScreenDim([timeout])</h3><ul>
<li><code>timeout</code> {number} 屏幕保持常亮的时间, 单位毫秒。如果不加此参数，则一直保持屏幕常亮。</li>
</ul>
<p>保持屏幕常亮，但允许屏幕变暗来节省电量。</p>
<p>此函数可以用于定时脚本唤醒屏幕操作，不需要用户观看屏幕，可以让屏幕变暗来节省电量。</p>
<p>此函数无法阻止用户使用锁屏键等正常关闭屏幕，只能使得设备在无人操作的情况下保持屏幕常亮；</p>
<p>同时，如果此函数调用时屏幕没有点亮，则会唤醒屏幕。</p>
<p>可以使用<code>device.cancelKeepingAwake()</code>来取消屏幕常亮。</p>
<h3 id="device-cancelKeepingAwake"><a href="#device-cancelKeepingAwake" class="headerlink" title="device.cancelKeepingAwake()"></a>device.cancelKeepingAwake()</h3><p>取消设备保持唤醒状态。</p>
<p>用于取消<code>device.keepScreenOn()</code>, <code>device.keepScreenDim()</code>等函数设置的屏幕常亮。</p>
<h2 id="5、设置设备震动状态"><a href="#5、设置设备震动状态" class="headerlink" title="5、设置设备震动状态"></a>5、设置设备震动状态</h2><h3 id="device-vibrate-millis"><a href="#device-vibrate-millis" class="headerlink" title="device.vibrate(millis)"></a>device.vibrate(millis)</h3><ul>
<li><code>millis</code> {number} 震动时间，单位毫秒</li>
</ul>
<p>使设备震动一段时间。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//震动两秒</span><br><span class="line">device.vibrate(2000);</span><br></pre></td></tr></table></figure>

<h3 id="device-cancelVibration"><a href="#device-cancelVibration" class="headerlink" title="device.cancelVibration()"></a>device.cancelVibration()</h3><p>如果设备处于震动状态，则取消震动。</p>
<h2 id="对话框-Dialogs"><a href="#对话框-Dialogs" class="headerlink" title="对话框 - Dialogs"></a>对话框 - Dialogs</h2><h2 id="1、对话框中的回调和-Promise"><a href="#1、对话框中的回调和-Promise" class="headerlink" title="1、对话框中的回调和 Promise"></a>1、对话框中的回调和 Promise</h2><h3 id="alert（str）"><a href="#alert（str）" class="headerlink" title="alert（str）"></a>alert（str）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert（<span class="string">&quot;hello&quot;</span>）</span><br></pre></td></tr></table></figure>

<h3 id="confirm（str）"><a href="#confirm（str）" class="headerlink" title="confirm（str）"></a>confirm（str）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> clear = <span class="title function_">confirm</span>(<span class="string">&quot;要清除所有缓存吗?&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (clear) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;清除成功!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;ui&quot;</span>;</span><br><span class="line"><span class="comment">//回调的形式</span></span><br><span class="line"><span class="title function_">confirm</span>(<span class="string">&quot;你确定吗？&quot;</span>, <span class="string">&quot;这里是要写的内容&quot;</span>, <span class="keyword">function</span> (<span class="params">bool</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (bool) &#123;</span><br><span class="line">    <span class="title function_">toast</span>(<span class="string">&quot;你点击了确定&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">toast</span>(<span class="string">&quot;你点击了取消&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Promise形式</span></span><br><span class="line"><span class="title function_">confirm</span>(<span class="string">&quot;要清除所有缓存吗?&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">clear</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (clear) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;清除成功!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="2、对话框：alert-和-confirm"><a href="#2、对话框：alert-和-confirm" class="headerlink" title="2、对话框：alert 和 confirm"></a>2、对话框：alert 和 confirm</h2><h3 id="dialogs-alert-title-content-callback"><a href="#dialogs-alert-title-content-callback" class="headerlink" title="dialogs.alert(title[, content, callback])"></a>dialogs.alert(title[, content, callback])</h3><ul>
<li><code>title</code> {string} 对话框的标题。</li>
<li><code>content</code> {string} 可选，对话框的内容。默认为空。</li>
<li><code>callback</code> {Function} 回调函数，可选。当用户点击确定时被调用,一般用于 ui 模式。</li>
</ul>
<p>显示一个只包含“确定”按钮的提示对话框。直至用户点击确定脚本才继续运行。</p>
<p>该函数也可以作为全局函数使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(&quot;出现错误~&quot;, &quot;出现未知错误，请联系脚本作者”);</span><br></pre></td></tr></table></figure>

<p>在 ui 模式下该函数返回一个<code>Promise</code>。例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;ui&quot;;</span><br><span class="line"></span><br><span class="line">alert(&quot;嘿嘿嘿&quot;).then(()=&gt;&#123;</span><br><span class="line">    //当点击确定后会执行这里</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="dialogs-confirm-title-content-callback"><a href="#dialogs-confirm-title-content-callback" class="headerlink" title="dialogs.confirm(title[, content, callback])"></a>dialogs.confirm(title[, content, callback])</h3><ul>
<li><code>title</code> {string} 对话框的标题。</li>
<li><code>content</code> {string} 可选，对话框的内容。默认为空。</li>
<li><code>callback</code> {Function} 回调函数，可选。当用户点击确定时被调用,一般用于 ui 模式。</li>
</ul>
<p>显示一个包含“确定”和“取消”按钮的提示对话框。如果用户点击“确定”则返回 <code>true</code> ，否则返回 <code>false</code> 。</p>
<p>该函数也可以作为全局函数使用。</p>
<p>在 ui 模式下该函数返回一个<code>Promise</code>。例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;ui&quot;;</span><br><span class="line">confirm(&quot;确定吗&quot;).then(value=&gt;&#123;</span><br><span class="line">    //当点击确定后会执行这里, value为true或false, 表示点击&quot;确定&quot;或&quot;取消&quot;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="3、对话框：rawInput-和-input"><a href="#3、对话框：rawInput-和-input" class="headerlink" title="3、对话框：rawInput 和 input"></a>3、对话框：rawInput 和 input</h2><h3 id="dialogs-rawInput-title-prefill-callback"><a href="#dialogs-rawInput-title-prefill-callback" class="headerlink" title="dialogs.rawInput(title[, prefill, callback])"></a>dialogs.rawInput(title[, prefill, callback])</h3><ul>
<li><code>title</code> {string} 对话框的标题。</li>
<li><code>prefill</code> {string} 输入框的初始内容，可选，默认为空。</li>
<li><code>callback</code> {Function} 回调函数，可选。当用户点击确定时被调用,一般用于 ui 模式。</li>
</ul>
<p>显示一个包含输入框的对话框，等待用户输入内容，并在用户点击确定时将输入的字符串返回。如果用户取消了输入，返回 null。</p>
<p>该函数也可以作为全局函数使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var name = rawInput(&quot;请输入您的名字&quot;, &quot;小明&quot;);</span><br><span class="line">alert(&quot;您的名字是&quot; + name);</span><br></pre></td></tr></table></figure>

<p>在 ui 模式下该函数返回一个<code>Promise</code>。例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;ui&quot;;</span><br><span class="line">rawInput(&quot;请输入您的名字&quot;, &quot;小明&quot;).then(name =&gt; &#123;</span><br><span class="line">    alert(&quot;您的名字是&quot; + name);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>当然也可以使用回调函数，例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rawInput(&quot;请输入您的名字&quot;, &quot;小明&quot;, name =&gt; &#123;</span><br><span class="line">     alert(&quot;您的名字是&quot; + name);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="dialogs-input-title-prefill-callback"><a href="#dialogs-input-title-prefill-callback" class="headerlink" title="dialogs.input(title[, prefill, callback])"></a>dialogs.input(title[, prefill, callback])</h3><p>等效于 <code>eval(dialogs.rawInput(title, prefill, callback))</code>, 该函数和 rawInput 的区别在于，会把输入的字符串用 eval 计算一遍再返回，返回的可能不是字符串。</p>
<p>可以用该函数输入数字、数组等。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var age = dialogs.input(&quot;请输入您的年龄&quot;, &quot;18&quot;);</span><br><span class="line"></span><br><span class="line">// new Date().getYear() + 1900 可获取当前年份</span><br><span class="line"></span><br><span class="line">var year = new Date().getYear() + 1900 - age;</span><br><span class="line"></span><br><span class="line">alert(&quot;您的出生年份是&quot; + year);</span><br></pre></td></tr></table></figure>

<p>在 ui 模式下该函数返回一个<code>Promise</code>。例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;ui&quot;;</span><br><span class="line">dialogs.input(&quot;请输入您的年龄&quot;, &quot;18&quot;).then(age =&gt; &#123;</span><br><span class="line">    var year = new Date().getYear() + 1900 - age;</span><br><span class="line">    alert(&quot;您的出生年份是&quot; + year);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="4、对话框：选项列表"><a href="#4、对话框：选项列表" class="headerlink" title="4、对话框：选项列表"></a>4、对话框：选项列表</h2><h3 id="dialogs-select-title-items-callback"><a href="#dialogs-select-title-items-callback" class="headerlink" title="dialogs.select(title, items, callback)"></a>dialogs.select(title, items, callback)</h3><ul>
<li><code>title</code> {string} 对话框的标题。</li>
<li><code>items</code> {Array} 对话框的选项列表，是一个字符串数组。</li>
<li><code>callback</code> {Function} 回调函数，可选。当用户点击确定时被调用,一般用于 ui 模式。</li>
</ul>
<p>显示一个带有选项列表的对话框，等待用户选择，返回用户选择的选项索引(0 ~ item.length - 1)。如果用户取消了选择，返回-1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> options = [<span class="string">&quot;选项A&quot;</span>, <span class="string">&quot;选项B&quot;</span>, <span class="string">&quot;选项C&quot;</span>, <span class="string">&quot;选项D&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = dialogs.<span class="title function_">select</span>(<span class="string">&quot;请选择一个选项&quot;</span>, options);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="title function_">toast</span>(<span class="string">&quot;您选择的是&quot;</span> + options[i]);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="title function_">toast</span>(<span class="string">&quot;您取消了选择&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 ui 模式下该函数返回一个<code>Promise</code>。例如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;ui&quot;</span>;</span><br><span class="line"></span><br><span class="line">dialogs</span><br><span class="line">  .<span class="title function_">select</span>(<span class="string">&quot;请选择一个选项&quot;</span>, [<span class="string">&quot;选项A&quot;</span>, <span class="string">&quot;选项B&quot;</span>, <span class="string">&quot;选项C&quot;</span>, <span class="string">&quot;选项D&quot;</span>])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">toast</span>(i);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="5、对话框：单选和多选"><a href="#5、对话框：单选和多选" class="headerlink" title="5、对话框：单选和多选"></a>5、对话框：单选和多选</h2><h3 id="dialogs-singleChoice-title-items-index-callback"><a href="#dialogs-singleChoice-title-items-index-callback" class="headerlink" title="dialogs.singleChoice(title, items[, index, callback])"></a>dialogs.singleChoice(title, items[, index, callback])</h3><ul>
<li><code>title</code> {string} 对话框的标题。</li>
<li><code>items</code> {Array} 对话框的选项列表，是一个字符串数组。</li>
<li><code>index</code> {number} 对话框的初始选项的位置，默认为 0。</li>
<li><code>callback</code> {Function} 回调函数，可选。当用户点击确定时被调用,一般用于 ui 模式。</li>
</ul>
<p>显示一个单选列表对话框，等待用户选择，返回用户选择的选项索引(0 ~ item.length - 1)。如果用户取消了选择，返回-1。</p>
<h3 id="dialogs-multiChoice-title-items-indices-callback"><a href="#dialogs-multiChoice-title-items-indices-callback" class="headerlink" title="dialogs.multiChoice(title, items[, indices, callback])"></a>dialogs.multiChoice(title, items[, indices, callback])</h3><ul>
<li><code>title</code> {string} 对话框的标题。</li>
<li><code>items</code> {Array} 对话框的选项列表，是一个字符串数组。</li>
<li><code>indices</code> {Array} 选项列表中初始选中的项目索引的数组，默认为空数组。</li>
<li><code>callback</code> {Function} 回调函数，可选。当用户点击确定时被调用,一般用于 ui 模式。</li>
</ul>
<p>显示一个多选列表对话框，等待用户选择，返回用户选择的选项索引的数组。如果用户取消了选择，返回<code>[]</code>。</p>
<p>在 ui 模式下该函数返回一个<code>Promise</code>。</p>
<h2 id="对话框-Dialogs-1"><a href="#对话框-Dialogs-1" class="headerlink" title="对话框 - Dialogs"></a>对话框 - Dialogs</h2><p>主讲：<strong>阿涛 QQ/微信：656206105</strong></p>
<p><strong>微信公众号：立体空间</strong></p>
<p><img src="dyh.jpg"></p>
<h2 id="6、对话框：自定义对话框"><a href="#6、对话框：自定义对话框" class="headerlink" title="6、对话框：自定义对话框"></a>6、对话框：自定义对话框</h2><h3 id="dialogs-build-properties"><a href="#dialogs-build-properties" class="headerlink" title="dialogs.build(properties)"></a>dialogs.build(properties)</h3><ul>
<li><code>properties</code> {Object} 对话框属性，用于配置对话框。</li>
<li>返回 {Dialog}</li>
</ul>
<p>创建一个可自定义的对话框，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">dialogs.build(&#123;</span><br><span class="line">    //对话框标题</span><br><span class="line">    title: &quot;发现新版本&quot;,</span><br><span class="line">    //对话框内容</span><br><span class="line">    content: &quot;更新日志: 新增了若干了BUG&quot;,</span><br><span class="line">    //确定键内容</span><br><span class="line">    positive: &quot;下载&quot;,</span><br><span class="line">    //取消键内容</span><br><span class="line">    negative: &quot;取消&quot;,</span><br><span class="line">    //中性键内容</span><br><span class="line">    neutral: &quot;到浏览器下载&quot;,</span><br><span class="line">    //勾选框内容</span><br><span class="line">    checkBoxPrompt: &quot;不再提示&quot;</span><br><span class="line">&#125;).show()</span><br></pre></td></tr></table></figure>

<p>选项 properties 可供配置的项目为:</p>
<ul>
<li><p><code>title</code> {string} 对话框标题</p>
</li>
<li><p><code>titleColor</code> {string} | {number} 对话框标题的颜色</p>
</li>
<li><p><code>buttonRippleColor</code> {string} | {number} 对话框按钮的波纹效果颜色</p>
</li>
<li><p><code>icon</code> {string} | {Image} 对话框的图标，是一个 URL 或者图片对象</p>
</li>
<li><p><code>content</code> {string} 对话框文字内容</p>
</li>
<li><p><code>contentColor</code>{string} | {number} 对话框文字内容的颜色</p>
</li>
<li><p><code>contentLineSpacing</code>{number} 对话框文字内容的行高倍数，1.0 为一倍行高</p>
</li>
<li><p><code>items</code> {Array} 对话框列表的选项</p>
</li>
<li><p><code>itemsColor</code> {string} | {number} 对话框列表的选项的文字颜色</p>
</li>
<li><p>```<br>itemsSelectMode</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  &#123;string&#125; 对话框列表的选项选择模式，可以为:</span><br><span class="line"></span><br><span class="line">  - `select` 普通选择模式</span><br><span class="line">  - `single` 单选模式</span><br><span class="line">  - `multi` 多选模式</span><br><span class="line"></span><br><span class="line">- `itemsSelectedIndex` &#123;number&#125; | &#123;Array&#125; 对话框列表中预先选中的项目索引，如果是单选模式为一个索引；多选模式则为数组</span><br><span class="line"></span><br><span class="line">- `positive` &#123;string&#125; 对话框确定按钮的文字内容(最右边按钮)</span><br><span class="line"></span><br><span class="line">- `positiveColor` &#123;string&#125; | &#123;number&#125; 对话框确定按钮的文字颜色(最右边按钮)</span><br><span class="line"></span><br><span class="line">- `neutral` &#123;string&#125; 对话框中立按钮的文字内容(最左边按钮)</span><br><span class="line"></span><br><span class="line">- `neutralColor` &#123;string&#125; | &#123;number&#125; 对话框中立按钮的文字颜色(最左边按钮)</span><br><span class="line"></span><br><span class="line">- `negative` &#123;string&#125; 对话框取消按钮的文字内容(确定按钮左边的按钮)</span><br><span class="line"></span><br><span class="line">- `negativeColor` &#123;string&#125; | &#123;number&#125; 对话框取消按钮的文字颜色(确定按钮左边的按钮)</span><br><span class="line"></span><br><span class="line">- `checkBoxPrompt` &#123;string&#125; 勾选框文字内容</span><br><span class="line"></span><br><span class="line">- `checkBoxChecked` &#123;boolean&#125; 勾选框是否勾选</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  progress</span><br></pre></td></tr></table></figure>

<p>{Object} 配置对话框进度条的对象：</p>
<ul>
<li><code>max</code> {number} 进度条的最大值，如果为-1 则为无限循环的进度条</li>
<li><code>horizontal</code> {boolean} 如果为 true, 则对话框无限循环的进度条为水平进度条</li>
<li><code>showMinMax</code> {boolean} 是否显示进度条的最大值和最小值</li>
</ul>
</li>
<li><p><code>cancelable</code> {boolean} 对话框是否可取消，如果为 false，则对话框只能用代码手动取消</p>
</li>
<li><p><code>canceledOnTouchOutside</code> {boolean} 对话框是否在点击对话框以外区域时自动取消，默认为 true</p>
</li>
<li><p><code>inputHint</code> {string} 对话框的输入框的输入提示</p>
</li>
<li><p><code>inputPrefill</code> {string} 对话框输入框的默认输入内容</p>
</li>
</ul>
<p>通过这些选项可以自定义一个对话框，并通过监听返回的 Dialog 对象的按键、输入事件来实现交互。</p>
<h2 id="7、对话框事件：显示和消失事件"><a href="#7、对话框事件：显示和消失事件" class="headerlink" title="7、对话框事件：显示和消失事件"></a>7、对话框事件：显示和消失事件</h2><h3 id="事件-show"><a href="#事件-show" class="headerlink" title="事件: show"></a>事件: show</h3><ul>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>对话框显示时会触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dialogs.build(&#123;</span><br><span class="line">    title: &quot;标题&quot;</span><br><span class="line">&#125;).on(&quot;show&quot;, (dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;对话框显示了&quot;);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h3 id="事件-dismiss"><a href="#事件-dismiss" class="headerlink" title="事件: dismiss"></a>事件: dismiss</h3><ul>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>对话框消失时会触发的事件。对话框被取消或者手动调用<code>dialog.dismiss()</code>函数都会触发该事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var d = dialogs.build(&#123;</span><br><span class="line">    title: &quot;标题&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;</span><br><span class="line">&#125;).on(&quot;dismiss&quot;, (dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;对话框消失了&quot;);</span><br><span class="line">&#125;).show();</span><br><span class="line"></span><br><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">    d.dismiss();</span><br><span class="line">&#125;, 5000);</span><br></pre></td></tr></table></figure>

<h2 id="8、对话框事件：按钮事件"><a href="#8、对话框事件：按钮事件" class="headerlink" title="8、对话框事件：按钮事件"></a>8、对话框事件：按钮事件</h2><h3 id="事件-positive"><a href="#事件-positive" class="headerlink" title="事件: positive"></a>事件: positive</h3><ul>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>确定按钮按下时触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var d = dialogs.build(&#123;</span><br><span class="line">    title: &quot;标题&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;</span><br><span class="line">&#125;).on(&quot;positive&quot;, (dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;你点击了确定&quot;);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h3 id="事件-negative"><a href="#事件-negative" class="headerlink" title="事件: negative"></a>事件: negative</h3><ul>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>取消按钮按下时触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var d = dialogs.build(&#123;</span><br><span class="line">    title: &quot;标题&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;</span><br><span class="line">&#125;).on(&quot;negative&quot;, (dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;你点击了取消&quot;);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h3 id="事件-cancel"><a href="#事件-cancel" class="headerlink" title="事件: cancel"></a>事件: cancel</h3><ul>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>对话框被取消时会触发的事件。一个对话框可能按取消按钮、返回键取消或者点击对话框以外区域取消。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dialogs.build(&#123;</span><br><span class="line">    title: &quot;标题&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;</span><br><span class="line">&#125;).on(&quot;cancel&quot;, (dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;对话框取消了&quot;);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h3 id="事件-neutral"><a href="#事件-neutral" class="headerlink" title="事件: neutral"></a>事件: neutral</h3><ul>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>中性按钮按下时触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var d = dialogs.build(&#123;</span><br><span class="line">    title: &quot;标题&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;,</span><br><span class="line">    neutral: &quot;稍后提示&quot;</span><br><span class="line">&#125;).on(&quot;positive&quot;, (dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;你点击了稍后提示&quot;);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h3 id="事件-any"><a href="#事件-any" class="headerlink" title="事件: any"></a>事件: any</h3><ul>
<li><code>dialog</code> {Dialog} 对话框</li>
<li>action {string} 被点击的按钮，可能的值为:<ul>
<li><code>positive</code> 确定按钮</li>
<li><code>negative</code> 取消按钮</li>
<li><code>neutral</code> 中性按钮</li>
</ul>
</li>
</ul>
<p>任意按钮按下时触发的事件。例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var d = dialogs.build(&#123;</span><br><span class="line">    title: &quot;标题&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;,</span><br><span class="line">    neutral: &quot;稍后提示&quot;</span><br><span class="line">&#125;).on(&quot;any&quot;, (action, dialog)=&gt;&#123;</span><br><span class="line">    if(action == &quot;positive&quot;)&#123;</span><br><span class="line">        toast(&quot;你点击了确定&quot;);</span><br><span class="line">    &#125;else if(action == &quot;negative&quot;)&#123;</span><br><span class="line">        toast(&quot;你点击了取消&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h2 id="9、对话框事件：单选多选事件"><a href="#9、对话框事件：单选多选事件" class="headerlink" title="9、对话框事件：单选多选事件"></a>9、对话框事件：单选多选事件</h2><h3 id="事件-item-select"><a href="#事件-item-select" class="headerlink" title="事件: item_select"></a>事件: item_select</h3><ul>
<li><code>index</code> {number} 被选中的项目索引，从 0 开始</li>
<li><code>item</code> {Object} 被选中的项目</li>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>对话框列表(itemsSelectMode 为”select”)的项目被点击选中时触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var d = dialogs.build(&#123;</span><br><span class="line">    title: &quot;请选择&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;,</span><br><span class="line">    items: [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;],</span><br><span class="line">    itemsSelectMode: &quot;select&quot;</span><br><span class="line">&#125;).on(&quot;item_select&quot;, (index, item, dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;您选择的是第&quot; + (index + 1) + &quot;项, 选项为&quot; + item);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h3 id="事件-single-choice"><a href="#事件-single-choice" class="headerlink" title="事件: single_choice"></a>事件: single_choice</h3><ul>
<li><code>index</code> {number} 被选中的项目索引，从 0 开始</li>
<li><code>item</code> {Object} 被选中的项目</li>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>对话框单选列表(itemsSelectMode 为”singleChoice”)的项目被选中并点击确定时触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dialogs.build(&#123;</span><br><span class="line">    title: &#x27;这是选择框事件&#x27;,</span><br><span class="line">    items: [&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;,&#x27;D&#x27;],</span><br><span class="line">    itemsSelectMode: &#x27;single&#x27;,</span><br><span class="line">    itemsSelectedIndex: 0,</span><br><span class="line">    positive: &#x27;确定&#x27;</span><br><span class="line">&#125;).on(&#x27;single_choice&#x27;,function(index,item,dialog)&#123;</span><br><span class="line"></span><br><span class="line">    toastLog(index+&quot;----&quot;+item)</span><br><span class="line">    // 3----D</span><br><span class="line"></span><br><span class="line">    toastLog(&quot;你选择的是第&quot;+(index+1).toString()+&quot;个选项：&quot;+item)</span><br><span class="line">&#125;).show()</span><br></pre></td></tr></table></figure>

<h3 id="事件-multi-choice-【失效】"><a href="#事件-multi-choice-【失效】" class="headerlink" title="事件: multi_choice 【失效】"></a>事件: multi_choice 【失效】</h3><ul>
<li><code>indices</code> {Array} 被选中的项目的索引的数组</li>
<li><code>items</code> {Array} 被选中的项目的数组</li>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>对话框多选列表(itemsSelectMode 为”multiChoice”)的项目被选中并点击确定时触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var d = dialogs.build(&#123;</span><br><span class="line">    title: &quot;请选择&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;,</span><br><span class="line">    items: [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;],</span><br><span class="line">    itemsSelectMode: &quot;multiChoice&quot;</span><br><span class="line">&#125;).on(&quot;item_select&quot;, (indices, items, dialog)=&gt;&#123;</span><br><span class="line">    toast(util.format(&quot;您选择的项目为%o, 选项为%o&quot;, indices, items);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h2 id="10、对话框事件：输入事件"><a href="#10、对话框事件：输入事件" class="headerlink" title="10、对话框事件：输入事件"></a>10、对话框事件：输入事件</h2><h3 id="事件-input"><a href="#事件-input" class="headerlink" title="事件: input"></a>事件: input</h3><ul>
<li><code>text</code> {string} 输入框的内容</li>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>带有输入框的对话框当点击确定时会触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dialogs.build(&#123;</span><br><span class="line">    title: &quot;请输入&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;,</span><br><span class="line">    inputPrefill: &quot;&quot;</span><br><span class="line">&#125;).on(&quot;input&quot;, (text, dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;你输入的是&quot; + text);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h3 id="事件-input-change"><a href="#事件-input-change" class="headerlink" title="事件: input_change"></a>事件: input_change</h3><ul>
<li><code>text</code> {string} 输入框的内容</li>
<li><code>dialog</code> {Dialog} 对话框</li>
</ul>
<p>对话框的输入框的文本发生变化时会触发的事件。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dialogs.build(&#123;</span><br><span class="line">    title: &quot;请输入&quot;,</span><br><span class="line">    positive: &quot;确定&quot;,</span><br><span class="line">    negative: &quot;取消&quot;,</span><br><span class="line">    inputPrefill: &quot;&quot;</span><br><span class="line">&#125;).on(&quot;input_change&quot;, (text, dialog)=&gt;&#123;</span><br><span class="line">    toast(&quot;你输入的是&quot; + text);</span><br><span class="line">&#125;).show();</span><br></pre></td></tr></table></figure>

<h2 id="11、对话框对象方法"><a href="#11、对话框对象方法" class="headerlink" title="11、对话框对象方法"></a>11、对话框对象方法</h2><h3 id="dialog-getProgress"><a href="#dialog-getProgress" class="headerlink" title="dialog.getProgress()"></a>dialog.getProgress()</h3><ul>
<li>返回 {number}</li>
</ul>
<p>获取当前进度条的进度值，是一个整数</p>
<h3 id="dialog-getMaxProgress"><a href="#dialog-getMaxProgress" class="headerlink" title="dialog.getMaxProgress()"></a>dialog.getMaxProgress()</h3><ul>
<li>返回 {number}</li>
</ul>
<p>获取当前进度条的最大进度值，是一个整数</p>
<h3 id="dialog-getActionButton-action"><a href="#dialog-getActionButton-action" class="headerlink" title="dialog.getActionButton(action)"></a>dialog.getActionButton(action)</h3><p>action {string} 动作，包括:</p>
<ul>
<li><code>positive</code></li>
<li><code>negative</code></li>
<li><code>neutral</code></li>
</ul>
<h2 id="事件与监听-Events"><a href="#事件与监听-Events" class="headerlink" title="事件与监听 - Events"></a>事件与监听 - Events</h2><h2 id="1、什么是事件与监听"><a href="#1、什么是事件与监听" class="headerlink" title="1、什么是事件与监听"></a>1、什么是事件与监听</h2><p>events 模块提供了监听手机通知、按键、触摸的接口。您可以用他配合自动操作函数完成自动化工作。</p>
<p>events 本身是一个 EventEmiiter, 但内置了一些事件、包括按键事件、通知事件、Toast 事件等。</p>
<p>需要注意的是，事件的处理是单线程的，并且仍然在原线程执行，如果脚本主体或者其他事件处理中有耗时操作、轮询等，则事件将无法得到及时处理（会进入事件队列等待脚本主体或其他事件处理完成才执行）。例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">auto();</span><br><span class="line"></span><br><span class="line">//启用按键监听</span><br><span class="line">events.observeKey();</span><br><span class="line">//监听音量上键按下</span><br><span class="line">events.onKeyDown(&quot;volume_up&quot;, function(event)&#123;</span><br><span class="line">	//这里不会被执行</span><br><span class="line">    toast(&quot;音量上键被按下了&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">while(true)&#123;</span><br><span class="line">    //死循环</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2、监听按键事件"><a href="#2、监听按键事件" class="headerlink" title="2、监听按键事件"></a>2、监听按键事件</h2><h3 id="events-observeKey"><a href="#events-observeKey" class="headerlink" title="events.observeKey()"></a>events.observeKey()</h3><p>启用按键监听，例如音量键、Home 键。按键监听使用无障碍服务实现，如果无障碍服务未启用会抛出异常并提示开启。</p>
<p>只有这个函数成功执行后, <code>onKeyDown</code>, <code>onKeyUp</code>等按键事件的监听才有效。</p>
<p>该函数在安卓 4.3 以上才能使用。</p>
<h3 id="events-onKeyDown-keyName-listener"><a href="#events-onKeyDown-keyName-listener" class="headerlink" title="events.onKeyDown(keyName, listener)"></a>events.onKeyDown(keyName, listener)</h3><ul>
<li><code>keyName</code> {string} 要监听的按键名称</li>
<li><code>listener</code> {Function} 按键监听器。参数为一个 KeyEvent</li>
</ul>
<p>注册一个按键监听函数，当有 keyName 对应的按键被按下会调用该函数。</p>
<p>按键事件中所有可用的按键名称为：</p>
<ul>
<li><code>volume_up</code> 音量上键</li>
<li><code>volume_down</code> 音量下键</li>
<li><code>home</code> 主屏幕键</li>
<li><code>back</code> 返回键</li>
<li><code>menu</code> 菜单键</li>
</ul>
<p>例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//启用按键监听</span><br><span class="line">events.observeKey();</span><br><span class="line">//监听音量上键按下</span><br><span class="line">events.onKeyDown(&quot;volume_up&quot;, function(event)&#123;</span><br><span class="line">    toast(&quot;音量上键被按下了&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">//监听菜单键按下</span><br><span class="line">events.onKeyDown(&quot;menu&quot;, function(event)&#123;</span><br><span class="line">    toast(&quot;菜单键被按下了&quot;);</span><br><span class="line">    exit();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="events-onKeyUp-keyName-listener"><a href="#events-onKeyUp-keyName-listener" class="headerlink" title="events.onKeyUp(keyName, listener)"></a>events.onKeyUp(keyName, listener)</h3><ul>
<li><code>keyName</code> {string} 要监听的按键名称</li>
<li><code>listener</code> {Function} 按键监听器。参数为一个 KeyEvent。</li>
</ul>
<p>注册一个按键监听函数，当有 keyName 对应的按键弹起会调用该函数。</p>
<p>按键事件中所有可用的按键名称为：</p>
<ul>
<li><code>volume_up</code> 音量上键</li>
<li><code>volume_down</code> 音量下键</li>
<li><code>home</code> 主屏幕键</li>
<li><code>back</code> 返回键</li>
<li><code>menu</code> 菜单键</li>
</ul>
<p>一次完整的按键动作包括了按键按下和弹起。按下事件会在手指按下一个按键的”瞬间”触发, 弹起事件则在手指放开这个按键时触发。</p>
<p>例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//启用按键监听</span><br><span class="line">events.observeKey();</span><br><span class="line">//监听音量下键弹起</span><br><span class="line">events.onKeyDown(&quot;volume_down&quot;, function(event)&#123;</span><br><span class="line">    toast(&quot;音量上键弹起&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">//监听Home键弹起</span><br><span class="line">events.onKeyDown(&quot;home&quot;, function(event)&#123;</span><br><span class="line">    toast(&quot;Home键弹起&quot;);</span><br><span class="line">    exit();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="3、KeyEvent-对象方法"><a href="#3、KeyEvent-对象方法" class="headerlink" title="3、KeyEvent 对象方法"></a>3、KeyEvent 对象方法</h2><h3 id="KeyEvent-getAction"><a href="#KeyEvent-getAction" class="headerlink" title="KeyEvent.getAction()"></a>KeyEvent.getAction()</h3><p>返回事件的动作。包括：</p>
<ul>
<li><code>KeyEvent.ACTION_DOWN</code> 按下事件</li>
<li><code>KeyEvent.ACTION_UP</code> 弹起事件</li>
</ul>
<h3 id="KeyEvent-getKeyCode"><a href="#KeyEvent-getKeyCode" class="headerlink" title="KeyEvent.getKeyCode()"></a>KeyEvent.getKeyCode()</h3><p>返回按键的键值。包括：</p>
<ul>
<li><code>KeyEvent.KEYCODE_HOME</code> 主页键</li>
<li><code>KeyEvent.KEYCODE_BACK</code> 返回键</li>
<li><code>KeyEvent.KEYCODE_MENU</code> 菜单键</li>
<li><code>KeyEvent.KEYCODE_VOLUME_UP</code> 音量上键</li>
<li><code>KeyEvent.KEYCODE_VOLUME_DOWN</code> 音量下键</li>
</ul>
<h3 id="KeyEvent-getEventTime"><a href="#KeyEvent-getEventTime" class="headerlink" title="KeyEvent.getEventTime()"></a>KeyEvent.getEventTime()</h3><ul>
<li>返回 {number}</li>
</ul>
<p>返回事件发生的时间戳。</p>
<h3 id="KeyEvent-getDownTime"><a href="#KeyEvent-getDownTime" class="headerlink" title="KeyEvent.getDownTime()"></a>KeyEvent.getDownTime()</h3><p>返回最近一次按下事件的时间戳。如果本身是按下事件，则与<code>getEventTime()</code>相同。</p>
<h3 id="KeyEvent-keyCodeToString-keyCode"><a href="#KeyEvent-keyCodeToString-keyCode" class="headerlink" title="KeyEvent.keyCodeToString(keyCode)"></a>KeyEvent.keyCodeToString(keyCode)</h3><p>把键值转换为字符串。例如 24 转换为”KEYCODE_HOME”。</p>
<h2 id="4、事件：key、key-down、key-up"><a href="#4、事件：key、key-down、key-up" class="headerlink" title="4、事件：key、key_down、key_up"></a>4、事件：key、key_down、key_up</h2><h3 id="事件-‘key’"><a href="#事件-‘key’" class="headerlink" title="事件: ‘key’"></a>事件: ‘key’</h3><ul>
<li><code>keyCode</code> {number} 键值</li>
<li><code>event</code> {KeyEvent} 事件</li>
</ul>
<p>当有按键被按下或弹起时会触发该事件。 例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto();</span><br><span class="line">events.observeKey();</span><br><span class="line">events.on(&quot;key&quot;, function(keyCode, event)&#123;</span><br><span class="line">    //处理按键事件</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>其中监听器的参数 KeyCode 包括：</p>
<ul>
<li><code>keys.home</code> 主页键</li>
<li><code>keys.back</code> 返回键</li>
<li><code>keys.menu</code> 菜单键</li>
<li><code>keys.volume_up</code> 音量上键</li>
<li><code>keys.volume_down</code> 音量下键</li>
</ul>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">auto();</span><br><span class="line">events.observeKey();</span><br><span class="line">events.on(&quot;key&quot;, function(keyCode, event)&#123;</span><br><span class="line">    if(keyCode == keys.menu &amp;&amp; event.getAction() == event.ACTION_UP)&#123;</span><br><span class="line">        toast(&quot;菜单键按下&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="事件-‘key-down’"><a href="#事件-‘key-down’" class="headerlink" title="事件: ‘key_down’"></a>事件: ‘key_down’</h3><ul>
<li><code>keyCode</code> {number} 键值</li>
<li><code>event</code> {KeyEvent} 事件</li>
</ul>
<p>当有按键被按下时会触发该事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto();</span><br><span class="line">events.observeKey();</span><br><span class="line">events.on(&quot;key_down&quot;, function(keyCode, event)&#123;</span><br><span class="line">    //处理按键按下事件</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="事件-‘key-up’"><a href="#事件-‘key-up’" class="headerlink" title="事件: ‘key_up’"></a>事件: ‘key_up’</h3><ul>
<li><code>keyCode</code> {number} 键值</li>
<li><code>event</code> {KeyEvent} 事件</li>
</ul>
<p>当有按键弹起时会触发该事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto();</span><br><span class="line">events.observeKey();</span><br><span class="line">events.on(&quot;key_up&quot;, function(keyCode, event)&#123;</span><br><span class="line">    //处理按键弹起事件</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="5、单次监听按键事件"><a href="#5、单次监听按键事件" class="headerlink" title="5、单次监听按键事件"></a>5、单次监听按键事件</h2><h3 id="events-onceKeyDown-keyName-listener"><a href="#events-onceKeyDown-keyName-listener" class="headerlink" title="events.onceKeyDown(keyName, listener)"></a>events.onceKeyDown(keyName, listener)</h3><ul>
<li><code>keyName</code> {string} 要监听的按键名称</li>
<li><code>listener</code> {Function} 按键监听器。参数为一个 KeyEvent</li>
</ul>
<p>注册一个按键监听函数，当有 keyName 对应的按键被按下时会调用该函数，之后会注销该按键监听器。</p>
<p>也就是 listener 只有在 onceKeyDown 调用后的第一次按键事件被调用一次。</p>
<h3 id="events-onceKeyUp-keyName-listener"><a href="#events-onceKeyUp-keyName-listener" class="headerlink" title="events.onceKeyUp(keyName, listener)"></a>events.onceKeyUp(keyName, listener)</h3><ul>
<li><code>keyName</code> {string} 要监听的按键名称</li>
<li><code>listener</code> {Function} 按键监听器。参数为一个 KeyEvent</li>
</ul>
<p>注册一个按键监听函数，当有 keyName 对应的按键弹起时会调用该函数，之后会注销该按键监听器。</p>
<p>也就是 listener 只有在 onceKeyUp 调用后的第一次按键事件被调用一次。</p>
<h2 id="6、删除按键事件的监听"><a href="#6、删除按键事件的监听" class="headerlink" title="6、删除按键事件的监听"></a>6、删除按键事件的监听</h2><h3 id="events-removeAllKeyDownListeners-keyName"><a href="#events-removeAllKeyDownListeners-keyName" class="headerlink" title="events.removeAllKeyDownListeners(keyName)"></a>events.removeAllKeyDownListeners(keyName)</h3><ul>
<li><code>keyName</code> {string} 按键名称</li>
</ul>
<p>删除该按键的 KeyDown(按下)事件的所有监听。</p>
<h3 id="events-removeAllKeyUpListeners-keyName"><a href="#events-removeAllKeyUpListeners-keyName" class="headerlink" title="events.removeAllKeyUpListeners(keyName)"></a>events.removeAllKeyUpListeners(keyName)</h3><ul>
<li><code>keyName</code> {string} 按键名称</li>
</ul>
<p>删除该按键的 KeyUp(弹起)事件的所有监听。</p>
<h2 id="7、屏蔽原有按键功能"><a href="#7、屏蔽原有按键功能" class="headerlink" title="7、屏蔽原有按键功能"></a>7、屏蔽原有按键功能</h2><h3 id="events-setKeyInterceptionEnabled-key-enabled"><a href="#events-setKeyInterceptionEnabled-key-enabled" class="headerlink" title="events.setKeyInterceptionEnabled([key, ]enabled)"></a>events.setKeyInterceptionEnabled([key, ]enabled)</h3><ul>
<li><code>enabled</code> {boolean}</li>
<li><code>key</code> {string} 要屏蔽的按键</li>
</ul>
<p>设置按键屏蔽是否启用。所谓按键屏蔽指的是，屏蔽原有按键的功能，例如使得音量键不再能调节音量，但此时仍然能通过按键事件监听按键。</p>
<p>如果不加参数 key 则会屏蔽所有按键。</p>
<p>例如，调用<code>events.setKeyInterceptionEnabled(true)</code>会使系统的音量、Home、返回等键不再具有调节音量、回到主页、返回的作用，但此时仍然能通过按键事件监听按键。</p>
<p>该函数通常于按键监听结合，例如想监听音量键并使音量键按下时不弹出音量调节框则为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">events.setKeyInterceptionEnabled(&quot;volume_up&quot;, true);</span><br><span class="line">events.observeKey();</span><br><span class="line">events.onKeyDown(&quot;volume_up&quot;, ()=&gt;&#123;</span><br><span class="line">    log(&quot;音量上键被按下&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>只要有一个脚本屏蔽了某个按键，该按键便会被屏蔽；当脚本退出时，会自动解除所有按键屏蔽。</p>
<h2 id="8、屏幕触摸事件监听（需要-root-权限）"><a href="#8、屏幕触摸事件监听（需要-root-权限）" class="headerlink" title="8、屏幕触摸事件监听（需要 root 权限）"></a>8、屏幕触摸事件监听（需要 root 权限）</h2><h3 id="events-observeTouch"><a href="#events-observeTouch" class="headerlink" title="events.observeTouch()"></a>events.observeTouch()</h3><p>启用屏幕触摸监听。（需要 root 权限）</p>
<p>只有这个函数被成功执行后, 触摸事件的监听才有效。</p>
<p>没有 root 权限调用该函数则什么也不会发生。</p>
<h3 id="events-setTouchEventTimeout-timeout"><a href="#events-setTouchEventTimeout-timeout" class="headerlink" title="events.setTouchEventTimeout(timeout)"></a>events.setTouchEventTimeout(timeout)</h3><ul>
<li><code>timeout</code> {number} 两个触摸事件的最小间隔。单位毫秒。默认为 10 毫秒。如果 number 小于 0，视为 0 处理。</li>
</ul>
<p>设置两个触摸事件分发的最小时间间隔。</p>
<p>例如间隔为 10 毫秒的话，前一个触摸事件发生并被注册的监听器处理后，至少要过 10 毫秒才能分发和处理下一个触摸事件，这 10 毫秒之间的触摸将会被忽略。</p>
<p>建议在满足需要的情况下尽量提高这个间隔。一个简单滑动动作可能会连续触发上百个触摸事件，如果 timeout 设置过低可能造成事件拥堵。强烈建议不要设置 timeout 为 0。</p>
<h3 id="events-getTouchEventTimeout"><a href="#events-getTouchEventTimeout" class="headerlink" title="events.getTouchEventTimeout()"></a>events.getTouchEventTimeout()</h3><p>返回触摸事件的最小时间间隔。</p>
<h3 id="events-onTouch-listener"><a href="#events-onTouch-listener" class="headerlink" title="events.onTouch(listener)"></a>events.onTouch(listener)</h3><ul>
<li><code>listener</code> {Function} 参数为<a target="_blank" rel="noopener" href="https://hyb1996.github.io/AutoJs-Docs/##/images.html?id=images_point">Point</a>的函数</li>
</ul>
<p>注册一个触摸监听函数。相当于<code>on(&quot;touch&quot;, listener)</code>。</p>
<p>例如:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//启用触摸监听</span><br><span class="line">events.observeTouch();</span><br><span class="line">//注册触摸监听器</span><br><span class="line">events.onTouch(function(p)&#123;</span><br><span class="line">    //触摸事件发生时, 打印出触摸的点的坐标</span><br><span class="line">    log(p.x + &quot;, &quot; + p.y);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="events-removeAllTouchListeners"><a href="#events-removeAllTouchListeners" class="headerlink" title="events.removeAllTouchListeners()"></a>events.removeAllTouchListeners()</h3><p>删除所有事件监听函数。</p>
<h2 id="9、通知事件监听：QQ-消息、微信消息、推送等通知"><a href="#9、通知事件监听：QQ-消息、微信消息、推送等通知" class="headerlink" title="9、通知事件监听：QQ 消息、微信消息、推送等通知"></a>9、通知事件监听：QQ 消息、微信消息、推送等通知</h2><h3 id="events-observeNotification"><a href="#events-observeNotification" class="headerlink" title="events.observeNotification()"></a>events.observeNotification()</h3><p>通知监听依赖于通知服务，如果通知服务没有运行，会抛出异常并跳转到通知权限开启界面。（有时即使通知权限已经开启通知服务也没有运行，这时需要关闭权限再重新开启一次）</p>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">events.<span class="title function_">obvereNotification</span>();</span><br><span class="line">events.<span class="title function_">onNotification</span>(<span class="keyword">function</span> (<span class="params">notification</span>) &#123;</span><br><span class="line">  <span class="title function_">log</span>(notification.<span class="title function_">getText</span>());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="事件-‘notification’"><a href="#事件-‘notification’" class="headerlink" title="事件: ‘notification’"></a>事件: ‘notification’</h3><ul>
<li><code>notification</code> Notification 通知对象</li>
</ul>
<p>当有应用发出通知时会触发该事件，参数为 Notification。</p>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">events.<span class="title function_">observeNotification</span>();</span><br><span class="line">events.<span class="title function_">on</span>(<span class="string">&quot;notification&quot;</span>, <span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="title function_">log</span>(</span><br><span class="line">    <span class="string">&quot;收到新通知:\n 标题: %s, 内容: %s, \n包名: %s&quot;</span>,</span><br><span class="line">    n.<span class="title function_">getTitle</span>(),</span><br><span class="line">    n.<span class="title function_">getText</span>(),</span><br><span class="line">    n.<span class="title function_">getPackageName</span>()</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="10、Notification-对象"><a href="#10、Notification-对象" class="headerlink" title="10、Notification 对象"></a>10、Notification 对象</h2><p>通知对象，可以获取通知详情，包括通知标题、内容、发出通知的包名、时间等，也可以对通知进行操作，比如点击、删除。</p>
<h3 id="Notification-number"><a href="#Notification-number" class="headerlink" title="Notification.number"></a>Notification.number</h3><ul>
<li>{number}</li>
</ul>
<p>通知数量。例如 QQ 连续收到两条消息时 number 为 2。</p>
<h3 id="Notification-when"><a href="#Notification-when" class="headerlink" title="Notification.when"></a>Notification.when</h3><ul>
<li>{number}</li>
</ul>
<p>通知发出时间的时间戳，可以用于构造<code>Date</code>对象。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">events.observeNotification();</span><br><span class="line">events.on(&quot;notification&quot;, function(n)&#123;</span><br><span class="line">    log(&quot;通知时间为&#125;&quot; + new Date(n.when));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Notification-getPackageName"><a href="#Notification-getPackageName" class="headerlink" title="Notification.getPackageName()"></a>Notification.getPackageName()</h3><ul>
<li>返回 {string}</li>
</ul>
<p>获取发出通知的应用包名。</p>
<h3 id="Notification-getTitle"><a href="#Notification-getTitle" class="headerlink" title="Notification.getTitle()"></a>Notification.getTitle()</h3><ul>
<li>返回 {string}</li>
</ul>
<p>获取通知的标题。</p>
<h3 id="Notification-getText"><a href="#Notification-getText" class="headerlink" title="Notification.getText()"></a>Notification.getText()</h3><ul>
<li>返回 {string}</li>
</ul>
<p>获取通知的内容。</p>
<h3 id="Notification-click"><a href="#Notification-click" class="headerlink" title="Notification.click()"></a>Notification.click()</h3><p>点击该通知。例如对于一条 QQ 消息，点击会进入具体的聊天界面。</p>
<h3 id="Notification-delete"><a href="#Notification-delete" class="headerlink" title="Notification.delete()"></a>Notification.delete()</h3><p>删除该通知。该通知将从通知栏中消失。</p>
<h2 id="11、toast-事件监听"><a href="#11、toast-事件监听" class="headerlink" title="11、toast 事件监听"></a>11、toast 事件监听</h2><h3 id="events-observeToast"><a href="#events-observeToast" class="headerlink" title="events.observeToast()"></a>events.observeToast()</h3><p>开启 Toast 监听。</p>
<p>Toast 监听依赖于无障碍服务，因此此函数会确保无障碍服务运行。</p>
<h3 id="事件-‘toast’"><a href="#事件-‘toast’" class="headerlink" title="事件: ‘toast’"></a>事件: ‘toast’</h3><ul>
<li><code>getText()</code> 获取 Toast 的文本内容</li>
<li><code>getPackageName()</code> 获取发出 Toast 的应用包名</li>
</ul>
<p>当有应用发出 toast(气泡消息)时会触发该事件。但 Auto.js 软件本身的 toast 除外。</p>
<p>例如，要记录发出所有 toast 的应用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">events.observeToast();</span><br><span class="line">events.onToast(function(toast)&#123;</span><br><span class="line">    log(&quot;Toast内容: &quot; + toast.getText() + &quot; 包名: &quot; + toast.getPackageName());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="12、EventEmitter-对象"><a href="#12、EventEmitter-对象" class="headerlink" title="12、EventEmitter 对象"></a>12、EventEmitter 对象</h2><p><strong>events 本身是一个 EventEmiiter, 但内置了一些事件、包括按键事件、通知事件、Toast 事件等。</strong></p>
<h3 id="events-emitter"><a href="#events-emitter" class="headerlink" title="events.emitter()"></a>events.emitter()</h3><p>返回一个新的 EventEmitter。这个 EventEmitter 没有内置任何事件。</p>
<h2 id="13、EventEmitter-对象：设置监听器数量"><a href="#13、EventEmitter-对象：设置监听器数量" class="headerlink" title="13、EventEmitter 对象：设置监听器数量"></a>13、EventEmitter 对象：设置监听器数量</h2><h3 id="EventEmitter-defaultMaxListeners"><a href="#EventEmitter-defaultMaxListeners" class="headerlink" title="EventEmitter.defaultMaxListeners"></a>EventEmitter.defaultMaxListeners</h3><p>每个事件默认可以注册最多 10 个监听器。 单个 EventEmitter 实例的限制可以使用 emitter.setMaxListeners(n) 方法改变。</p>
<p>所有 EventEmitter 实例的默认值可以使用 EventEmitter.defaultMaxListeners 属性改变。</p>
<p>设置 EventEmitter.defaultMaxListeners 要谨慎，因为会影响所有 EventEmitter 实例，包括之前创建的。 因而，调用 emitter.setMaxListeners(n) 优先于 EventEmitter.defaultMaxListeners。</p>
<p>注意，与 Node.js 不同，<strong>这是一个硬性限制</strong>。 EventEmitter 实例不允许添加更多的监听器，监听器超过最大数量时会抛出 TooManyListenersException。</p>
<h3 id="EventEmitter-getMaxListeners"><a href="#EventEmitter-getMaxListeners" class="headerlink" title="EventEmitter.getMaxListeners()"></a>EventEmitter.getMaxListeners()</h3><p>返回 EventEmitter 当前的最大监听器限制值，该值可以通过 emitter.setMaxListeners(n) 设置或默认为 EventEmitter.defaultMaxListeners。</p>
<h3 id="EventEmitter-setMaxListeners-n"><a href="#EventEmitter-setMaxListeners-n" class="headerlink" title="EventEmitter.setMaxListeners(n)"></a>EventEmitter.setMaxListeners(n)</h3><ul>
<li><code>n</code> {number}</li>
</ul>
<p>默认情况下，如果为特定事件添加了超过 10 个监听器，则 EventEmitter 会打印一个警告。 此限制有助于寻找内存泄露。 但是，并不是所有的事件都要被限为 10 个。 emitter.setMaxListeners() 方法允许修改指定的 EventEmitter 实例的限制。 值设为 Infinity（或 0）表明不限制监听器的数量。</p>
<p>返回一个 EventEmitter 引用，可以链式调用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">emitter.setMaxListeners(emitter.getMaxListeners() + 1);</span><br><span class="line">emitter.once(&#x27;event&#x27;, () =&gt; &#123;</span><br><span class="line">  // 做些操作</span><br><span class="line">  emitter.setMaxListeners(Math.max(emitter.getMaxListeners() - 1, 0));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="14、EventEmitter-对象：添加监听事件"><a href="#14、EventEmitter-对象：添加监听事件" class="headerlink" title="14、EventEmitter 对象：添加监听事件"></a>14、EventEmitter 对象：添加监听事件</h2><h3 id="EventEmitter-addListener-eventName-listener"><a href="#EventEmitter-addListener-eventName-listener" class="headerlink" title="EventEmitter.addListener(eventName, listener)"></a>EventEmitter.addListener(eventName, listener)</h3><ul>
<li><code>eventName</code> {any}</li>
<li><code>listener</code> {Function}</li>
</ul>
<p>emitter.on(eventName, listener) 的别名。</p>
<h3 id="EventEmitter-on-eventName-listener"><a href="#EventEmitter-on-eventName-listener" class="headerlink" title="EventEmitter.on(eventName, listener)"></a>EventEmitter.on(eventName, listener)</h3><ul>
<li><code>eventName</code> {any} 事件名</li>
<li><code>listener</code> {Function} 回调函数</li>
</ul>
<p>添加 listener 函数到名为 eventName 的事件的监听器数组的末尾。 不会检查 listener 是否已被添加。 多次调用并传入相同的 eventName 和 listener 会导致 listener 被添加与调用多次。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.on(&#x27;connection&#x27;, (stream) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;有连接！&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>返回一个 EventEmitter 引用，可以链式调用。</p>
<p>默认情况下，事件监听器会按照添加的顺序依次调用。 emitter.prependListener() 方法可用于将事件监听器添加到监听器数组的开头。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const myEE = events.emitter();</span><br><span class="line">myEE.on(&#x27;foo&#x27;, () =&gt; console.log(&#x27;a&#x27;));</span><br><span class="line">myEE.prependListener(&#x27;foo&#x27;, () =&gt; console.log(&#x27;b&#x27;));</span><br><span class="line">myEE.emit(&#x27;foo&#x27;);</span><br><span class="line">// 打印:</span><br><span class="line">//   b</span><br><span class="line">//   a</span><br></pre></td></tr></table></figure>

<h3 id="EventEmitter-once-eventName-listener"><a href="#EventEmitter-once-eventName-listener" class="headerlink" title="EventEmitter.once(eventName, listener)"></a>EventEmitter.once(eventName, listener)</h3><ul>
<li><code>eventName</code> {any} 事件名</li>
<li><code>listener</code> {Function} 回调函数</li>
</ul>
<p>添加一个单次 listener 函数到名为 eventName 的事件。 下次触发 eventName 事件时，监听器会被移除，然后调用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.once(&#x27;connection&#x27;, (stream) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;首次调用！&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>返回一个 EventEmitter 引用，可以链式调用。</p>
<p>默认情况下，事件监听器会按照添加的顺序依次调用。 emitter.prependOnceListener() 方法可用于将事件监听器添加到监听器数组的开头。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const myEE = events.emitter();</span><br><span class="line">myEE.once(&#x27;foo&#x27;, () =&gt; console.log(&#x27;a&#x27;));</span><br><span class="line">myEE.prependOnceListener(&#x27;foo&#x27;, () =&gt; console.log(&#x27;b&#x27;));</span><br><span class="line">myEE.emit(&#x27;foo&#x27;);</span><br><span class="line">// 打印:</span><br><span class="line">//   b</span><br><span class="line">//   a</span><br></pre></td></tr></table></figure>

<h2 id="15、EventEmitter-对象：调用监听事件"><a href="#15、EventEmitter-对象：调用监听事件" class="headerlink" title="15、EventEmitter 对象：调用监听事件"></a>15、EventEmitter 对象：调用监听事件</h2><h3 id="EventEmitter-emit-eventName-…args"><a href="#EventEmitter-emit-eventName-…args" class="headerlink" title="EventEmitter.emit(eventName[, …args])"></a>EventEmitter.emit(eventName[, …args])</h3><ul>
<li><code>eventName</code> {any}</li>
<li><code>args</code> {any}</li>
</ul>
<p>按监听器的注册顺序，同步地调用每个注册到名为 eventName 事件的监听器，并传入提供的参数。</p>
<p>如果事件有监听器，则返回 true ，否则返回 false。</p>
<h2 id="16、EventEmitter-对象：获取监听事件"><a href="#16、EventEmitter-对象：获取监听事件" class="headerlink" title="16、EventEmitter 对象：获取监听事件"></a>16、EventEmitter 对象：获取监听事件</h2><h3 id="EventEmitter-eventNames"><a href="#EventEmitter-eventNames" class="headerlink" title="EventEmitter.eventNames()"></a>EventEmitter.eventNames()</h3><p>返回一个列出触发器已注册监听器的事件的数组。 数组中的值为字符串或符号。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const myEE = events.emitter();</span><br><span class="line">myEE.on(&#x27;foo&#x27;, () =&gt; &#123;&#125;);</span><br><span class="line">myEE.on(&#x27;bar&#x27;, () =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line">const sym = Symbol(&#x27;symbol&#x27;);</span><br><span class="line">myEE.on(sym, () =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line">console.log(myEE.eventNames());</span><br><span class="line">// 打印: [ &#x27;foo&#x27;, &#x27;bar&#x27;, Symbol(symbol) ]</span><br></pre></td></tr></table></figure>

<h3 id="EventEmitter-listenerCount-eventName"><a href="#EventEmitter-listenerCount-eventName" class="headerlink" title="EventEmitter.listenerCount(eventName)"></a>EventEmitter.listenerCount(eventName)</h3><ul>
<li><code>eventName</code> {string} 正在被监听的事件名</li>
</ul>
<p>返回正在监听名为 eventName 的事件的监听器的数量。</p>
<h3 id="EventEmitter-listeners-eventName"><a href="#EventEmitter-listeners-eventName" class="headerlink" title="EventEmitter.listeners(eventName)"></a>EventEmitter.listeners(eventName)</h3><ul>
<li><code>eventName</code> {string}</li>
</ul>
<p>返回名为 eventName 的事件的监听器数组的副本。</p>
<h2 id="17、EventEmitter-对象：添加监听事件到开头"><a href="#17、EventEmitter-对象：添加监听事件到开头" class="headerlink" title="17、EventEmitter 对象：添加监听事件到开头"></a>17、EventEmitter 对象：添加监听事件到开头</h2><h3 id="EventEmitter-prependListener-eventName-listener"><a href="#EventEmitter-prependListener-eventName-listener" class="headerlink" title="EventEmitter.prependListener(eventName, listener)"></a>EventEmitter.prependListener(eventName, listener)</h3><ul>
<li><code>eventName</code> {any} 事件名</li>
<li><code>listener</code> {Function} 回调函数</li>
</ul>
<p>添加 listener 函数到名为 eventName 的事件的监听器数组的开头。 不会检查 listener 是否已被添加。 多次调用并传入相同的 eventName 和 listener 会导致 listener 被添加与调用多次。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.prependListener(&#x27;connection&#x27;, (stream) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;有连接！&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>返回一个 EventEmitter 引用，可以链式调用。</p>
<h3 id="EventEmitter-prependOnceListener-eventName-listener"><a href="#EventEmitter-prependOnceListener-eventName-listener" class="headerlink" title="EventEmitter.prependOnceListener(eventName, listener)"></a>EventEmitter.prependOnceListener(eventName, listener)</h3><ul>
<li><code>eventName</code> {any} 事件名</li>
<li><code>listener</code> {Function} 回调函数</li>
</ul>
<p>添加一个单次 listener 函数到名为 eventName 的事件的监听器数组的开头。 下次触发 eventName 事件时，监听器会被移除，然后调用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.prependOnceListener(&#x27;connection&#x27;, (stream) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;首次调用！&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>返回一个 EventEmitter 引用，可以链式调用。</p>
<h2 id="18、EventEmitter-对象：删除事件监听"><a href="#18、EventEmitter-对象：删除事件监听" class="headerlink" title="18、EventEmitter 对象：删除事件监听"></a>18、EventEmitter 对象：删除事件监听</h2><h3 id="EventEmitter-removeAllListeners-eventName"><a href="#EventEmitter-removeAllListeners-eventName" class="headerlink" title="EventEmitter.removeAllListeners([eventName])"></a>EventEmitter.removeAllListeners([eventName])</h3><ul>
<li><code>eventName</code> {any}</li>
</ul>
<p>移除全部或指定 eventName 的监听器。</p>
<p>注意，在代码中移除其他地方添加的监听器是一个不好的做法，尤其是当 EventEmitter 实例是其他组件或模块创建的。</p>
<p>返回一个 EventEmitter 引用，可以链式调用。</p>
<h3 id="EventEmitter-removeListener-eventName-listener-（有-bug）"><a href="#EventEmitter-removeListener-eventName-listener-（有-bug）" class="headerlink" title="EventEmitter.removeListener(eventName, listener)（有 bug）"></a>EventEmitter.removeListener(eventName, listener)（有 bug）</h3><ul>
<li><code>eventName</code> {any}</li>
<li><code>listener</code> {Function}</li>
</ul>
<p>从名为 eventName 的事件的监听器数组中移除指定的 listener。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const callback = (stream) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;有连接！&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line">server.on(&#x27;connection&#x27;, callback);</span><br><span class="line">// ...</span><br><span class="line">server.removeListener(&#x27;connection&#x27;, callback);</span><br></pre></td></tr></table></figure>

<p>removeListener 最多只会从监听器数组里移除一个监听器实例。 如果任何单一的监听器被多次添加到指定 eventName 的监听器数组中，则必须多次调用 removeListener 才能移除每个实例。</p>
<p>注意，一旦一个事件被触发，所有绑定到它的监听器都会按顺序依次触发。 这意味着，在事件触发后、最后一个监听器完成执行前，任何 removeListener() 或 removeAllListeners() 调用都不会从 emit() 中移除它们。 随后的事件会像预期的那样发生。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">const myEmitter = events.emitter();</span><br><span class="line"></span><br><span class="line">const callbackA = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;A&#x27;);</span><br><span class="line">  myEmitter.removeListener(&#x27;event&#x27;, callbackB);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const callbackB = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;B&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myEmitter.on(&#x27;event&#x27;, callbackA);</span><br><span class="line"></span><br><span class="line">myEmitter.on(&#x27;event&#x27;, callbackB);</span><br><span class="line"></span><br><span class="line">// callbackA 移除了监听器 callbackB，但它依然会被调用。</span><br><span class="line">// 触发是内部的监听器数组为 [callbackA, callbackB]</span><br><span class="line">myEmitter.emit(&#x27;event&#x27;);</span><br><span class="line">// 打印:</span><br><span class="line">//   A</span><br><span class="line">//   B</span><br><span class="line"></span><br><span class="line">// callbackB 被移除了。</span><br><span class="line">// 内部监听器数组为 [callbackA]</span><br><span class="line">myEmitter.emit(&#x27;event&#x27;);</span><br><span class="line">// 打印:</span><br><span class="line">//   A</span><br></pre></td></tr></table></figure>

<p>因为监听器是使用内部数组进行管理的，所以调用它会改变在监听器被移除后注册的任何监听器的位置索引。</p>
<p>虽然这不会影响监听器的调用顺序，但意味着由 emitter.listeners() 方法返回的监听器数组副本需要被重新创建。</p>
<p>返回一个 EventEmitter 引用，可以链式调用。</p>
<h2 id="19、脚本间广播通信"><a href="#19、脚本间广播通信" class="headerlink" title="19、脚本间广播通信"></a>19、脚本间广播通信</h2><p>脚本间通信除了使用 engines 模块提供的<code>ScriptEngine.emit()</code>方法以外，也可以使用 events 模块提供的 broadcast 广播。</p>
<p>events.broadcast 本身是一个 EventEmitter，但它的事件是在脚本间共享的，所有脚本都能发送和监听这些事件；事件处理会在脚本主线程执行</p>
<p>例如在一个脚本发送一个广播 hello:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">events.<span class="property">broadcast</span>.<span class="title function_">emit</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;小明&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>在其他脚本中监听并处理：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">events.<span class="property">broadcast</span>.<span class="title function_">on</span>(<span class="string">&quot;hello&quot;</span>, <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="title function_">toast</span>(<span class="string">&quot;你好, &quot;</span> + name);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//保持脚本运行</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="20、获取-window-窗口信息"><a href="#20、获取-window-窗口信息" class="headerlink" title="20、获取 window 窗口信息"></a>20、获取 window 窗口信息</h2><h3 id="auto-windows"><a href="#auto-windows" class="headerlink" title="auto.windows"></a>auto.windows</h3><p>获取当前窗口的集合</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto.windows.filter(w =&gt; &#123;</span><br><span class="line"></span><br><span class="line">	//条件</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="21、Autojs-8-0Pro-版本：监听无障碍事件的-API"><a href="#21、Autojs-8-0Pro-版本：监听无障碍事件的-API" class="headerlink" title="21、Autojs 8.0Pro 版本：监听无障碍事件的 API"></a>21、Autojs 8.0Pro 版本：监听无障碍事件的 API</h2><p>在以前，Auto.js 也一直只能通过无限循环去判断当前界面、寻找控件，这实际上对省电优化十分不友好。</p>
<p>在 Pro 8.0.0-3 版本，引入了监听无障碍事件的 API。</p>
<h4 id="auto-registerEvents-events"><a href="#auto-registerEvents-events" class="headerlink" title="auto.registerEvents(events)"></a>auto.registerEvents(events)</h4><ul>
<li><code>events</code> {Array} 要监听的事件数组</li>
<li>返回 {EventEmitter}</li>
</ul>
<h4 id="auto-registerEvent-event-callback"><a href="#auto-registerEvent-event-callback" class="headerlink" title="auto.registerEvent(event, callback)"></a>auto.registerEvent(event, callback)</h4><ul>
<li><code>event</code> {String} 要监听的事件</li>
<li><code>callback</code> {Function} 事件回调</li>
<li>返回 {EventEmitter}</li>
</ul>
<p>以上两个函数用于监听一个或多个无障碍事件。所谓无障碍事件，即（其他软件）窗口发送变化、控件发送变化时的事件，包括：</p>
<ul>
<li><code>view_clicked</code> 控件被点击</li>
<li><code>view_long_clicked</code> 控件被长按点击</li>
<li><code>view_selected</code> 控件被选中</li>
<li><code>view_focused</code> 控件成为焦点</li>
<li><code>view_text_changed</code> 控件文本改变</li>
<li><code>view_scrolled</code> 控件被滑动</li>
<li><code>window_state_changed</code> 窗口状态变化</li>
<li><code>window_content_changed</code> 窗口内容变化</li>
<li><code>window_changed</code> 屏幕上显示窗口的变化（增加，删除，子窗口变化等）</li>
<li><code>notification_state_changed</code> 通知状态变化</li>
</ul>
<p>例如，我们要监听 Auto.js 的打开，可以用以下代码监听：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听窗口变化</span></span><br><span class="line">auto.<span class="title function_">registerEvent</span>(<span class="string">&quot;windows_changed&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 判断是否有新窗口打开</span></span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">windowChanges</span>[<span class="number">0</span>].<span class="title function_">indexOf</span>(<span class="string">&quot;add&quot;</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取新窗口的id</span></span><br><span class="line">    <span class="keyword">let</span> wid = e.<span class="property">windowId</span>;</span><br><span class="line">    <span class="comment">// 遍历窗口，获取新窗口</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable language_">window</span> = auto.<span class="property">windows</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">w</span>) =&gt;</span> w.<span class="property">id</span> == wid);</span><br><span class="line">    <span class="comment">// 判断新窗口是Auto.js</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">length</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="variable language_">window</span>[<span class="number">0</span>].<span class="property">title</span> == <span class="string">&quot;Auto.js&quot;</span>) &#123;</span><br><span class="line">      <span class="title function_">toast</span>(<span class="string">&quot;Auto.js被打开了！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="22、监听无障碍事件的-API：控件被点击"><a href="#22、监听无障碍事件的-API：控件被点击" class="headerlink" title="22、监听无障碍事件的 API：控件被点击"></a>22、监听无障碍事件的 API：控件被点击</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听控件被点击：view_clicked、view_long_clicked</span></span><br><span class="line">auto.<span class="title function_">registerEvent</span>(<span class="string">&quot;view_clicked&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">log</span>(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="文件系统-Files"><a href="#文件系统-Files" class="headerlink" title="文件系统 - Files"></a>文件系统 - Files</h2><p>一次性的文件读写可以直接使用<code>files.read()</code>, <code>files.write()</code>, <code>files.append()</code>等方便的函数</p>
<p>但如果需要频繁读写或随机读写，则使用<code>open()</code>函数打开一个文件对象来操作文件，并在操作完毕后调用<code>close()</code>函数关闭文件。</p>
<h3 id="files-isFile-path"><a href="#files-isFile-path" class="headerlink" title="files.isFile(path)"></a>files.isFile(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>返回路径 path 是否是文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log(files.isDir(&quot;/sdcard/文件夹/&quot;)); //返回false</span><br><span class="line">log(files.isDir(&quot;/sdcard/文件.txt&quot;)); //返回true</span><br></pre></td></tr></table></figure>

<h3 id="files-isDir-path"><a href="#files-isDir-path" class="headerlink" title="files.isDir(path)"></a>files.isDir(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>返回路径 path 是否是文件夹。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">log(files.isDir(&quot;/sdcard/文件夹/&quot;)); //返回true</span><br><span class="line">log(files.isDir(&quot;/sdcard/文件.txt&quot;)); //返回false</span><br></pre></td></tr></table></figure>

<h3 id="files-isEmptyDir-path"><a href="#files-isEmptyDir-path" class="headerlink" title="files.isEmptyDir(path)"></a>files.isEmptyDir(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>返回文件夹 path 是否为空文件夹。如果该路径并非文件夹，则直接返回<code>false</code>。</p>
<h3 id="files-join-parent-child"><a href="#files-join-parent-child" class="headerlink" title="files.join(parent, child)"></a>files.join(parent, child)</h3><ul>
<li><code>parent</code> {string} 父目录路径</li>
<li><code>child</code> {string} 子路径</li>
<li>返回 {string}</li>
</ul>
<p>连接两个路径并返回，例如<code>files.join(&quot;/sdcard/&quot;, &quot;1.txt&quot;)</code>返回”/sdcard/1.txt”。</p>
<h3 id="files-create-path"><a href="#files-create-path" class="headerlink" title="files.create(path)"></a>files.create(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>创建一个文件或文件夹并返回是否创建成功。如果文件已经存在，则直接返回<code>false</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">files.create(&quot;/sdcard/新文件夹/&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="files-createWithDirs-path"><a href="#files-createWithDirs-path" class="headerlink" title="files.createWithDirs(path)"></a>files.createWithDirs(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>创建一个文件或文件夹并返回是否创建成功。如果文件所在文件夹不存在，则先创建他所在的一系列文件夹。如果文件已经存在，则直接返回<code>false</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">files.createWithDirs(&quot;/sdcard/新文件夹/新文件夹/新文件夹/1.txt&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="files-exists-path"><a href="#files-exists-path" class="headerlink" title="files.exists(path)"></a>files.exists(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>返回在路径 path 处的文件是否存在。</p>
<h3 id="files-ensureDir-path"><a href="#files-ensureDir-path" class="headerlink" title="files.ensureDir(path)"></a>files.ensureDir(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
</ul>
<p>确保路径 path 所在的文件夹存在。如果该路径所在文件夹不存在，则创建该文件夹。</p>
<p>例如对于路径”/sdcard/Download/ABC/1.txt”，如果/Download/文件夹不存在，则会先创建 Download，再创建 ABC 文件夹。</p>
<h3 id="files-read-path-encoding-“utf-8”"><a href="#files-read-path-encoding-“utf-8”" class="headerlink" title="files.read(path[, encoding = “utf-8”])"></a>files.read(path[, encoding = “utf-8”])</h3><ul>
<li><code>path</code> {string} 路径</li>
<li><code>encoding</code> {string} 字符编码，可选，默认为 utf-8</li>
<li>返回 {string}</li>
</ul>
<p>读取文本文件 path 的所有内容并返回。如果文件不存在，则抛出<code>FileNotFoundException</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log(files.read(&quot;/sdcard/1.txt&quot;));</span><br></pre></td></tr></table></figure>

<h3 id="files-readBytes-path"><a href="#files-readBytes-path" class="headerlink" title="files.readBytes(path)"></a>files.readBytes(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {byte[]}</li>
</ul>
<p>读取文件 path 的所有内容并返回一个字节数组。如果文件不存在，则抛出<code>FileNotFoundException</code>。</p>
<p>注意，该数组是 Java 的数组，不具有 JavaScript 数组的 forEach, slice 等函数。</p>
<p>一个以 16 进制形式打印文件的例子如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var data = files.readBytes(&quot;/sdcard/1.png&quot;);</span><br><span class="line">var sb = new java.lang.StringBuilder();</span><br><span class="line">for(var i = 0; i &lt; data.length; i++)&#123;</span><br><span class="line">    sb.append(data[i].toString(16));</span><br><span class="line">&#125;</span><br><span class="line">log(sb.toString());</span><br></pre></td></tr></table></figure>

<h3 id="files-write-path-text-encoding-“utf-8”"><a href="#files-write-path-text-encoding-“utf-8”" class="headerlink" title="files.write(path, text[, encoding = “utf-8”])"></a>files.write(path, text[, encoding = “utf-8”])</h3><ul>
<li><code>path</code> {string} 路径</li>
<li><code>text</code> {string} 要写入的文本内容</li>
<li><code>encoding</code> {string} 字符编码</li>
</ul>
<p>把 text 写入到文件 path 中。如果文件存在则覆盖，不存在则创建。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var text = &quot;文件内容&quot;;</span><br><span class="line">//写入文件</span><br><span class="line">files.write(&quot;/sdcard/1.txt&quot;, text);</span><br><span class="line">//用其他应用查看文件</span><br><span class="line">app.viewFile(&quot;/sdcard/1.txt&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="files-writeBytes-path-bytes"><a href="#files-writeBytes-path-bytes" class="headerlink" title="files.writeBytes(path, bytes)"></a>files.writeBytes(path, bytes)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li><code>bytes</code> {byte[]} 字节数组，要写入的二进制数据</li>
</ul>
<p>把 bytes 写入到文件 path 中。如果文件存在则覆盖，不存在则创建。</p>
<h3 id="files-append-path-text-encoding-‘utf-8’"><a href="#files-append-path-text-encoding-‘utf-8’" class="headerlink" title="files.append(path, text[, encoding = ‘utf-8’])"></a>files.append(path, text[, encoding = ‘utf-8’])</h3><ul>
<li><code>path</code> {string} 路径</li>
<li><code>text</code> {string} 要写入的文本内容</li>
<li><code>encoding</code> {string} 字符编码</li>
</ul>
<p>把 text 追加到文件 path 的末尾。如果文件不存在则创建。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var text = &quot;追加的文件内容&quot;;</span><br><span class="line">files.append(&quot;/sdcard/1.txt&quot;, text);</span><br><span class="line">files.append(&quot;/sdcard/1.txt&quot;, text);</span><br><span class="line">//用其他应用查看文件</span><br><span class="line">app.viewFile(&quot;/sdcard/1.txt&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="files-appendBytes-path-text-encoding-‘utf-8’"><a href="#files-appendBytes-path-text-encoding-‘utf-8’" class="headerlink" title="files.appendBytes(path, text[, encoding = ‘utf-8’])"></a>files.appendBytes(path, text[, encoding = ‘utf-8’])</h3><ul>
<li><code>path</code> {string} 路径</li>
<li><code>bytes</code> {byte[]} 字节数组，要写入的二进制数据</li>
</ul>
<p>把 bytes 追加到文件 path 的末尾。如果文件不存在则创建。</p>
<h3 id="files-copy-fromPath-toPath"><a href="#files-copy-fromPath-toPath" class="headerlink" title="files.copy(fromPath, toPath)"></a>files.copy(fromPath, toPath)</h3><ul>
<li><code>fromPath</code> {string} 要复制的原文件路径</li>
<li><code>toPath</code> {string} 复制到的文件路径</li>
<li>返回 {boolean}</li>
</ul>
<p>复制文件，返回是否复制成功。例如<code>files.copy(&quot;/sdcard/1.txt&quot;, &quot;/sdcard/Download/1.txt&quot;)</code>。</p>
<h3 id="files-move-fromPath-toPath"><a href="#files-move-fromPath-toPath" class="headerlink" title="files.move(fromPath, toPath)"></a>files.move(fromPath, toPath)</h3><ul>
<li><code>fromPath</code> {string} 要移动的原文件路径</li>
<li><code>toPath</code> {string} 移动到的文件路径</li>
<li>返回 {boolean}</li>
</ul>
<p>移动文件，返回是否移动成功。例如<code>files.move(&quot;/sdcard/1.txt&quot;, &quot;/sdcard/Download/1.txt&quot;)</code>会把 1.txt 文件从 sd 卡根目录移动到 Download 文件夹。</p>
<h3 id="files-rename-path-newName"><a href="#files-rename-path-newName" class="headerlink" title="files.rename(path, newName)"></a>files.rename(path, newName)</h3><ul>
<li><code>path</code> {string} 要重命名的原文件路径</li>
<li><code>newName</code> {string} 要重命名的新文件名</li>
<li>返回 {boolean}</li>
</ul>
<p>重命名文件，并返回是否重命名成功。例如<code>files.rename(&quot;/sdcard/1.txt&quot;, &quot;2.txt&quot;)</code>。</p>
<h3 id="files-renameWithoutExtension-path-newName"><a href="#files-renameWithoutExtension-path-newName" class="headerlink" title="files.renameWithoutExtension(path, newName)"></a>files.renameWithoutExtension(path, newName)</h3><ul>
<li><code>path</code> {string} 要重命名的原文件路径</li>
<li><code>newName</code> {string} 要重命名的新文件名</li>
<li>返回 {boolean}</li>
</ul>
<p>重命名文件，不包含拓展名，并返回是否重命名成功。例如<code>files.rename(&quot;/sdcard/1.txt&quot;, &quot;2&quot;)</code>会把”1.txt”重命名为”2.txt”。</p>
<h3 id="files-getName-path"><a href="#files-getName-path" class="headerlink" title="files.getName(path)"></a>files.getName(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {string}</li>
</ul>
<p>返回文件的文件名。例如<code>files.getName(&quot;/sdcard/1.txt&quot;)</code>返回”1.txt”。</p>
<h3 id="files-getNameWithoutExtension-path"><a href="#files-getNameWithoutExtension-path" class="headerlink" title="files.getNameWithoutExtension(path)"></a>files.getNameWithoutExtension(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {string}</li>
</ul>
<p>返回不含拓展名的文件的文件名。例如<code>files.getName(&quot;/sdcard/1.txt&quot;)</code>返回”1”。</p>
<h3 id="files-getExtension-path"><a href="#files-getExtension-path" class="headerlink" title="files.getExtension(path)"></a>files.getExtension(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {string}</li>
</ul>
<p>返回文件的拓展名。例如<code>files.getExtension(&quot;/sdcard/1.txt&quot;)</code>返回”txt”。</p>
<h3 id="files-remove-path）"><a href="#files-remove-path）" class="headerlink" title="files.remove(path）"></a>files.remove(path）</h3><ul>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>删除文件或<strong>空文件夹</strong>，返回是否删除成功。</p>
<h3 id="files-removeDir-path"><a href="#files-removeDir-path" class="headerlink" title="files.removeDir(path)"></a>files.removeDir(path)</h3><ul>
<li><code>path</code> {string} 路径</li>
<li><code>path</code> {string} 路径</li>
<li>返回 {boolean}</li>
</ul>
<p>删除文件夹，如果文件夹不为空，则删除该文件夹的所有内容再删除该文件夹，返回是否全部删除成功。</p>
<h3 id="files-getSdcardPath"><a href="#files-getSdcardPath" class="headerlink" title="files.getSdcardPath()"></a>files.getSdcardPath()</h3><ul>
<li>返回 {string}</li>
</ul>
<p>返回 SD 卡路径。所谓 SD 卡，即外部存储器。</p>
<h3 id="files-cwd"><a href="#files-cwd" class="headerlink" title="files.cwd()"></a>files.cwd()</h3><ul>
<li>返回 {string}</li>
</ul>
<p>返回脚本的”当前工作文件夹路径”。该路径指的是，如果脚本本身为脚本文件，则返回这个脚本文件所在目录；否则返回<code>null</code>获取其他设定路径。</p>
<p>例如，对于脚本文件”/sdcard/脚本/1.js”运行<code>files.cwd()</code>返回”/sdcard/脚本/“。</p>
<h3 id="files-path-relativePath"><a href="#files-path-relativePath" class="headerlink" title="files.path(relativePath)"></a>files.path(relativePath)</h3><ul>
<li><code>relativePath</code> {string} 相对路径</li>
<li>返回 {string}</li>
</ul>
<p>返回相对路径对应的绝对路径。例如<code>files.path(&quot;./1.png&quot;)</code>，如果运行这个语句的脚本位于文件夹”/sdcard/脚本/“中，则返回<code>&quot;/sdcard/脚本/1.png&quot;</code>。</p>
<h3 id="files-listDir-path-filter"><a href="#files-listDir-path-filter" class="headerlink" title="files.listDir(path[, filter])"></a>files.listDir(path[, filter])</h3><ul>
<li><code>path</code> {string} 路径</li>
<li><code>filter</code> {Function} 过滤函数，可选。接收一个<code>string</code>参数（文件名），返回一个<code>boolean</code>值。</li>
</ul>
<p>列出文件夹 path 下的满足条件的文件和文件夹的名称的数组。如果不加 filter 参数，则返回所有文件和文件夹。</p>
<p>列出 sdcard 目录下所有文件和文件夹为:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var arr = files.listDir(&quot;/sdcard/&quot;);</span><br><span class="line">log(arr);</span><br></pre></td></tr></table></figure>

<p>列出脚本目录下所有 js 脚本文件为:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var dir = &quot;/sdcard/脚本/&quot;;</span><br><span class="line">var jsFiles = files.listDir(dir, function(name)&#123;</span><br><span class="line">    return name.endsWith(&quot;.js&quot;) &amp;&amp; files.isFile(files.join(dir, name));</span><br><span class="line">&#125;);</span><br><span class="line">log(jsFiles);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">是否是文件</span><br><span class="line">是否是文件夹</span><br><span class="line">是否是空的文件夹</span><br><span class="line">合并路径</span><br><span class="line">创建文件夹</span><br><span class="line">创建一系列文件夹</span><br><span class="line">文件是否存在</span><br><span class="line">确保文件夹存在</span><br><span class="line">读取文件</span><br><span class="line">读取文件字节集</span><br><span class="line">写到文件</span><br><span class="line">以字节集写到文件</span><br><span class="line">添加文本到文件末尾</span><br><span class="line">添加字节集到文件末尾</span><br><span class="line">复制</span><br><span class="line">移动</span><br><span class="line">重命名</span><br><span class="line">文件拓展名</span><br><span class="line">删除</span><br><span class="line">路径</span><br><span class="line">文件列表</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://wade9264.github.io">WHY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://wade9264.github.io/posts/86ce39c9.html">https://wade9264.github.io/posts/86ce39c9.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wade9264.github.io" target="_blank">WHY's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Autojs/">Autojs</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div><div class="post_share"><div class="social-share" data-image="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092220517.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/38c6db38.html" title="文字过长超出时显示省略号"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092220516.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">文字过长超出时显示省略号</div></div></a></div><div class="next-post pull-right"><a href="/posts/870abd39.html" title="Chrome浏览器扩展开发"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092220519.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Chrome浏览器扩展开发</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/b0c81bfe.html" title="在JavaScript中实现sleep睡眠函数"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092219361.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-15</div><div class="title">在JavaScript中实现sleep睡眠函数</div></div></a></div><div><a href="/posts/7a3e4b9e.html" title="JS在循环遍历时按同步顺序依次执行异步操作"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092218298.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-15</div><div class="title">JS在循环遍历时按同步顺序依次执行异步操作</div></div></a></div><div><a href="/posts/fdb7b858.html" title="Vue添加进入、离开、列表过渡动画"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092218367.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-03</div><div class="title">Vue添加进入、离开、列表过渡动画</div></div></a></div><div><a href="/posts/ce1ea377.html" title="WebSocket学习笔记"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302021655429.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-03</div><div class="title">WebSocket学习笔记</div></div></a></div><div><a href="/posts/f9f25371.html" title="使用Node.js编写爬虫程序"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092218299.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-16</div><div class="title">使用Node.js编写爬虫程序</div></div></a></div><div><a href="/posts/14824453.html" title="使用watermark.js给网页添加水印"><img class="cover" src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302061543556.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-06</div><div class="title">使用watermark.js给网页添加水印</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">WHY</div><div class="author-info__description">记录，成为更好的自己</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Autojs-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">Autojs 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Autojs-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1、Autojs 是什么，能做什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Autojs-%E5%90%84%E7%89%88%E6%9C%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.2.</span> <span class="toc-text">2、Autojs 各版本之间的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Autojs-%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E5%92%8C%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">3、Autojs 的学习路径和学习方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Autojs-%E8%84%9A%E6%9C%AC%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">2.</span> <span class="toc-text">Autojs 脚本开发环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81autojs-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%8F%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">2.1.</span> <span class="toc-text">1、autojs 软件安装及简单使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%AE%89%E5%8D%93%E6%89%8B%E6%9C%BA%E6%8A%95%E5%B1%8F%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2、安卓手机投屏软件的安装和使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E9%9B%B7%E7%94%B5%E6%A8%A1%E6%8B%9F%E5%99%A8%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.3.</span> <span class="toc-text">3、雷电模拟器的安装和使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81VScode-%E7%BC%96%E8%BE%91%E5%99%A8%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.4.</span> <span class="toc-text">4、VScode 编辑器的安装和使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81autojs-%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.5.</span> <span class="toc-text">5、autojs 插件安装和使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81autojs-%E6%89%8B%E6%9C%BA%E7%AB%AF%EF%BC%88%E6%A8%A1%E6%8B%9F%E5%99%A8%E7%AB%AF%EF%BC%89%E5%92%8C%E7%94%B5%E8%84%91%E7%AB%AF%E7%9B%B8%E4%BA%92%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.6.</span> <span class="toc-text">6、autojs 手机端（模拟器端）和电脑端相互连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E7%BC%96%E5%86%99%E7%AC%AC%E4%B8%80%E4%B8%AA-autojs-%E8%84%9A%E6%9C%AC%E5%B9%B6%E6%89%93%E5%8C%85%E6%88%90-apk"><span class="toc-number">2.7.</span> <span class="toc-text">7、编写第一个 autojs 脚本并打包成 apk</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8-%E2%80%94-APP"><span class="toc-number">3.</span> <span class="toc-text">应用 — APP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%85%B3%E4%BA%8E-APP-%E7%89%88%E6%9C%AC%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.</span> <span class="toc-text">1、关于 APP 版本的命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-versionCode"><span class="toc-number">3.1.1.</span> <span class="toc-text">app.versionCode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-versionName"><span class="toc-number">3.1.2.</span> <span class="toc-text">app.versionName</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-autojs-versionCode"><span class="toc-number">3.1.3.</span> <span class="toc-text">app.autojs.versionCode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-autojs-versionName"><span class="toc-number">3.1.4.</span> <span class="toc-text">app.autojs.versionName</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%89%93%E5%BC%80-APP"><span class="toc-number">3.2.</span> <span class="toc-text">2、打开 APP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-launchApp-appName"><span class="toc-number">3.2.1.</span> <span class="toc-text">app.launchApp(appName)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-launch-packageName"><span class="toc-number">3.2.2.</span> <span class="toc-text">app.launch(packageName)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-getPackageName-appName"><span class="toc-number">3.2.3.</span> <span class="toc-text">app.getPackageName(appName)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-getAppName-packageName"><span class="toc-number">3.2.4.</span> <span class="toc-text">app.getAppName(packageName)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%9F%A5%E7%9C%8B%E5%92%8C%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text">3、查看和编辑文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-viewFile-path"><span class="toc-number">3.3.1.</span> <span class="toc-text">app.viewFile(path)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-editFile-path"><span class="toc-number">3.3.2.</span> <span class="toc-text">app.editFile(path)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81APP-%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD"><span class="toc-number">3.4.</span> <span class="toc-text">4、APP 的安装和卸载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-uninstall-packageName"><span class="toc-number">3.4.1.</span> <span class="toc-text">app.uninstall(packageName)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-viewFile-path-1"><span class="toc-number">3.4.2.</span> <span class="toc-text">app.viewFile(path)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E4%B8%8D%E5%90%8C%E7%9A%84%E8%B7%B3%E8%BD%AC%E6%96%B9%E5%BC%8F"><span class="toc-number">3.5.</span> <span class="toc-text">5、不同的跳转方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-openAppSetting-packageName"><span class="toc-number">3.5.1.</span> <span class="toc-text">app.openAppSetting(packageName)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-startActivity-name"><span class="toc-number">3.5.2.</span> <span class="toc-text">app.startActivity(name)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-openUrl-url"><span class="toc-number">3.5.3.</span> <span class="toc-text">app.openUrl(url)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E8%87%AA%E5%8A%A8%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6"><span class="toc-number">3.6.</span> <span class="toc-text">6、自动发送邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#app-sendEmail-options"><span class="toc-number">3.6.1.</span> <span class="toc-text">app.sendEmail(options)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0-Globals"><span class="toc-number">4.</span> <span class="toc-text">一般全局函数 - Globals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%82%AC%E6%B5%AE%E7%AA%97-Floaty"><span class="toc-number">5.</span> <span class="toc-text">悬浮窗 - Floaty</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E5%92%8C%E5%85%B3%E9%97%AD%E6%82%AC%E6%B5%AE%E7%AA%97"><span class="toc-number">6.</span> <span class="toc-text">1、创建和关闭悬浮窗</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#floaty-window-layout"><span class="toc-number">6.1.</span> <span class="toc-text">floaty.window(layout)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#floaty-rawWindow-layout"><span class="toc-number">6.2.</span> <span class="toc-text">floaty.rawWindow(layout)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#floaty-closeAll"><span class="toc-number">6.3.</span> <span class="toc-text">floaty.closeAll()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81FloatyWindow-%E5%AF%B9%E8%B1%A1"><span class="toc-number">7.</span> <span class="toc-text">2、FloatyWindow 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-setAdjustEnabled-enabled"><span class="toc-number">7.1.</span> <span class="toc-text">FloatyWindow.setAdjustEnabled(enabled)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-setPosition-x-y"><span class="toc-number">7.2.</span> <span class="toc-text">FloatyWindow.setPosition(x, y)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-getX"><span class="toc-number">7.3.</span> <span class="toc-text">FloatyWindow.getX()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-getY"><span class="toc-number">7.4.</span> <span class="toc-text">FloatyWindow.getY()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-setSize-width-height"><span class="toc-number">7.5.</span> <span class="toc-text">FloatyWindow.setSize(width, height)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-getWidth"><span class="toc-number">7.6.</span> <span class="toc-text">FloatyWindow.getWidth()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-getHeight"><span class="toc-number">7.7.</span> <span class="toc-text">FloatyWindow.getHeight()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-close"><span class="toc-number">7.8.</span> <span class="toc-text">FloatyWindow.close()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyWindow-exitOnClose"><span class="toc-number">7.9.</span> <span class="toc-text">FloatyWindow.exitOnClose()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81FloatyRawWindow-%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.</span> <span class="toc-text">3、FloatyRawWindow 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-setTouchable-touchable"><span class="toc-number">8.1.</span> <span class="toc-text">FloatyRawWindow.setTouchable(touchable)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-setPosition-x-y"><span class="toc-number">8.2.</span> <span class="toc-text">FloatyRawWindow.setPosition(x, y)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-getX"><span class="toc-number">8.3.</span> <span class="toc-text">FloatyRawWindow.getX()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-getY"><span class="toc-number">8.4.</span> <span class="toc-text">FloatyRawWindow.getY()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-setSize-width-height"><span class="toc-number">8.5.</span> <span class="toc-text">FloatyRawWindow.setSize(width, height)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-getWidth"><span class="toc-number">8.6.</span> <span class="toc-text">FloatyRawWindow.getWidth()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-getHeight"><span class="toc-number">8.7.</span> <span class="toc-text">FloatyRawWindow.getHeight()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-close"><span class="toc-number">8.8.</span> <span class="toc-text">FloatyRawWindow.close()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FloatyRawWindow-exitOnClose"><span class="toc-number">8.9.</span> <span class="toc-text">FloatyRawWindow.exitOnClose()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E-Engines"><span class="toc-number">9.</span> <span class="toc-text">脚本引擎 - Engines</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%9C%A8%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E%E4%B8%AD%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-number">10.</span> <span class="toc-text">1、在脚本引擎中运行脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#engines-execScript-name-script-config"><span class="toc-number">10.1.</span> <span class="toc-text">engines.execScript(name, script[, config])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%9C%A8%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E%E4%B8%AD%E8%BF%90%E8%A1%8C-js-%E6%96%87%E4%BB%B6"><span class="toc-number">11.</span> <span class="toc-text">2、在脚本引擎中运行 js 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#engines-execScriptFile-path-config"><span class="toc-number">11.1.</span> <span class="toc-text">engines.execScriptFile(path[, config])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%9C%A8%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E%E4%B8%AD%E8%BF%90%E8%A1%8C%E5%BD%95%E5%88%B6%E7%9A%84%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-number">12.</span> <span class="toc-text">3、在脚本引擎中运行录制的脚本文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#engines-execAutoFile-path-config"><span class="toc-number">12.1.</span> <span class="toc-text">engines.execAutoFile(path[, config])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">13.</span> <span class="toc-text">4、脚本引擎控制方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#engines-stopAll"><span class="toc-number">13.1.</span> <span class="toc-text">engines.stopAll()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#engines-stopAllAndToast"><span class="toc-number">13.2.</span> <span class="toc-text">engines.stopAllAndToast()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#engines-myEngine"><span class="toc-number">13.3.</span> <span class="toc-text">engines.myEngine()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#engines-all"><span class="toc-number">13.4.</span> <span class="toc-text">engines.all()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">13.4.1.</span> <span class="toc-text"></span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E5%AF%B9%E8%B1%A1%E2%80%93ScriptExecution"><span class="toc-number">14.</span> <span class="toc-text">5、脚本执行对象–ScriptExecution</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ScriptExecution-getEngine"><span class="toc-number">14.1.</span> <span class="toc-text">ScriptExecution.getEngine()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ScriptExecution-getConfig"><span class="toc-number">14.2.</span> <span class="toc-text">ScriptExecution.getConfig()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E%E5%AF%B9%E8%B1%A1%E2%80%93ScriptEngine"><span class="toc-number">15.</span> <span class="toc-text">6、脚本引擎对象–ScriptEngine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ScriptEngine-forceStop"><span class="toc-number">15.1.</span> <span class="toc-text">ScriptEngine.forceStop()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ScriptEngine-cwd"><span class="toc-number">15.2.</span> <span class="toc-text">ScriptEngine.cwd()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ScriptEngine-getSource"><span class="toc-number">15.3.</span> <span class="toc-text">ScriptEngine.getSource()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">16.</span> <span class="toc-text">7、脚本引擎之间的通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ScriptEngine-emit-eventName-%E2%80%A6args"><span class="toc-number">16.1.</span> <span class="toc-text">ScriptEngine.emit(eventName[, …args])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E8%84%9A%E6%9C%AC%E5%BC%95%E6%93%8E%E9%85%8D%E7%BD%AE%E2%80%93ScriptConfig"><span class="toc-number">17.</span> <span class="toc-text">8、脚本引擎配置–ScriptConfig</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#delay"><span class="toc-number">17.1.</span> <span class="toc-text">delay</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#interval"><span class="toc-number">17.2.</span> <span class="toc-text">interval</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loopTimes"><span class="toc-number">17.3.</span> <span class="toc-text">loopTimes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getPath"><span class="toc-number">17.4.</span> <span class="toc-text">getPath()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0-Globals-1"><span class="toc-number">18.</span> <span class="toc-text">一般全局函数 - Globals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%B8%B8%E7%94%A8%E7%9A%84%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0"><span class="toc-number">19.</span> <span class="toc-text">1、常用的全局函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sleep-n"><span class="toc-number">19.1.</span> <span class="toc-text">sleep(n)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toast-message"><span class="toc-number">19.2.</span> <span class="toc-text">toast(message)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log-message"><span class="toc-number">19.3.</span> <span class="toc-text">log(message)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toastLog-message"><span class="toc-number">19.4.</span> <span class="toc-text">toastLog(message)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exit"><span class="toc-number">19.5.</span> <span class="toc-text">exit()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E7%9B%91%E6%B5%8B%E5%8C%85%E5%90%8D%E5%92%8C-Activity"><span class="toc-number">20.</span> <span class="toc-text">2、返回当前监测包名和 Activity</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#currentPackage"><span class="toc-number">20.1.</span> <span class="toc-text">currentPackage()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#currentActivity"><span class="toc-number">20.2.</span> <span class="toc-text">currentActivity()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E7%AD%89%E5%BE%85%E5%8C%85%E5%90%8D%E5%92%8C-Activity-%E7%9A%84%E5%87%BA%E7%8E%B0"><span class="toc-number">21.</span> <span class="toc-text">3、等待包名和 Activity 的出现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#waitForActivity-activity-period-200"><span class="toc-number">21.1.</span> <span class="toc-text">waitForActivity(activity[, period &#x3D; 200])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#waitForPackage-package-period-200"><span class="toc-number">21.2.</span> <span class="toc-text">waitForPackage(package[, period &#x3D; 200])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%89%AA%E5%88%87%E6%9D%BF%EF%BC%9A%E5%AE%9E%E7%8E%B0%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%8A%9F%E8%83%BD"><span class="toc-number">22.</span> <span class="toc-text">4、剪切板：实现复制粘贴功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setClip-text"><span class="toc-number">22.1.</span> <span class="toc-text">setClip(text)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getClip"><span class="toc-number">22.2.</span> <span class="toc-text">getClip()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#paste"><span class="toc-number">22.3.</span> <span class="toc-text">paste()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E8%8E%B7%E5%8F%96%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-number">23.</span> <span class="toc-text">5、获取随机数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#random"><span class="toc-number">23.1.</span> <span class="toc-text">random()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#random-min-max"><span class="toc-number">23.2.</span> <span class="toc-text">random(min, max)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E9%80%82%E9%85%8D%E5%AE%89%E5%8D%93%E7%89%88%E6%9C%AC%E5%92%8C-Autojs-%E7%89%88%E6%9C%AC"><span class="toc-number">24.</span> <span class="toc-text">6、适配安卓版本和 Autojs 版本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#requiresApi-api"><span class="toc-number">24.1.</span> <span class="toc-text">requiresApi(api)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#requiresAutojsVersion-version"><span class="toc-number">24.2.</span> <span class="toc-text">requiresAutojsVersion(version)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%8F%B0-Console"><span class="toc-number">25.</span> <span class="toc-text">控制台 - Console</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">26.</span> <span class="toc-text">1、控制台的常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#console-show"><span class="toc-number">26.1.</span> <span class="toc-text">console.show()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-hide"><span class="toc-number">26.2.</span> <span class="toc-text">console.hide()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-clear"><span class="toc-number">26.3.</span> <span class="toc-text">console.clear()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA%E4%BF%A1%E6%81%AF%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">27.</span> <span class="toc-text">2、控制台输出信息的几种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#console-log-data-%E2%80%A6args"><span class="toc-number">27.1.</span> <span class="toc-text">console.log([data][, …args])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-trace-data-%E2%80%A6args"><span class="toc-number">27.2.</span> <span class="toc-text">console.trace([data][, …args])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print-text-%E2%80%A6args"><span class="toc-number">27.3.</span> <span class="toc-text">print(text[, …args])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%BF%A1%E6%81%AF%E7%9A%84%E8%BE%93%E5%87%BA%E6%A0%B7%E5%BC%8F"><span class="toc-number">28.</span> <span class="toc-text">3、控制台信息的输出样式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#console-verbose-data-%E2%80%A6args"><span class="toc-number">28.1.</span> <span class="toc-text">console.verbose([data][, …args])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-info-data-%E2%80%A6args"><span class="toc-number">28.2.</span> <span class="toc-text">console.info([data][, …args])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-warn-data-%E2%80%A6args"><span class="toc-number">28.3.</span> <span class="toc-text">console.warn([data][, …args])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-error-data-%E2%80%A6args"><span class="toc-number">28.4.</span> <span class="toc-text">console.error([data][, …args])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-assert-value-message"><span class="toc-number">28.5.</span> <span class="toc-text">console.assert(value, message)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%AE%A1%E6%97%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">29.</span> <span class="toc-text">4、控制台计时操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#console-time-label"><span class="toc-number">29.1.</span> <span class="toc-text">console.time([label])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-timeEnd-label"><span class="toc-number">29.2.</span> <span class="toc-text">console.timeEnd(label)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%85%A5%E6%A1%86%EF%BC%88%E6%97%A0%E6%95%88%EF%BC%89"><span class="toc-number">30.</span> <span class="toc-text">5、控制台输入框（无效）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#console-input-data-%E2%80%A6args"><span class="toc-number">30.1.</span> <span class="toc-text">console.input(data[, …args])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-rawInput-data-%E2%80%A6args"><span class="toc-number">30.2.</span> <span class="toc-text">console.rawInput(data[, …args])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AE%BE%E7%BD%AE"><span class="toc-number">31.</span> <span class="toc-text">6、控制台的大小和位置设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#console-setSize-w-h"><span class="toc-number">31.1.</span> <span class="toc-text">console.setSize(w, h)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-setPosition-x-y"><span class="toc-number">31.2.</span> <span class="toc-text">console.setPosition(x, y)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%9D%90%E6%A0%87%E7%9A%84%E6%93%8D%E4%BD%9C-CoordinatesBasedAutomation"><span class="toc-number">32.</span> <span class="toc-text">基于坐标的操作 - CoordinatesBasedAutomation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%AE%BE%E7%BD%AE%E5%B1%8F%E5%B9%95%E7%9A%84%E5%AE%BD%E5%BA%A6%E5%92%8C%E9%AB%98%E5%BA%A6"><span class="toc-number">33.</span> <span class="toc-text">1、设置屏幕的宽度和高度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setScreenMetrics-width-height"><span class="toc-number">33.1.</span> <span class="toc-text">setScreenMetrics(width, height)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%85%8D-root-%E6%89%8B%E6%9C%BA%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E6%8B%9F%E7%82%B9%E5%87%BB%E6%96%B9%E5%BC%8F"><span class="toc-number">34.</span> <span class="toc-text">2、免 root 手机的三种模拟点击方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#click-x-y"><span class="toc-number">34.1.</span> <span class="toc-text">click(x, y)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#longClick-x-y"><span class="toc-number">34.2.</span> <span class="toc-text">longClick(x, y)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#press-x-y-duration"><span class="toc-number">34.3.</span> <span class="toc-text">press(x, y, duration)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%85%8D-root-%E6%89%8B%E6%9C%BA%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E6%8B%9F%E6%BB%91%E5%8A%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">35.</span> <span class="toc-text">3、免 root 手机的三种模拟滑动方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#swipe-x1-y1-x2-y2-duration"><span class="toc-number">35.1.</span> <span class="toc-text">swipe(x1, y1, x2, y2, duration)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gesture-duration-x1-y1-x2-y2-%E2%80%A6"><span class="toc-number">35.2.</span> <span class="toc-text">gesture(duration, [x1, y1], [x2, y2], …)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gestures-delay1-duration1-x1-y1-x2-y2-%E2%80%A6-delay2-duration2-x3-y3-x4-y4-%E2%80%A6-%E2%80%A6"><span class="toc-number">35.3.</span> <span class="toc-text">gestures([delay1, duration1, [x1, y1], [x2, y2], …], [delay2, duration2, [x3, y3], [x4, y4], …], …)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E4%BD%BF%E7%94%A8-root-%E6%9D%83%E9%99%90%E6%A8%A1%E6%8B%9F%E7%82%B9%E5%87%BB"><span class="toc-number">36.</span> <span class="toc-text">4、使用 root 权限模拟点击</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RootAutomator-tap-x-y-id"><span class="toc-number">36.1.</span> <span class="toc-text">RootAutomator.tap(x, y[, id])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RootAutomator-press-x-y-duration-id"><span class="toc-number">36.2.</span> <span class="toc-text">RootAutomator.press(x, y, duration[, id])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RootAutomator-longPress-x-y-id"><span class="toc-number">36.3.</span> <span class="toc-text">RootAutomator.longPress(x, y[, id])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E4%BD%BF%E7%94%A8-root-%E6%9D%83%E9%99%90%E6%A8%A1%E6%8B%9F%E6%BB%91%E5%8A%A8%EF%BC%88%E6%97%A0%E6%95%88%E6%9E%9C%EF%BC%89"><span class="toc-number">37.</span> <span class="toc-text">5、使用 root 权限模拟滑动（无效果）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RootAutomator-swipe-x1-x2-y1-y2-duration-id"><span class="toc-number">37.1.</span> <span class="toc-text">RootAutomator.swipe(x1, x2, y1, y2[, duration, id])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E4%BD%BF%E7%94%A8-root-%E6%9D%83%E9%99%90%E5%AE%9E%E7%8E%B0%E6%A8%A1%E6%8B%9F%E6%8B%96%E5%8A%A8"><span class="toc-number">38.</span> <span class="toc-text">6、使用 root 权限实现模拟拖动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RootAutomator-touchDown-x-y-id"><span class="toc-number">38.1.</span> <span class="toc-text">RootAutomator.touchDown(x, y[, id])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RootAutomator-touchMove-x-y-id"><span class="toc-number">38.2.</span> <span class="toc-text">RootAutomator.touchMove(x, y[, id])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RootAutomator-touchUp-id"><span class="toc-number">38.3.</span> <span class="toc-text">RootAutomator.touchUp([id])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E4%BD%BF%E7%94%A8-root-%E6%9D%83%E9%99%90%E7%82%B9%E5%87%BB%E5%92%8C%E6%BB%91%E5%8A%A8%E7%9A%84%E7%AE%80%E5%8D%95%E5%91%BD%E4%BB%A4"><span class="toc-number">39.</span> <span class="toc-text">7、使用 root 权限点击和滑动的简单命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tap-x-y"><span class="toc-number">39.1.</span> <span class="toc-text">Tap(x, y)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Swipe-x1-y1-x2-y2-duration"><span class="toc-number">39.2.</span> <span class="toc-text">Swipe(x1, y1, x2, y2, [duration])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87-Device"><span class="toc-number">40.</span> <span class="toc-text">设备 - Device</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%8E%B7%E5%8F%96%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF"><span class="toc-number">41.</span> <span class="toc-text">1、获取设备信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%94%B9%E5%8F%98%E8%AE%BE%E5%A4%87%E4%BA%AE%E5%BA%A6"><span class="toc-number">41.1.</span> <span class="toc-text">2、获取并改变设备亮度</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getBrightness"><span class="toc-number">41.1.1.</span> <span class="toc-text">device.getBrightness()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getBrightnessMode"><span class="toc-number">41.1.2.</span> <span class="toc-text">device.getBrightnessMode()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-setBrightness-b"><span class="toc-number">41.1.3.</span> <span class="toc-text">device.setBrightness(b)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-setBrightnessMode-mode"><span class="toc-number">41.1.4.</span> <span class="toc-text">device.setBrightnessMode(mode)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%94%B9%E5%8F%98%E8%AE%BE%E5%A4%87%E9%9F%B3%E9%87%8F"><span class="toc-number">42.</span> <span class="toc-text">3、获取并改变设备音量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getMusicVolume"><span class="toc-number">42.0.1.</span> <span class="toc-text">device.getMusicVolume()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getNotificationVolume"><span class="toc-number">42.0.2.</span> <span class="toc-text">device.getNotificationVolume()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getAlarmVolume"><span class="toc-number">42.0.3.</span> <span class="toc-text">device.getAlarmVolume()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getMusicMaxVolume"><span class="toc-number">42.0.4.</span> <span class="toc-text">device.getMusicMaxVolume()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getNotificationMaxVolume"><span class="toc-number">42.0.5.</span> <span class="toc-text">device.getNotificationMaxVolume()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-getAlarmMaxVolume"><span class="toc-number">42.0.6.</span> <span class="toc-text">device.getAlarmMaxVolume()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-setMusicVolume-volume"><span class="toc-number">42.0.7.</span> <span class="toc-text">device.setMusicVolume(volume)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-setNotificationVolume-volume"><span class="toc-number">42.0.8.</span> <span class="toc-text">device.setNotificationVolume(volume)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#device-setAlarmVolume-volume"><span class="toc-number">42.0.9.</span> <span class="toc-text">device.setAlarmVolume(volume)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%94%B9%E5%8F%98%E8%AE%BE%E5%A4%87%E5%B1%8F%E5%B9%95%E7%8A%B6%E6%80%81"><span class="toc-number">43.</span> <span class="toc-text">4、获取并改变设备屏幕状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#device-isScreenOn"><span class="toc-number">43.1.</span> <span class="toc-text">device.isScreenOn()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#device-wakeUp"><span class="toc-number">43.2.</span> <span class="toc-text">device.wakeUp()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#device-wakeUpIfNeeded"><span class="toc-number">43.3.</span> <span class="toc-text">device.wakeUpIfNeeded()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#device-keepScreenOn-timeout"><span class="toc-number">43.4.</span> <span class="toc-text">device.keepScreenOn([timeout])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#device-keepScreenDim-timeout"><span class="toc-number">43.5.</span> <span class="toc-text">device.keepScreenDim([timeout])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#device-cancelKeepingAwake"><span class="toc-number">43.6.</span> <span class="toc-text">device.cancelKeepingAwake()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E8%AE%BE%E7%BD%AE%E8%AE%BE%E5%A4%87%E9%9C%87%E5%8A%A8%E7%8A%B6%E6%80%81"><span class="toc-number">44.</span> <span class="toc-text">5、设置设备震动状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#device-vibrate-millis"><span class="toc-number">44.1.</span> <span class="toc-text">device.vibrate(millis)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#device-cancelVibration"><span class="toc-number">44.2.</span> <span class="toc-text">device.cancelVibration()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%AF%9D%E6%A1%86-Dialogs"><span class="toc-number">45.</span> <span class="toc-text">对话框 - Dialogs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%B8%AD%E7%9A%84%E5%9B%9E%E8%B0%83%E5%92%8C-Promise"><span class="toc-number">46.</span> <span class="toc-text">1、对话框中的回调和 Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#alert%EF%BC%88str%EF%BC%89"><span class="toc-number">46.1.</span> <span class="toc-text">alert（str）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#confirm%EF%BC%88str%EF%BC%89"><span class="toc-number">46.2.</span> <span class="toc-text">confirm（str）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%EF%BC%9Aalert-%E5%92%8C-confirm"><span class="toc-number">47.</span> <span class="toc-text">2、对话框：alert 和 confirm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-alert-title-content-callback"><span class="toc-number">47.1.</span> <span class="toc-text">dialogs.alert(title[, content, callback])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-confirm-title-content-callback"><span class="toc-number">47.2.</span> <span class="toc-text">dialogs.confirm(title[, content, callback])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%EF%BC%9ArawInput-%E5%92%8C-input"><span class="toc-number">48.</span> <span class="toc-text">3、对话框：rawInput 和 input</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-rawInput-title-prefill-callback"><span class="toc-number">48.1.</span> <span class="toc-text">dialogs.rawInput(title[, prefill, callback])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-input-title-prefill-callback"><span class="toc-number">48.2.</span> <span class="toc-text">dialogs.input(title[, prefill, callback])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%EF%BC%9A%E9%80%89%E9%A1%B9%E5%88%97%E8%A1%A8"><span class="toc-number">49.</span> <span class="toc-text">4、对话框：选项列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-select-title-items-callback"><span class="toc-number">49.1.</span> <span class="toc-text">dialogs.select(title, items, callback)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%EF%BC%9A%E5%8D%95%E9%80%89%E5%92%8C%E5%A4%9A%E9%80%89"><span class="toc-number">50.</span> <span class="toc-text">5、对话框：单选和多选</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-singleChoice-title-items-index-callback"><span class="toc-number">50.1.</span> <span class="toc-text">dialogs.singleChoice(title, items[, index, callback])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-multiChoice-title-items-indices-callback"><span class="toc-number">50.2.</span> <span class="toc-text">dialogs.multiChoice(title, items[, indices, callback])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%AF%9D%E6%A1%86-Dialogs-1"><span class="toc-number">51.</span> <span class="toc-text">对话框 - Dialogs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">52.</span> <span class="toc-text">6、对话框：自定义对话框</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dialogs-build-properties"><span class="toc-number">52.1.</span> <span class="toc-text">dialogs.build(properties)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%BA%8B%E4%BB%B6%EF%BC%9A%E6%98%BE%E7%A4%BA%E5%92%8C%E6%B6%88%E5%A4%B1%E4%BA%8B%E4%BB%B6"><span class="toc-number">53.</span> <span class="toc-text">7、对话框事件：显示和消失事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-show"><span class="toc-number">53.1.</span> <span class="toc-text">事件: show</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-dismiss"><span class="toc-number">53.2.</span> <span class="toc-text">事件: dismiss</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%BA%8B%E4%BB%B6%EF%BC%9A%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B6"><span class="toc-number">54.</span> <span class="toc-text">8、对话框事件：按钮事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-positive"><span class="toc-number">54.1.</span> <span class="toc-text">事件: positive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-negative"><span class="toc-number">54.2.</span> <span class="toc-text">事件: negative</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-cancel"><span class="toc-number">54.3.</span> <span class="toc-text">事件: cancel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-neutral"><span class="toc-number">54.4.</span> <span class="toc-text">事件: neutral</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-any"><span class="toc-number">54.5.</span> <span class="toc-text">事件: any</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%BA%8B%E4%BB%B6%EF%BC%9A%E5%8D%95%E9%80%89%E5%A4%9A%E9%80%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">55.</span> <span class="toc-text">9、对话框事件：单选多选事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-item-select"><span class="toc-number">55.1.</span> <span class="toc-text">事件: item_select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-single-choice"><span class="toc-number">55.2.</span> <span class="toc-text">事件: single_choice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-multi-choice-%E3%80%90%E5%A4%B1%E6%95%88%E3%80%91"><span class="toc-number">55.3.</span> <span class="toc-text">事件: multi_choice 【失效】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%BA%8B%E4%BB%B6%EF%BC%9A%E8%BE%93%E5%85%A5%E4%BA%8B%E4%BB%B6"><span class="toc-number">56.</span> <span class="toc-text">10、对话框事件：输入事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-input"><span class="toc-number">56.1.</span> <span class="toc-text">事件: input</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-input-change"><span class="toc-number">56.2.</span> <span class="toc-text">事件: input_change</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">57.</span> <span class="toc-text">11、对话框对象方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dialog-getProgress"><span class="toc-number">57.1.</span> <span class="toc-text">dialog.getProgress()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dialog-getMaxProgress"><span class="toc-number">57.2.</span> <span class="toc-text">dialog.getMaxProgress()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dialog-getActionButton-action"><span class="toc-number">57.3.</span> <span class="toc-text">dialog.getActionButton(action)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%B8%8E%E7%9B%91%E5%90%AC-Events"><span class="toc-number">58.</span> <span class="toc-text">事件与监听 - Events</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E4%BB%B6%E4%B8%8E%E7%9B%91%E5%90%AC"><span class="toc-number">59.</span> <span class="toc-text">1、什么是事件与监听</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%9B%91%E5%90%AC%E6%8C%89%E9%94%AE%E4%BA%8B%E4%BB%B6"><span class="toc-number">60.</span> <span class="toc-text">2、监听按键事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-observeKey"><span class="toc-number">60.1.</span> <span class="toc-text">events.observeKey()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-onKeyDown-keyName-listener"><span class="toc-number">60.2.</span> <span class="toc-text">events.onKeyDown(keyName, listener)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-onKeyUp-keyName-listener"><span class="toc-number">60.3.</span> <span class="toc-text">events.onKeyUp(keyName, listener)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81KeyEvent-%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">61.</span> <span class="toc-text">3、KeyEvent 对象方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#KeyEvent-getAction"><span class="toc-number">61.1.</span> <span class="toc-text">KeyEvent.getAction()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KeyEvent-getKeyCode"><span class="toc-number">61.2.</span> <span class="toc-text">KeyEvent.getKeyCode()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KeyEvent-getEventTime"><span class="toc-number">61.3.</span> <span class="toc-text">KeyEvent.getEventTime()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KeyEvent-getDownTime"><span class="toc-number">61.4.</span> <span class="toc-text">KeyEvent.getDownTime()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KeyEvent-keyCodeToString-keyCode"><span class="toc-number">61.5.</span> <span class="toc-text">KeyEvent.keyCodeToString(keyCode)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E4%BA%8B%E4%BB%B6%EF%BC%9Akey%E3%80%81key-down%E3%80%81key-up"><span class="toc-number">62.</span> <span class="toc-text">4、事件：key、key_down、key_up</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-%E2%80%98key%E2%80%99"><span class="toc-number">62.1.</span> <span class="toc-text">事件: ‘key’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-%E2%80%98key-down%E2%80%99"><span class="toc-number">62.2.</span> <span class="toc-text">事件: ‘key_down’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-%E2%80%98key-up%E2%80%99"><span class="toc-number">62.3.</span> <span class="toc-text">事件: ‘key_up’</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%8D%95%E6%AC%A1%E7%9B%91%E5%90%AC%E6%8C%89%E9%94%AE%E4%BA%8B%E4%BB%B6"><span class="toc-number">63.</span> <span class="toc-text">5、单次监听按键事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-onceKeyDown-keyName-listener"><span class="toc-number">63.1.</span> <span class="toc-text">events.onceKeyDown(keyName, listener)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-onceKeyUp-keyName-listener"><span class="toc-number">63.2.</span> <span class="toc-text">events.onceKeyUp(keyName, listener)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E5%88%A0%E9%99%A4%E6%8C%89%E9%94%AE%E4%BA%8B%E4%BB%B6%E7%9A%84%E7%9B%91%E5%90%AC"><span class="toc-number">64.</span> <span class="toc-text">6、删除按键事件的监听</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-removeAllKeyDownListeners-keyName"><span class="toc-number">64.1.</span> <span class="toc-text">events.removeAllKeyDownListeners(keyName)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-removeAllKeyUpListeners-keyName"><span class="toc-number">64.2.</span> <span class="toc-text">events.removeAllKeyUpListeners(keyName)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E5%B1%8F%E8%94%BD%E5%8E%9F%E6%9C%89%E6%8C%89%E9%94%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">65.</span> <span class="toc-text">7、屏蔽原有按键功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-setKeyInterceptionEnabled-key-enabled"><span class="toc-number">65.1.</span> <span class="toc-text">events.setKeyInterceptionEnabled([key, ]enabled)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E5%B1%8F%E5%B9%95%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%EF%BC%88%E9%9C%80%E8%A6%81-root-%E6%9D%83%E9%99%90%EF%BC%89"><span class="toc-number">66.</span> <span class="toc-text">8、屏幕触摸事件监听（需要 root 权限）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-observeTouch"><span class="toc-number">66.1.</span> <span class="toc-text">events.observeTouch()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-setTouchEventTimeout-timeout"><span class="toc-number">66.2.</span> <span class="toc-text">events.setTouchEventTimeout(timeout)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-getTouchEventTimeout"><span class="toc-number">66.3.</span> <span class="toc-text">events.getTouchEventTimeout()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-onTouch-listener"><span class="toc-number">66.4.</span> <span class="toc-text">events.onTouch(listener)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events-removeAllTouchListeners"><span class="toc-number">66.5.</span> <span class="toc-text">events.removeAllTouchListeners()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81%E9%80%9A%E7%9F%A5%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%EF%BC%9AQQ-%E6%B6%88%E6%81%AF%E3%80%81%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E3%80%81%E6%8E%A8%E9%80%81%E7%AD%89%E9%80%9A%E7%9F%A5"><span class="toc-number">67.</span> <span class="toc-text">9、通知事件监听：QQ 消息、微信消息、推送等通知</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-observeNotification"><span class="toc-number">67.1.</span> <span class="toc-text">events.observeNotification()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-%E2%80%98notification%E2%80%99"><span class="toc-number">67.2.</span> <span class="toc-text">事件: ‘notification’</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81Notification-%E5%AF%B9%E8%B1%A1"><span class="toc-number">68.</span> <span class="toc-text">10、Notification 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Notification-number"><span class="toc-number">68.1.</span> <span class="toc-text">Notification.number</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Notification-when"><span class="toc-number">68.2.</span> <span class="toc-text">Notification.when</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Notification-getPackageName"><span class="toc-number">68.3.</span> <span class="toc-text">Notification.getPackageName()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Notification-getTitle"><span class="toc-number">68.4.</span> <span class="toc-text">Notification.getTitle()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Notification-getText"><span class="toc-number">68.5.</span> <span class="toc-text">Notification.getText()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Notification-click"><span class="toc-number">68.6.</span> <span class="toc-text">Notification.click()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Notification-delete"><span class="toc-number">68.7.</span> <span class="toc-text">Notification.delete()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81toast-%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-number">69.</span> <span class="toc-text">11、toast 事件监听</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-observeToast"><span class="toc-number">69.1.</span> <span class="toc-text">events.observeToast()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-%E2%80%98toast%E2%80%99"><span class="toc-number">69.2.</span> <span class="toc-text">事件: ‘toast’</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%81EventEmitter-%E5%AF%B9%E8%B1%A1"><span class="toc-number">70.</span> <span class="toc-text">12、EventEmitter 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events-emitter"><span class="toc-number">70.1.</span> <span class="toc-text">events.emitter()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%81EventEmitter-%E5%AF%B9%E8%B1%A1%EF%BC%9A%E8%AE%BE%E7%BD%AE%E7%9B%91%E5%90%AC%E5%99%A8%E6%95%B0%E9%87%8F"><span class="toc-number">71.</span> <span class="toc-text">13、EventEmitter 对象：设置监听器数量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-defaultMaxListeners"><span class="toc-number">71.1.</span> <span class="toc-text">EventEmitter.defaultMaxListeners</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-getMaxListeners"><span class="toc-number">71.2.</span> <span class="toc-text">EventEmitter.getMaxListeners()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-setMaxListeners-n"><span class="toc-number">71.3.</span> <span class="toc-text">EventEmitter.setMaxListeners(n)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E3%80%81EventEmitter-%E5%AF%B9%E8%B1%A1%EF%BC%9A%E6%B7%BB%E5%8A%A0%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6"><span class="toc-number">72.</span> <span class="toc-text">14、EventEmitter 对象：添加监听事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-addListener-eventName-listener"><span class="toc-number">72.1.</span> <span class="toc-text">EventEmitter.addListener(eventName, listener)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-on-eventName-listener"><span class="toc-number">72.2.</span> <span class="toc-text">EventEmitter.on(eventName, listener)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-once-eventName-listener"><span class="toc-number">72.3.</span> <span class="toc-text">EventEmitter.once(eventName, listener)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15%E3%80%81EventEmitter-%E5%AF%B9%E8%B1%A1%EF%BC%9A%E8%B0%83%E7%94%A8%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6"><span class="toc-number">73.</span> <span class="toc-text">15、EventEmitter 对象：调用监听事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-emit-eventName-%E2%80%A6args"><span class="toc-number">73.1.</span> <span class="toc-text">EventEmitter.emit(eventName[, …args])</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16%E3%80%81EventEmitter-%E5%AF%B9%E8%B1%A1%EF%BC%9A%E8%8E%B7%E5%8F%96%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6"><span class="toc-number">74.</span> <span class="toc-text">16、EventEmitter 对象：获取监听事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-eventNames"><span class="toc-number">74.1.</span> <span class="toc-text">EventEmitter.eventNames()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-listenerCount-eventName"><span class="toc-number">74.2.</span> <span class="toc-text">EventEmitter.listenerCount(eventName)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-listeners-eventName"><span class="toc-number">74.3.</span> <span class="toc-text">EventEmitter.listeners(eventName)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17%E3%80%81EventEmitter-%E5%AF%B9%E8%B1%A1%EF%BC%9A%E6%B7%BB%E5%8A%A0%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6%E5%88%B0%E5%BC%80%E5%A4%B4"><span class="toc-number">75.</span> <span class="toc-text">17、EventEmitter 对象：添加监听事件到开头</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-prependListener-eventName-listener"><span class="toc-number">75.1.</span> <span class="toc-text">EventEmitter.prependListener(eventName, listener)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-prependOnceListener-eventName-listener"><span class="toc-number">75.2.</span> <span class="toc-text">EventEmitter.prependOnceListener(eventName, listener)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18%E3%80%81EventEmitter-%E5%AF%B9%E8%B1%A1%EF%BC%9A%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-number">76.</span> <span class="toc-text">18、EventEmitter 对象：删除事件监听</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-removeAllListeners-eventName"><span class="toc-number">76.1.</span> <span class="toc-text">EventEmitter.removeAllListeners([eventName])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EventEmitter-removeListener-eventName-listener-%EF%BC%88%E6%9C%89-bug%EF%BC%89"><span class="toc-number">76.2.</span> <span class="toc-text">EventEmitter.removeListener(eventName, listener)（有 bug）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19%E3%80%81%E8%84%9A%E6%9C%AC%E9%97%B4%E5%B9%BF%E6%92%AD%E9%80%9A%E4%BF%A1"><span class="toc-number">77.</span> <span class="toc-text">19、脚本间广播通信</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20%E3%80%81%E8%8E%B7%E5%8F%96-window-%E7%AA%97%E5%8F%A3%E4%BF%A1%E6%81%AF"><span class="toc-number">78.</span> <span class="toc-text">20、获取 window 窗口信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#auto-windows"><span class="toc-number">78.1.</span> <span class="toc-text">auto.windows</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21%E3%80%81Autojs-8-0Pro-%E7%89%88%E6%9C%AC%EF%BC%9A%E7%9B%91%E5%90%AC%E6%97%A0%E9%9A%9C%E7%A2%8D%E4%BA%8B%E4%BB%B6%E7%9A%84-API"><span class="toc-number">79.</span> <span class="toc-text">21、Autojs 8.0Pro 版本：监听无障碍事件的 API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#auto-registerEvents-events"><span class="toc-number">79.0.1.</span> <span class="toc-text">auto.registerEvents(events)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#auto-registerEvent-event-callback"><span class="toc-number">79.0.2.</span> <span class="toc-text">auto.registerEvent(event, callback)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22%E3%80%81%E7%9B%91%E5%90%AC%E6%97%A0%E9%9A%9C%E7%A2%8D%E4%BA%8B%E4%BB%B6%E7%9A%84-API%EF%BC%9A%E6%8E%A7%E4%BB%B6%E8%A2%AB%E7%82%B9%E5%87%BB"><span class="toc-number">80.</span> <span class="toc-text">22、监听无障碍事件的 API：控件被点击</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F-Files"><span class="toc-number">81.</span> <span class="toc-text">文件系统 - Files</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#files-isFile-path"><span class="toc-number">81.1.</span> <span class="toc-text">files.isFile(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-isDir-path"><span class="toc-number">81.2.</span> <span class="toc-text">files.isDir(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-isEmptyDir-path"><span class="toc-number">81.3.</span> <span class="toc-text">files.isEmptyDir(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-join-parent-child"><span class="toc-number">81.4.</span> <span class="toc-text">files.join(parent, child)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-create-path"><span class="toc-number">81.5.</span> <span class="toc-text">files.create(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-createWithDirs-path"><span class="toc-number">81.6.</span> <span class="toc-text">files.createWithDirs(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-exists-path"><span class="toc-number">81.7.</span> <span class="toc-text">files.exists(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-ensureDir-path"><span class="toc-number">81.8.</span> <span class="toc-text">files.ensureDir(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-read-path-encoding-%E2%80%9Cutf-8%E2%80%9D"><span class="toc-number">81.9.</span> <span class="toc-text">files.read(path[, encoding &#x3D; “utf-8”])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-readBytes-path"><span class="toc-number">81.10.</span> <span class="toc-text">files.readBytes(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-write-path-text-encoding-%E2%80%9Cutf-8%E2%80%9D"><span class="toc-number">81.11.</span> <span class="toc-text">files.write(path, text[, encoding &#x3D; “utf-8”])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-writeBytes-path-bytes"><span class="toc-number">81.12.</span> <span class="toc-text">files.writeBytes(path, bytes)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-append-path-text-encoding-%E2%80%98utf-8%E2%80%99"><span class="toc-number">81.13.</span> <span class="toc-text">files.append(path, text[, encoding &#x3D; ‘utf-8’])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-appendBytes-path-text-encoding-%E2%80%98utf-8%E2%80%99"><span class="toc-number">81.14.</span> <span class="toc-text">files.appendBytes(path, text[, encoding &#x3D; ‘utf-8’])</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-copy-fromPath-toPath"><span class="toc-number">81.15.</span> <span class="toc-text">files.copy(fromPath, toPath)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-move-fromPath-toPath"><span class="toc-number">81.16.</span> <span class="toc-text">files.move(fromPath, toPath)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-rename-path-newName"><span class="toc-number">81.17.</span> <span class="toc-text">files.rename(path, newName)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-renameWithoutExtension-path-newName"><span class="toc-number">81.18.</span> <span class="toc-text">files.renameWithoutExtension(path, newName)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-getName-path"><span class="toc-number">81.19.</span> <span class="toc-text">files.getName(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-getNameWithoutExtension-path"><span class="toc-number">81.20.</span> <span class="toc-text">files.getNameWithoutExtension(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-getExtension-path"><span class="toc-number">81.21.</span> <span class="toc-text">files.getExtension(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-remove-path%EF%BC%89"><span class="toc-number">81.22.</span> <span class="toc-text">files.remove(path）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-removeDir-path"><span class="toc-number">81.23.</span> <span class="toc-text">files.removeDir(path)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-getSdcardPath"><span class="toc-number">81.24.</span> <span class="toc-text">files.getSdcardPath()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-cwd"><span class="toc-number">81.25.</span> <span class="toc-text">files.cwd()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-path-relativePath"><span class="toc-number">81.26.</span> <span class="toc-text">files.path(relativePath)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#files-listDir-path-filter"><span class="toc-number">81.27.</span> <span class="toc-text">files.listDir(path[, filter])</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/5f510e8f.html" title="el-table底部滚动条无法拖动问题解决"><img src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302092218362.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="el-table底部滚动条无法拖动问题解决"/></a><div class="content"><a class="title" href="/posts/5f510e8f.html" title="el-table底部滚动条无法拖动问题解决">el-table底部滚动条无法拖动问题解决</a><time datetime="2023-02-08T06:57:00.000Z" title="发表于 2023-02-08 14:57:00">2023-02-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/63b8f629.html" title="在Vue中实现拖拽功能"><img src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302061551358.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Vue中实现拖拽功能"/></a><div class="content"><a class="title" href="/posts/63b8f629.html" title="在Vue中实现拖拽功能">在Vue中实现拖拽功能</a><time datetime="2023-02-06T07:47:23.000Z" title="发表于 2023-02-06 15:47:23">2023-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/14824453.html" title="使用watermark.js给网页添加水印"><img src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302061543556.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用watermark.js给网页添加水印"/></a><div class="content"><a class="title" href="/posts/14824453.html" title="使用watermark.js给网页添加水印">使用watermark.js给网页添加水印</a><time datetime="2023-02-06T07:41:26.000Z" title="发表于 2023-02-06 15:41:26">2023-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/67c97ff3.html" title="浏览器调用摄像头获取媒体流，并实现拍照功能"><img src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302021655431.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="浏览器调用摄像头获取媒体流，并实现拍照功能"/></a><div class="content"><a class="title" href="/posts/67c97ff3.html" title="浏览器调用摄像头获取媒体流，并实现拍照功能">浏览器调用摄像头获取媒体流，并实现拍照功能</a><time datetime="2022-12-30T11:13:48.000Z" title="发表于 2022-12-30 19:13:48">2022-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a913bf31.html" title="前端实现Excel表格上传解析与导出"><img src="https://wade1999-images-1307558348.cos.ap-shanghai.myqcloud.com/202302021655432.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端实现Excel表格上传解析与导出"/></a><div class="content"><a class="title" href="/posts/a913bf31.html" title="前端实现Excel表格上传解析与导出">前端实现Excel表格上传解析与导出</a><time datetime="2022-12-16T10:32:16.000Z" title="发表于 2022-12-16 18:32:16">2022-12-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer-box"><div class="copyright">&copy;2020 - 2023 By <a class="author">WHY</a></div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script data-pjax type="text/javascript" src="/js/util.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>